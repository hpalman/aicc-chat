2026-01-26 10:41:52.395 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatHistoryMapper.class]
2026-01-26 10:41:52.395 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatSessionMapper.class]
2026-01-26 10:41:52.396 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\UserAccountMapper.class]
2026-01-26 10:41:52.398 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'aicc.chat.mapper.ChatHistoryMapper' mapperInterface
2026-01-26 10:41:52.402 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatHistoryMapper'.
2026-01-26 10:41:52.402 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatSessionMapper' and 'aicc.chat.mapper.ChatSessionMapper' mapperInterface
2026-01-26 10:41:52.403 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatSessionMapper'.
2026-01-26 10:41:52.404 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userAccountMapper' and 'aicc.chat.mapper.UserAccountMapper' mapperInterface
2026-01-26 10:41:52.404 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'userAccountMapper'.
2026-01-26 10:41:55.457 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Registered plugin: 'aicc.chat.config.MyBatisSqlLogger@1df32c09'
2026-01-26 10:41:55.664 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatHistoryMapper.xml]'
2026-01-26 10:41:55.701 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatSessionMapper.xml]'
2026-01-26 10:41:55.716 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\UserAccountMapper.xml]'
2026-01-26 10:43:12.182 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 10:43:12.206 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@583f4175] was not registered for synchronization because synchronization is not active
2026-01-26 10:43:13.768 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@583f4175]
2026-01-26 10:45:49.494 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 10:45:49.494 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a965ce] was not registered for synchronization because synchronization is not active
2026-01-26 10:45:50.581 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a965ce]
2026-01-26 10:46:12.153 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 10:46:12.153 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12e0ddb1] was not registered for synchronization because synchronization is not active
2026-01-26 10:46:13.229 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12e0ddb1]
2026-01-26 10:51:49.232 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatHistoryMapper.class]
2026-01-26 10:51:49.232 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatSessionMapper.class]
2026-01-26 10:51:49.232 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\UserAccountMapper.class]
2026-01-26 10:51:49.234 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'aicc.chat.mapper.ChatHistoryMapper' mapperInterface
2026-01-26 10:51:49.237 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatHistoryMapper'.
2026-01-26 10:51:49.237 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatSessionMapper' and 'aicc.chat.mapper.ChatSessionMapper' mapperInterface
2026-01-26 10:51:49.238 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatSessionMapper'.
2026-01-26 10:51:49.239 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userAccountMapper' and 'aicc.chat.mapper.UserAccountMapper' mapperInterface
2026-01-26 10:51:49.240 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'userAccountMapper'.
2026-01-26 10:51:51.866 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Registered plugin: 'aicc.chat.config.MyBatisSqlLogger@5a8656a2'
2026-01-26 10:51:52.042 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatHistoryMapper.xml]'
2026-01-26 10:51:52.074 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatSessionMapper.xml]'
2026-01-26 10:51:52.087 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\UserAccountMapper.xml]'
2026-01-26 10:52:08.221 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 10:52:08.234 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c3315c0] was not registered for synchronization because synchronization is not active
2026-01-26 10:53:12.620 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c3315c0]
2026-01-26 10:58:10.816 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatHistoryMapper.class]
2026-01-26 10:58:10.817 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatSessionMapper.class]
2026-01-26 10:58:10.817 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\UserAccountMapper.class]
2026-01-26 10:58:10.819 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'aicc.chat.mapper.ChatHistoryMapper' mapperInterface
2026-01-26 10:58:10.821 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatHistoryMapper'.
2026-01-26 10:58:10.821 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatSessionMapper' and 'aicc.chat.mapper.ChatSessionMapper' mapperInterface
2026-01-26 10:58:10.822 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatSessionMapper'.
2026-01-26 10:58:10.823 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userAccountMapper' and 'aicc.chat.mapper.UserAccountMapper' mapperInterface
2026-01-26 10:58:10.824 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'userAccountMapper'.
2026-01-26 10:58:13.337 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Registered plugin: 'aicc.chat.config.MyBatisSqlLogger@6bfbab1c'
2026-01-26 10:58:13.519 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatHistoryMapper.xml]'
2026-01-26 10:58:13.549 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatSessionMapper.xml]'
2026-01-26 10:58:13.565 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\UserAccountMapper.xml]'
2026-01-26 12:44:48.447 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 12:44:48.497 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f44f429] was not registered for synchronization because synchronization is not active
2026-01-26 12:44:49.028 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1652737861 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 12:44:49.039 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 12:44:49.069 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: hong(String), apt001(String), 1234(String)
2026-01-26 12:44:49.122 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 0
2026-01-26 12:44:49.156 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f44f429]
2026-01-26 12:45:15.280 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 12:45:15.281 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@512461e2] was not registered for synchronization because synchronization is not active
2026-01-26 12:45:15.282 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1427898142 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 12:45:15.282 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 12:45:15.283 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: customer01(String), apt001(String), 1234(String)
2026-01-26 12:45:15.285 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 0
2026-01-26 12:45:15.286 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@512461e2]
2026-01-26 12:45:34.778 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 12:45:34.778 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53d2b703] was not registered for synchronization because synchronization is not active
2026-01-26 12:45:34.779 [http-nio-28070-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1475160481 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 12:45:34.781 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 12:45:34.782 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 12:45:34.785 [http-nio-28070-exec-9] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 12:45:34.785 [http-nio-28070-exec-9] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 12:45:34.790 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 12:45:34.791 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53d2b703]
2026-01-26 12:46:00.445 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 12:46:00.446 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63877261] was not registered for synchronization because synchronization is not active
2026-01-26 12:46:00.446 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1740176073 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 12:46:00.447 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 12:46:00.447 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 12:46:00.448 [http-nio-28070-exec-8] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 12:46:00.449 [http-nio-28070-exec-8] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 12:46:00.449 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 12:46:00.451 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63877261]
2026-01-26 12:46:11.922 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 12:46:11.922 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ee36326] was not registered for synchronization because synchronization is not active
2026-01-26 12:46:11.924 [http-nio-28070-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1367885893 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 12:46:11.924 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 12:46:11.924 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 12:46:11.926 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 12:46:11.926 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 12:46:11.928 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 12:46:11.931 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ee36326]
2026-01-26 12:46:57.188 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 12:46:57.189 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72179562] was not registered for synchronization because synchronization is not active
2026-01-26 12:46:57.189 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1561038951 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 12:46:57.190 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 12:46:57.192 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 12:46:57.195 [http-nio-28070-exec-3] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 12:46:57.200 [http-nio-28070-exec-3] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 12:46:57.202 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 12:46:57.204 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72179562]
2026-01-26 12:49:08.465 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 12:49:08.465 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22ba785a] was not registered for synchronization because synchronization is not active
2026-01-26 12:49:08.467 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1268705517 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 12:49:08.467 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 12:49:08.467 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 12:49:08.468 [http-nio-28070-exec-8] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 12:49:08.469 [http-nio-28070-exec-8] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 12:49:08.469 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 12:49:08.471 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22ba785a]
2026-01-26 12:50:20.751 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 12:50:20.751 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2045c27b] was not registered for synchronization because synchronization is not active
2026-01-26 12:50:20.752 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1917886391 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 12:50:20.752 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 12:50:20.752 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 12:50:20.753 [http-nio-28070-exec-3] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 12:50:20.753 [http-nio-28070-exec-3] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 12:50:20.754 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 12:50:20.756 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2045c27b]
2026-01-26 12:50:28.891 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 12:50:28.891 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23d5583b] was not registered for synchronization because synchronization is not active
2026-01-26 12:50:28.892 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@669698201 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 12:50:28.892 [http-nio-28070-exec-4] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 12:50:28.892 [http-nio-28070-exec-4] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 12:50:28.893 [http-nio-28070-exec-4] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 12:50:28.893 [http-nio-28070-exec-4] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 12:50:28.895 [http-nio-28070-exec-4] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 12:50:28.898 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23d5583b]
2026-01-26 12:53:40.528 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 12:53:40.529 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d3d820f] was not registered for synchronization because synchronization is not active
2026-01-26 12:53:40.530 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1761745776 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 12:53:40.531 [http-nio-28070-exec-10] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 12:53:40.531 [http-nio-28070-exec-10] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 12:53:40.532 [http-nio-28070-exec-10] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 12:53:40.533 [http-nio-28070-exec-10] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 12:53:40.535 [http-nio-28070-exec-10] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 12:53:40.538 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d3d820f]
2026-01-26 12:56:43.502 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 12:56:43.502 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ddfa850] was not registered for synchronization because synchronization is not active
2026-01-26 12:56:43.504 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2048285223 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 12:56:43.504 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 12:56:43.504 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 12:56:43.505 [http-nio-28070-exec-7] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 12:56:43.506 [http-nio-28070-exec-7] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 12:56:43.507 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 12:56:43.510 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ddfa850]
2026-01-26 12:58:34.403 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 12:58:34.403 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21c39da0] was not registered for synchronization because synchronization is not active
2026-01-26 12:58:34.404 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@724202889 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 12:58:34.405 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 12:58:34.405 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 12:58:34.406 [http-nio-28070-exec-6] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 12:58:34.407 [http-nio-28070-exec-6] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 12:58:34.408 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 12:58:34.410 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21c39da0]
2026-01-26 12:59:59.671 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 12:59:59.671 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d29f85] was not registered for synchronization because synchronization is not active
2026-01-26 12:59:59.672 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@857493892 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 12:59:59.672 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 12:59:59.673 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 12:59:59.674 [http-nio-28070-exec-8] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 12:59:59.674 [http-nio-28070-exec-8] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 12:59:59.675 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 12:59:59.677 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d29f85]
2026-01-26 13:02:20.220 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:02:20.220 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70369496] was not registered for synchronization because synchronization is not active
2026-01-26 13:02:20.221 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1975728029 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 13:02:20.221 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:02:20.221 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:02:20.223 [http-nio-28070-exec-6] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:02:20.223 [http-nio-28070-exec-6] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:02:20.225 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:02:20.226 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70369496]
2026-01-26 13:02:36.521 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:02:36.521 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@177cd570] was not registered for synchronization because synchronization is not active
2026-01-26 13:02:36.522 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@961307439 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 13:02:36.528 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:02:36.529 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:02:36.530 [http-nio-28070-exec-7] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:02:36.531 [http-nio-28070-exec-7] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:02:36.531 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:02:36.533 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@177cd570]
2026-01-26 13:04:49.360 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:04:49.362 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@756c1a6a] was not registered for synchronization because synchronization is not active
2026-01-26 13:04:49.367 [http-nio-28070-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1850556702 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 13:04:49.367 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:04:49.373 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:04:49.379 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:04:49.380 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:04:49.380 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:04:49.389 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@756c1a6a]
2026-01-26 13:05:39.292 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:05:39.292 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e211b3] was not registered for synchronization because synchronization is not active
2026-01-26 13:05:39.293 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1306369111 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 13:05:39.293 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:05:39.300 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:05:39.302 [http-nio-28070-exec-5] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:05:39.302 [http-nio-28070-exec-5] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:05:39.303 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:05:39.305 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e211b3]
2026-01-26 13:06:18.577 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:06:18.577 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1585ad5b] was not registered for synchronization because synchronization is not active
2026-01-26 13:06:18.578 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1326113247 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 13:06:18.578 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:06:18.578 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:06:18.579 [http-nio-28070-exec-7] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:06:18.579 [http-nio-28070-exec-7] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:06:18.595 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:06:18.597 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1585ad5b]
2026-01-26 13:09:43.809 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:09:43.809 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7268f86b] was not registered for synchronization because synchronization is not active
2026-01-26 13:09:43.811 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1572314225 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 13:09:43.811 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:09:43.812 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:09:43.813 [http-nio-28070-exec-3] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:09:43.814 [http-nio-28070-exec-3] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:09:43.815 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:09:43.817 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7268f86b]
2026-01-26 13:12:41.467 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:12:41.467 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dc119bd] was not registered for synchronization because synchronization is not active
2026-01-26 13:12:41.468 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1303038715 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 13:12:41.468 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:12:41.469 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:12:41.470 [http-nio-28070-exec-7] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:12:41.470 [http-nio-28070-exec-7] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:12:41.471 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:12:41.473 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dc119bd]
2026-01-26 13:13:23.671 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:13:23.671 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6998146] was not registered for synchronization because synchronization is not active
2026-01-26 13:13:23.672 [http-nio-28070-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@708566892 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 13:13:23.673 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:13:23.673 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:13:23.674 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:13:23.674 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:13:23.675 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:13:23.676 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6998146]
2026-01-26 13:14:21.948 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:14:21.948 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78d457e5] was not registered for synchronization because synchronization is not active
2026-01-26 13:14:21.949 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@955984046 wrapping org.postgresql.jdbc.PgConnection@25591522] will not be managed by Spring
2026-01-26 13:14:21.949 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:14:21.949 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:14:21.950 [http-nio-28070-exec-7] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:14:21.951 [http-nio-28070-exec-7] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:14:21.951 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:14:21.954 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78d457e5]
2026-01-26 13:16:47.848 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:16:47.848 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7332b28e] was not registered for synchronization because synchronization is not active
2026-01-26 13:16:47.850 [http-nio-28070-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@276255181 wrapping org.postgresql.jdbc.PgConnection@3269e794] will not be managed by Spring
2026-01-26 13:16:47.850 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:16:47.850 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:16:47.870 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:16:47.870 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:16:47.872 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:16:47.874 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7332b28e]
2026-01-26 13:35:25.401 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:35:25.404 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e417a55] was not registered for synchronization because synchronization is not active
2026-01-26 13:35:25.412 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@437514446 wrapping org.postgresql.jdbc.PgConnection@3269e794] will not be managed by Spring
2026-01-26 13:35:25.413 [http-nio-28070-exec-10] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:35:25.415 [http-nio-28070-exec-10] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:35:25.420 [http-nio-28070-exec-10] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:35:25.420 [http-nio-28070-exec-10] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:35:25.423 [http-nio-28070-exec-10] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:35:25.428 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e417a55]
2026-01-26 13:35:55.991 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:35:55.991 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@584708b] was not registered for synchronization because synchronization is not active
2026-01-26 13:35:55.992 [http-nio-28070-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@332654103 wrapping org.postgresql.jdbc.PgConnection@3269e794] will not be managed by Spring
2026-01-26 13:35:55.992 [http-nio-28070-exec-1] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:35:55.993 [http-nio-28070-exec-1] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:35:55.995 [http-nio-28070-exec-1] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:35:55.995 [http-nio-28070-exec-1] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:35:55.995 [http-nio-28070-exec-1] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:35:55.996 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@584708b]
2026-01-26 13:36:41.572 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:36:41.573 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72a87cf1] was not registered for synchronization because synchronization is not active
2026-01-26 13:36:41.574 [http-nio-28070-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@342365928 wrapping org.postgresql.jdbc.PgConnection@3269e794] will not be managed by Spring
2026-01-26 13:36:41.574 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:36:41.574 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:36:41.575 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:36:41.576 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:36:41.576 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:36:41.577 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72a87cf1]
2026-01-26 13:38:34.062 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:38:34.062 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8df1b88] was not registered for synchronization because synchronization is not active
2026-01-26 13:38:34.063 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@966636372 wrapping org.postgresql.jdbc.PgConnection@3269e794] will not be managed by Spring
2026-01-26 13:38:34.063 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:38:34.064 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:38:34.065 [http-nio-28070-exec-5] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:38:34.065 [http-nio-28070-exec-5] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:38:34.066 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:38:34.069 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8df1b88]
2026-01-26 13:39:54.140 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:39:54.140 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d08a18] was not registered for synchronization because synchronization is not active
2026-01-26 13:39:54.148 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@808335542 wrapping org.postgresql.jdbc.PgConnection@3269e794] will not be managed by Spring
2026-01-26 13:39:54.148 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:39:54.149 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 13:39:54.150 [http-nio-28070-exec-6] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:39:54.153 [http-nio-28070-exec-6] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:39:54.153 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 13:39:54.155 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d08a18]
2026-01-26 13:40:33.382 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:40:33.382 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f40876c] was not registered for synchronization because synchronization is not active
2026-01-26 13:40:33.384 [http-nio-28070-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@77467274 wrapping org.postgresql.jdbc.PgConnection@3269e794] will not be managed by Spring
2026-01-26 13:40:33.384 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:40:33.385 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 12334(String)
2026-01-26 13:40:33.386 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 0
2026-01-26 13:40:33.388 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f40876c]
2026-01-26 13:57:15.876 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 13:57:15.876 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d9ad026] was not registered for synchronization because synchronization is not active
2026-01-26 13:57:15.877 [http-nio-28070-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@500739750 wrapping org.postgresql.jdbc.PgConnection@3134e17e] will not be managed by Spring
2026-01-26 13:57:15.877 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 13:57:15.878 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 13:57:15.893 [http-nio-28070-exec-2] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 13:57:15.893 [http-nio-28070-exec-2] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 13:57:15.894 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 13:57:15.896 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d9ad026]
2026-01-26 14:02:23.719 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:02:23.720 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6065d99] was not registered for synchronization because synchronization is not active
2026-01-26 14:02:23.723 [http-nio-28070-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1206742370 wrapping org.postgresql.jdbc.PgConnection@3134e17e] will not be managed by Spring
2026-01-26 14:02:23.723 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 14:02:23.723 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 14:02:23.725 [http-nio-28070-exec-9] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 14:02:23.725 [http-nio-28070-exec-9] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 14:02:23.727 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 14:02:23.731 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6065d99]
2026-01-26 14:11:01.255 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:11:01.255 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71630d2a] was not registered for synchronization because synchronization is not active
2026-01-26 14:11:01.256 [http-nio-28070-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1826345758 wrapping org.postgresql.jdbc.PgConnection@3134e17e] will not be managed by Spring
2026-01-26 14:11:01.257 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 14:11:01.257 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 14:11:01.258 [http-nio-28070-exec-9] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 14:11:01.259 [http-nio-28070-exec-9] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 14:11:01.260 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 14:11:01.263 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71630d2a]
2026-01-26 14:23:51.018 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:23:51.020 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ebd24]
2026-01-26 14:23:51.030 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1956600281 wrapping org.postgresql.jdbc.PgConnection@5c22d2bd] will be managed by Spring
2026-01-26 14:23:51.030 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:23:51.038 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-9560637d(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T14:23:50.891301900(LocalDateTime), null, 2026-01-26T14:23:50.892298300(LocalDateTime), null, null
2026-01-26 14:23:51.082 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 14:23:51.097 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ebd24]
2026-01-26 14:23:51.099 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ebd24]
2026-01-26 14:23:51.100 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ebd24]
2026-01-26 14:23:51.102 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ebd24]
2026-01-26 14:23:51.172 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:23:51.172 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63e9c9b1]
2026-01-26 14:23:51.172 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@317281676 wrapping org.postgresql.jdbc.PgConnection@5c22d2bd] will be managed by Spring
2026-01-26 14:23:51.173 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:23:51.174 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-9560637d(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T14:23:51.171604200(LocalDateTime), null
2026-01-26 14:23:51.190 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:23:51.194 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63e9c9b1]
2026-01-26 14:23:51.194 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63e9c9b1]
2026-01-26 14:23:51.194 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63e9c9b1]
2026-01-26 14:23:51.194 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63e9c9b1]
2026-01-26 14:23:51.441 [clientInboundChannel-31] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:23:51.441 [clientInboundChannel-31] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd30602]
2026-01-26 14:23:51.442 [clientInboundChannel-31] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1549814996 wrapping org.postgresql.jdbc.PgConnection@5c22d2bd] will be managed by Spring
2026-01-26 14:23:51.442 [clientInboundChannel-31] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:23:51.443 [clientInboundChannel-31] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-9560637d(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T14:23:51.440465500(LocalDateTime), null
2026-01-26 14:23:51.445 [clientInboundChannel-31] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:23:51.449 [clientInboundChannel-31] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd30602]
2026-01-26 14:23:51.450 [clientInboundChannel-31] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd30602]
2026-01-26 14:23:51.450 [clientInboundChannel-31] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd30602]
2026-01-26 14:23:51.450 [clientInboundChannel-31] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd30602]
2026-01-26 14:23:51.451 [clientInboundChannel-31] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:23:51.452 [clientInboundChannel-31] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@524bb2ec]
2026-01-26 14:23:51.452 [clientInboundChannel-31] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@22576315 wrapping org.postgresql.jdbc.PgConnection@5c22d2bd] will be managed by Spring
2026-01-26 14:23:51.453 [clientInboundChannel-31] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:23:51.453 [clientInboundChannel-31] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:23:51.451436(LocalDateTime), room-9560637d(String)
2026-01-26 14:23:51.463 [clientInboundChannel-31] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:23:51.465 [clientInboundChannel-31] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@524bb2ec]
2026-01-26 14:23:51.465 [clientInboundChannel-31] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@524bb2ec]
2026-01-26 14:23:51.465 [clientInboundChannel-31] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@524bb2ec]
2026-01-26 14:23:51.466 [clientInboundChannel-31] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@524bb2ec]
2026-01-26 14:32:07.175 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:32:07.181 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ffba21]
2026-01-26 14:32:07.181 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1845577177 wrapping org.postgresql.jdbc.PgConnection@5c22d2bd] will be managed by Spring
2026-01-26 14:32:07.182 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:32:07.183 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-885162ab(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T14:32:07.174486900(LocalDateTime), null, 2026-01-26T14:32:07.174486900(LocalDateTime), null, null
2026-01-26 14:32:07.185 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 14:32:07.189 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ffba21]
2026-01-26 14:32:07.189 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ffba21]
2026-01-26 14:32:07.190 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ffba21]
2026-01-26 14:32:07.190 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ffba21]
2026-01-26 14:32:07.194 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:32:07.194 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1b2ee5]
2026-01-26 14:32:07.194 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@126328733 wrapping org.postgresql.jdbc.PgConnection@5c22d2bd] will be managed by Spring
2026-01-26 14:32:07.194 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:32:07.195 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-885162ab(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T14:32:07.194221400(LocalDateTime), null
2026-01-26 14:32:07.197 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:32:07.200 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1b2ee5]
2026-01-26 14:32:07.201 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1b2ee5]
2026-01-26 14:32:07.201 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1b2ee5]
2026-01-26 14:32:07.201 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1b2ee5]
2026-01-26 14:32:07.301 [clientInboundChannel-43] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:32:07.302 [clientInboundChannel-43] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@509ca7f5]
2026-01-26 14:32:07.302 [clientInboundChannel-43] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1516555397 wrapping org.postgresql.jdbc.PgConnection@5c22d2bd] will be managed by Spring
2026-01-26 14:32:07.302 [clientInboundChannel-43] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:32:07.304 [clientInboundChannel-43] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-885162ab(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T14:32:07.301470100(LocalDateTime), null
2026-01-26 14:32:07.308 [clientInboundChannel-43] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:32:07.311 [clientInboundChannel-43] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@509ca7f5]
2026-01-26 14:32:07.311 [clientInboundChannel-43] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@509ca7f5]
2026-01-26 14:32:07.311 [clientInboundChannel-43] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@509ca7f5]
2026-01-26 14:32:07.311 [clientInboundChannel-43] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@509ca7f5]
2026-01-26 14:32:07.312 [clientInboundChannel-43] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:32:07.312 [clientInboundChannel-43] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a70e6bb]
2026-01-26 14:32:07.313 [clientInboundChannel-43] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1380918839 wrapping org.postgresql.jdbc.PgConnection@5c22d2bd] will be managed by Spring
2026-01-26 14:32:07.313 [clientInboundChannel-43] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:32:07.313 [clientInboundChannel-43] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:32:07.312439200(LocalDateTime), room-885162ab(String)
2026-01-26 14:32:07.314 [clientInboundChannel-43] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:32:07.318 [clientInboundChannel-43] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a70e6bb]
2026-01-26 14:32:07.319 [clientInboundChannel-43] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a70e6bb]
2026-01-26 14:32:07.319 [clientInboundChannel-43] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a70e6bb]
2026-01-26 14:32:07.319 [clientInboundChannel-43] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a70e6bb]
2026-01-26 14:33:59.513 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:33:59.520 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105c51ac]
2026-01-26 14:33:59.520 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1343020092 wrapping org.postgresql.jdbc.PgConnection@5c22d2bd] will be managed by Spring
2026-01-26 14:33:59.520 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:33:59.527 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-ea233eac(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T14:33:59.512378300(LocalDateTime), null, 2026-01-26T14:33:59.512378300(LocalDateTime), null, null
2026-01-26 14:33:59.528 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 14:33:59.533 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105c51ac]
2026-01-26 14:33:59.533 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105c51ac]
2026-01-26 14:33:59.533 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105c51ac]
2026-01-26 14:33:59.533 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105c51ac]
2026-01-26 14:33:59.537 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:33:59.537 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fe49d02]
2026-01-26 14:33:59.537 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1389302751 wrapping org.postgresql.jdbc.PgConnection@5c22d2bd] will be managed by Spring
2026-01-26 14:33:59.537 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:33:59.538 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-ea233eac(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T14:33:59.536242900(LocalDateTime), null
2026-01-26 14:33:59.551 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:33:59.553 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fe49d02]
2026-01-26 14:33:59.553 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fe49d02]
2026-01-26 14:33:59.553 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fe49d02]
2026-01-26 14:33:59.553 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fe49d02]
2026-01-26 14:43:48.487 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:43:48.487 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af82d1b]
2026-01-26 14:43:48.487 [clientInboundChannel-46] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@268453483 wrapping org.postgresql.jdbc.PgConnection@5502da0f] will be managed by Spring
2026-01-26 14:43:48.487 [clientInboundChannel-46] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:43:48.488 [clientInboundChannel-46] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-885162ab(String), cust01(String), 홍길철(String), CUSTOMER(String), A(String), TALK(String), apt001(String), 2026-01-26T14:43:48.481627900(LocalDateTime), null
2026-01-26 14:43:48.501 [clientInboundChannel-46] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:43:48.503 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af82d1b]
2026-01-26 14:43:48.504 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af82d1b]
2026-01-26 14:43:48.504 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af82d1b]
2026-01-26 14:43:48.504 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af82d1b]
2026-01-26 14:43:48.507 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:43:48.507 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@763c4b2a]
2026-01-26 14:43:48.507 [clientInboundChannel-46] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1980624137 wrapping org.postgresql.jdbc.PgConnection@5502da0f] will be managed by Spring
2026-01-26 14:43:48.507 [clientInboundChannel-46] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:43:48.508 [clientInboundChannel-46] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:43:48.506560400(LocalDateTime), room-885162ab(String)
2026-01-26 14:43:48.520 [clientInboundChannel-46] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:43:48.522 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@763c4b2a]
2026-01-26 14:43:48.522 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@763c4b2a]
2026-01-26 14:43:48.522 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@763c4b2a]
2026-01-26 14:43:48.522 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@763c4b2a]
2026-01-26 14:43:49.289 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:43:49.289 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ceeabdb]
2026-01-26 14:43:49.289 [reactor-http-nio-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@421257209 wrapping org.postgresql.jdbc.PgConnection@5502da0f] will be managed by Spring
2026-01-26 14:43:49.289 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:43:49.290 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-885162ab(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T14:43:49.288555600(LocalDateTime), null
2026-01-26 14:43:49.292 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:43:49.295 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ceeabdb]
2026-01-26 14:43:49.295 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ceeabdb]
2026-01-26 14:43:49.295 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ceeabdb]
2026-01-26 14:43:49.295 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ceeabdb]
2026-01-26 14:43:49.296 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:43:49.296 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58bdea01]
2026-01-26 14:43:49.296 [reactor-http-nio-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2136714706 wrapping org.postgresql.jdbc.PgConnection@5502da0f] will be managed by Spring
2026-01-26 14:43:49.296 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:43:49.297 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:43:49.296534700(LocalDateTime), room-885162ab(String)
2026-01-26 14:43:49.298 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:43:49.300 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58bdea01]
2026-01-26 14:43:49.300 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58bdea01]
2026-01-26 14:43:49.300 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58bdea01]
2026-01-26 14:43:49.300 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58bdea01]
2026-01-26 14:46:29.585 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:46:29.586 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20b130f6]
2026-01-26 14:46:29.586 [http-nio-28070-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@51668678 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:46:29.586 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:46:29.587 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-bfdad172(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T14:46:29.585038800(LocalDateTime), null, 2026-01-26T14:46:29.585038800(LocalDateTime), null, null
2026-01-26 14:46:29.593 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 14:46:29.597 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20b130f6]
2026-01-26 14:46:29.597 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20b130f6]
2026-01-26 14:46:29.597 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20b130f6]
2026-01-26 14:46:29.597 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20b130f6]
2026-01-26 14:46:29.601 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:46:29.601 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75075a8f]
2026-01-26 14:46:29.602 [http-nio-28070-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@316959416 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:46:29.602 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:46:29.603 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-bfdad172(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T14:46:29.601013700(LocalDateTime), null
2026-01-26 14:46:29.605 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:46:29.612 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75075a8f]
2026-01-26 14:46:29.612 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75075a8f]
2026-01-26 14:46:29.612 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75075a8f]
2026-01-26 14:46:29.612 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75075a8f]
2026-01-26 14:46:56.932 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:46:56.932 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f5e57b8]
2026-01-26 14:46:56.932 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@437112040 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:46:56.932 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:46:56.933 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-b2f53213(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T14:46:56.931668900(LocalDateTime), null, 2026-01-26T14:46:56.931668900(LocalDateTime), null, null
2026-01-26 14:46:56.935 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 14:46:56.940 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f5e57b8]
2026-01-26 14:46:56.940 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f5e57b8]
2026-01-26 14:46:56.940 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f5e57b8]
2026-01-26 14:46:56.940 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f5e57b8]
2026-01-26 14:46:56.943 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:46:56.943 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355cfbe5]
2026-01-26 14:46:56.944 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1501775161 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:46:56.944 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:46:56.945 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b2f53213(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T14:46:56.943636700(LocalDateTime), null
2026-01-26 14:46:56.946 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:46:56.948 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355cfbe5]
2026-01-26 14:46:56.948 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355cfbe5]
2026-01-26 14:46:56.948 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355cfbe5]
2026-01-26 14:46:56.948 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355cfbe5]
2026-01-26 14:49:38.589 [clientInboundChannel-49] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:38.589 [clientInboundChannel-49] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d6a060]
2026-01-26 14:49:38.589 [clientInboundChannel-49] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1664011024 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:38.590 [clientInboundChannel-49] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:49:38.590 [clientInboundChannel-49] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-885162ab(String), cust01(String), 홍길철(String), CUSTOMER(String), A(String), TALK(String), apt001(String), 2026-01-26T14:49:38.587017600(LocalDateTime), null
2026-01-26 14:49:38.592 [clientInboundChannel-49] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:49:38.594 [clientInboundChannel-49] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d6a060]
2026-01-26 14:49:38.594 [clientInboundChannel-49] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d6a060]
2026-01-26 14:49:38.595 [clientInboundChannel-49] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d6a060]
2026-01-26 14:49:38.595 [clientInboundChannel-49] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d6a060]
2026-01-26 14:49:38.595 [clientInboundChannel-49] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:38.596 [clientInboundChannel-49] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aa53814]
2026-01-26 14:49:38.596 [clientInboundChannel-49] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@35849162 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:38.596 [clientInboundChannel-49] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:49:38.596 [clientInboundChannel-49] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:49:38.595994400(LocalDateTime), room-885162ab(String)
2026-01-26 14:49:38.618 [clientInboundChannel-49] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:49:38.619 [clientInboundChannel-49] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aa53814]
2026-01-26 14:49:38.620 [clientInboundChannel-49] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aa53814]
2026-01-26 14:49:38.620 [clientInboundChannel-49] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aa53814]
2026-01-26 14:49:38.620 [clientInboundChannel-49] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aa53814]
2026-01-26 14:49:38.639 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:38.639 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4783e8d1]
2026-01-26 14:49:38.640 [reactor-http-nio-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1791600322 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:38.641 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:49:38.642 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-885162ab(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T14:49:38.639407600(LocalDateTime), null
2026-01-26 14:49:38.644 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:49:38.650 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4783e8d1]
2026-01-26 14:49:38.651 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4783e8d1]
2026-01-26 14:49:38.651 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4783e8d1]
2026-01-26 14:49:38.651 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4783e8d1]
2026-01-26 14:49:38.652 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:38.652 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37e0f5fa]
2026-01-26 14:49:38.653 [reactor-http-nio-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1377844158 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:38.653 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:49:38.654 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:49:38.652375700(LocalDateTime), room-885162ab(String)
2026-01-26 14:49:38.655 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:49:38.657 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37e0f5fa]
2026-01-26 14:49:38.657 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37e0f5fa]
2026-01-26 14:49:38.657 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37e0f5fa]
2026-01-26 14:49:38.657 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37e0f5fa]
2026-01-26 14:49:49.699 [clientInboundChannel-52] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:49.699 [clientInboundChannel-52] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@595e118b]
2026-01-26 14:49:49.700 [clientInboundChannel-52] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@388004066 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:49.700 [clientInboundChannel-52] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:49:49.700 [clientInboundChannel-52] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-885162ab(String), cust01(String), 홍길철(String), CUSTOMER(String), A(String), TALK(String), apt001(String), 2026-01-26T14:49:49.698938200(LocalDateTime), null
2026-01-26 14:49:49.702 [clientInboundChannel-52] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:49:49.705 [clientInboundChannel-52] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@595e118b]
2026-01-26 14:49:49.706 [clientInboundChannel-52] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@595e118b]
2026-01-26 14:49:49.706 [clientInboundChannel-52] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@595e118b]
2026-01-26 14:49:49.706 [clientInboundChannel-52] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@595e118b]
2026-01-26 14:49:49.707 [clientInboundChannel-52] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:49.707 [clientInboundChannel-52] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59c144ac]
2026-01-26 14:49:49.708 [clientInboundChannel-52] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@747043174 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:49.708 [clientInboundChannel-52] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:49:49.708 [clientInboundChannel-52] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:49:49.707913200(LocalDateTime), room-885162ab(String)
2026-01-26 14:49:49.709 [clientInboundChannel-52] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:49:49.711 [clientInboundChannel-52] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59c144ac]
2026-01-26 14:49:49.711 [clientInboundChannel-52] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59c144ac]
2026-01-26 14:49:49.712 [clientInboundChannel-52] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59c144ac]
2026-01-26 14:49:49.712 [clientInboundChannel-52] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59c144ac]
2026-01-26 14:49:49.732 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:49.732 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10bd2e4a]
2026-01-26 14:49:49.732 [reactor-http-nio-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1761243519 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:49.733 [reactor-http-nio-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:49:49.733 [reactor-http-nio-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-885162ab(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T14:49:49.731857300(LocalDateTime), null
2026-01-26 14:49:49.735 [reactor-http-nio-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:49:49.738 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10bd2e4a]
2026-01-26 14:49:49.738 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10bd2e4a]
2026-01-26 14:49:49.738 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10bd2e4a]
2026-01-26 14:49:49.738 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10bd2e4a]
2026-01-26 14:49:49.739 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:49.740 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e9849cb]
2026-01-26 14:49:49.740 [reactor-http-nio-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1946049488 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:49.740 [reactor-http-nio-5] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:49:49.740 [reactor-http-nio-5] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:49:49.739836(LocalDateTime), room-885162ab(String)
2026-01-26 14:49:49.743 [reactor-http-nio-5] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:49:49.745 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e9849cb]
2026-01-26 14:49:49.745 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e9849cb]
2026-01-26 14:49:49.745 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e9849cb]
2026-01-26 14:49:49.745 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e9849cb]
2026-01-26 14:49:53.862 [clientInboundChannel-55] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:53.862 [clientInboundChannel-55] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a89e578]
2026-01-26 14:49:53.863 [clientInboundChannel-55] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@464842563 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:53.863 [clientInboundChannel-55] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:49:53.863 [clientInboundChannel-55] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-885162ab(String), cust01(String), 홍길철(String), CUSTOMER(String), A(String), TALK(String), apt001(String), 2026-01-26T14:49:53.861796300(LocalDateTime), null
2026-01-26 14:49:53.864 [clientInboundChannel-55] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:49:53.867 [clientInboundChannel-55] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a89e578]
2026-01-26 14:49:53.867 [clientInboundChannel-55] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a89e578]
2026-01-26 14:49:53.867 [clientInboundChannel-55] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a89e578]
2026-01-26 14:49:53.867 [clientInboundChannel-55] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a89e578]
2026-01-26 14:49:53.868 [clientInboundChannel-55] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:53.868 [clientInboundChannel-55] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ae5370a]
2026-01-26 14:49:53.868 [clientInboundChannel-55] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2073759756 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:53.868 [clientInboundChannel-55] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:49:53.869 [clientInboundChannel-55] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:49:53.868777700(LocalDateTime), room-885162ab(String)
2026-01-26 14:49:53.870 [clientInboundChannel-55] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:49:53.871 [clientInboundChannel-55] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ae5370a]
2026-01-26 14:49:53.871 [clientInboundChannel-55] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ae5370a]
2026-01-26 14:49:53.871 [clientInboundChannel-55] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ae5370a]
2026-01-26 14:49:53.871 [clientInboundChannel-55] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ae5370a]
2026-01-26 14:49:53.889 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:53.889 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@145372b2]
2026-01-26 14:49:53.889 [reactor-http-nio-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1828381498 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:53.889 [reactor-http-nio-6] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:49:53.890 [reactor-http-nio-6] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-885162ab(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T14:49:53.888726100(LocalDateTime), null
2026-01-26 14:49:53.891 [reactor-http-nio-6] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:49:53.894 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@145372b2]
2026-01-26 14:49:53.894 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@145372b2]
2026-01-26 14:49:53.894 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@145372b2]
2026-01-26 14:49:53.894 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@145372b2]
2026-01-26 14:49:53.895 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:53.895 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66c75c20]
2026-01-26 14:49:53.895 [reactor-http-nio-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2013147069 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:53.895 [reactor-http-nio-6] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:49:53.896 [reactor-http-nio-6] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:49:53.895707400(LocalDateTime), room-885162ab(String)
2026-01-26 14:49:53.897 [reactor-http-nio-6] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:49:53.898 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66c75c20]
2026-01-26 14:49:53.898 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66c75c20]
2026-01-26 14:49:53.898 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66c75c20]
2026-01-26 14:49:53.898 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66c75c20]
2026-01-26 14:49:59.854 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:59.854 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dbd665a]
2026-01-26 14:49:59.855 [clientInboundChannel-58] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1735168489 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:59.855 [clientInboundChannel-58] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:49:59.855 [clientInboundChannel-58] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-885162ab(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T14:49:59.852712900(LocalDateTime), null
2026-01-26 14:49:59.857 [clientInboundChannel-58] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:49:59.861 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dbd665a]
2026-01-26 14:49:59.861 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dbd665a]
2026-01-26 14:49:59.861 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dbd665a]
2026-01-26 14:49:59.861 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dbd665a]
2026-01-26 14:49:59.861 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:59.863 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf039e4]
2026-01-26 14:49:59.863 [clientInboundChannel-58] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@80796303 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:59.863 [clientInboundChannel-58] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:49:59.864 [clientInboundChannel-58] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:49:59.861690400(LocalDateTime), room-885162ab(String)
2026-01-26 14:49:59.865 [clientInboundChannel-58] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:49:59.866 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf039e4]
2026-01-26 14:49:59.866 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf039e4]
2026-01-26 14:49:59.866 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf039e4]
2026-01-26 14:49:59.866 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf039e4]
2026-01-26 14:49:59.898 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:59.899 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27897cba]
2026-01-26 14:49:59.899 [clientInboundChannel-58] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@761162560 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:59.899 [clientInboundChannel-58] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:49:59.899 [clientInboundChannel-58] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: WAITING(String), room-885162ab(String)
2026-01-26 14:49:59.901 [clientInboundChannel-58] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 14:49:59.902 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27897cba]
2026-01-26 14:49:59.902 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27897cba]
2026-01-26 14:49:59.902 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27897cba]
2026-01-26 14:49:59.904 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27897cba]
2026-01-26 14:49:59.905 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:49:59.905 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a5296cf]
2026-01-26 14:49:59.906 [clientInboundChannel-58] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@531623944 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:49:59.906 [clientInboundChannel-58] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:49:59.907 [clientInboundChannel-58] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-885162ab(String), SYSTEM(String), System(String), SYSTEM(String), 상담원 연결을 요청하였습니다. 상담원이 연결될 때까지 잠시만 기다려 주세요.(String), TALK(String), null, 2026-01-26T14:49:59.905095600(LocalDateTime), null
2026-01-26 14:49:59.909 [clientInboundChannel-58] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:49:59.911 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a5296cf]
2026-01-26 14:49:59.912 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a5296cf]
2026-01-26 14:49:59.912 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a5296cf]
2026-01-26 14:49:59.912 [clientInboundChannel-58] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a5296cf]
2026-01-26 14:50:43.765 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:50:43.765 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6af2216a]
2026-01-26 14:50:43.765 [clientInboundChannel-61] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1611287066 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:50:43.766 [clientInboundChannel-61] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:50:43.766 [clientInboundChannel-61] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-885162ab(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결 요청을 취소합니다.(String), CANCEL_HANDOFF(String), apt001(String), 2026-01-26T14:50:43.764552500(LocalDateTime), null
2026-01-26 14:50:43.769 [clientInboundChannel-61] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:50:43.772 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6af2216a]
2026-01-26 14:50:43.772 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6af2216a]
2026-01-26 14:50:43.772 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6af2216a]
2026-01-26 14:50:43.772 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6af2216a]
2026-01-26 14:50:43.773 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:50:43.773 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e0a44c5]
2026-01-26 14:50:43.774 [clientInboundChannel-61] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@638572718 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:50:43.774 [clientInboundChannel-61] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:50:43.775 [clientInboundChannel-61] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:50:43.773529700(LocalDateTime), room-885162ab(String)
2026-01-26 14:50:43.777 [clientInboundChannel-61] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:50:43.778 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e0a44c5]
2026-01-26 14:50:43.779 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e0a44c5]
2026-01-26 14:50:43.779 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e0a44c5]
2026-01-26 14:50:43.779 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e0a44c5]
2026-01-26 14:50:45.025 [clientInboundChannel-64] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:50:45.026 [clientInboundChannel-64] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e9a6f93]
2026-01-26 14:50:45.026 [clientInboundChannel-64] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1684145379 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:50:45.026 [clientInboundChannel-64] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:50:45.027 [clientInboundChannel-64] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-885162ab(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T14:50:45.025704100(LocalDateTime), null
2026-01-26 14:50:45.029 [clientInboundChannel-64] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:50:45.032 [clientInboundChannel-64] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e9a6f93]
2026-01-26 14:50:45.032 [clientInboundChannel-64] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e9a6f93]
2026-01-26 14:50:45.032 [clientInboundChannel-64] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e9a6f93]
2026-01-26 14:50:45.032 [clientInboundChannel-64] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e9a6f93]
2026-01-26 14:50:45.033 [clientInboundChannel-64] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:50:45.033 [clientInboundChannel-64] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbb9343]
2026-01-26 14:50:45.034 [clientInboundChannel-64] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1681582870 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:50:45.034 [clientInboundChannel-64] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:50:45.034 [clientInboundChannel-64] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:50:45.033682200(LocalDateTime), room-885162ab(String)
2026-01-26 14:50:45.036 [clientInboundChannel-64] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:50:45.037 [clientInboundChannel-64] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbb9343]
2026-01-26 14:50:45.037 [clientInboundChannel-64] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbb9343]
2026-01-26 14:50:45.037 [clientInboundChannel-64] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbb9343]
2026-01-26 14:50:45.037 [clientInboundChannel-64] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbb9343]
2026-01-26 14:51:10.987 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:51:10.987 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75eb54fa]
2026-01-26 14:51:10.987 [http-nio-28070-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@738968380 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:51:10.988 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:51:10.988 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-e3fa6f2a(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T14:51:10.986092800(LocalDateTime), null, 2026-01-26T14:51:10.986092800(LocalDateTime), null, null
2026-01-26 14:51:10.990 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 14:51:10.993 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75eb54fa]
2026-01-26 14:51:10.993 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75eb54fa]
2026-01-26 14:51:10.993 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75eb54fa]
2026-01-26 14:51:10.993 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75eb54fa]
2026-01-26 14:51:10.997 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:51:10.997 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8a28e7]
2026-01-26 14:51:10.997 [http-nio-28070-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@63250635 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:51:10.998 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:51:10.999 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-e3fa6f2a(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T14:51:10.996060600(LocalDateTime), null
2026-01-26 14:51:11.000 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:51:11.002 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8a28e7]
2026-01-26 14:51:11.003 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8a28e7]
2026-01-26 14:51:11.003 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8a28e7]
2026-01-26 14:51:11.003 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8a28e7]
2026-01-26 14:51:11.091 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:51:11.091 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0bb080]
2026-01-26 14:51:11.091 [clientInboundChannel-61] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@862322465 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:51:11.091 [clientInboundChannel-61] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:51:11.092 [clientInboundChannel-61] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-e3fa6f2a(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T14:51:11.090454300(LocalDateTime), null
2026-01-26 14:51:11.093 [clientInboundChannel-61] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:51:11.095 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0bb080]
2026-01-26 14:51:11.095 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0bb080]
2026-01-26 14:51:11.095 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0bb080]
2026-01-26 14:51:11.096 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0bb080]
2026-01-26 14:51:11.099 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:51:11.099 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7849cbaa]
2026-01-26 14:51:11.100 [clientInboundChannel-61] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1834779462 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:51:11.100 [clientInboundChannel-61] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:51:11.100 [clientInboundChannel-61] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:51:11.099428(LocalDateTime), room-e3fa6f2a(String)
2026-01-26 14:51:11.102 [clientInboundChannel-61] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:51:11.105 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7849cbaa]
2026-01-26 14:51:11.105 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7849cbaa]
2026-01-26 14:51:11.105 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7849cbaa]
2026-01-26 14:51:11.105 [clientInboundChannel-61] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7849cbaa]
2026-01-26 14:51:17.135 [clientInboundChannel-66] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:51:17.135 [clientInboundChannel-66] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@235b5b2b]
2026-01-26 14:51:17.136 [clientInboundChannel-66] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@698560603 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:51:17.136 [clientInboundChannel-66] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:51:17.136 [clientInboundChannel-66] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-e3fa6f2a(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T14:51:17.134248600(LocalDateTime), null
2026-01-26 14:51:17.137 [clientInboundChannel-66] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:51:17.139 [clientInboundChannel-66] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@235b5b2b]
2026-01-26 14:51:17.140 [clientInboundChannel-66] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@235b5b2b]
2026-01-26 14:51:17.140 [clientInboundChannel-66] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@235b5b2b]
2026-01-26 14:51:17.140 [clientInboundChannel-66] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@235b5b2b]
2026-01-26 14:51:17.141 [clientInboundChannel-66] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:51:17.141 [clientInboundChannel-66] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@155a37b7]
2026-01-26 14:51:17.141 [clientInboundChannel-66] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1219313133 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:51:17.141 [clientInboundChannel-66] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:51:17.142 [clientInboundChannel-66] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:51:17.140233400(LocalDateTime), room-e3fa6f2a(String)
2026-01-26 14:51:17.142 [clientInboundChannel-66] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:51:17.143 [clientInboundChannel-66] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@155a37b7]
2026-01-26 14:51:17.143 [clientInboundChannel-66] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@155a37b7]
2026-01-26 14:51:17.144 [clientInboundChannel-66] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@155a37b7]
2026-01-26 14:51:17.144 [clientInboundChannel-66] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@155a37b7]
2026-01-26 14:52:17.485 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:52:17.486 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf89a47]
2026-01-26 14:52:17.486 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@387355969 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:52:17.486 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:52:17.487 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-1761b5eb(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T14:52:17.485824100(LocalDateTime), null, 2026-01-26T14:52:17.485824100(LocalDateTime), null, null
2026-01-26 14:52:17.488 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 14:52:17.490 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf89a47]
2026-01-26 14:52:17.491 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf89a47]
2026-01-26 14:52:17.491 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf89a47]
2026-01-26 14:52:17.491 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf89a47]
2026-01-26 14:52:17.494 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:52:17.494 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21e57aa0]
2026-01-26 14:52:17.494 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@301950480 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:52:17.494 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:52:17.495 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-1761b5eb(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T14:52:17.494797(LocalDateTime), null
2026-01-26 14:52:17.496 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:52:17.498 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21e57aa0]
2026-01-26 14:52:17.499 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21e57aa0]
2026-01-26 14:52:17.499 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21e57aa0]
2026-01-26 14:52:17.499 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21e57aa0]
2026-01-26 14:52:17.645 [clientInboundChannel-78] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:52:17.646 [clientInboundChannel-78] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da3444c]
2026-01-26 14:52:17.646 [clientInboundChannel-78] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1465593660 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:52:17.646 [clientInboundChannel-78] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:52:17.647 [clientInboundChannel-78] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-1761b5eb(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T14:52:17.645088800(LocalDateTime), null
2026-01-26 14:52:17.649 [clientInboundChannel-78] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:52:17.651 [clientInboundChannel-78] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da3444c]
2026-01-26 14:52:17.652 [clientInboundChannel-78] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da3444c]
2026-01-26 14:52:17.652 [clientInboundChannel-78] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da3444c]
2026-01-26 14:52:17.652 [clientInboundChannel-78] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da3444c]
2026-01-26 14:52:17.653 [clientInboundChannel-78] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:52:17.654 [clientInboundChannel-78] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dad66c9]
2026-01-26 14:52:17.654 [clientInboundChannel-78] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1595981230 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:52:17.654 [clientInboundChannel-78] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:52:17.655 [clientInboundChannel-78] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:52:17.653072800(LocalDateTime), room-1761b5eb(String)
2026-01-26 14:52:17.656 [clientInboundChannel-78] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:52:17.657 [clientInboundChannel-78] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dad66c9]
2026-01-26 14:52:17.657 [clientInboundChannel-78] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dad66c9]
2026-01-26 14:52:17.658 [clientInboundChannel-78] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dad66c9]
2026-01-26 14:52:17.658 [clientInboundChannel-78] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dad66c9]
2026-01-26 14:52:30.408 [clientInboundChannel-81] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:52:30.408 [clientInboundChannel-81] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ca0c6c3]
2026-01-26 14:52:30.408 [clientInboundChannel-81] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@374910387 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:52:30.409 [clientInboundChannel-81] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 14:52:30.414 [clientInboundChannel-81] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-1761b5eb(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T14:52:30.406661700(LocalDateTime), null
2026-01-26 14:52:30.415 [clientInboundChannel-81] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 14:52:30.417 [clientInboundChannel-81] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ca0c6c3]
2026-01-26 14:52:30.417 [clientInboundChannel-81] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ca0c6c3]
2026-01-26 14:52:30.417 [clientInboundChannel-81] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ca0c6c3]
2026-01-26 14:52:30.417 [clientInboundChannel-81] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ca0c6c3]
2026-01-26 14:52:30.418 [clientInboundChannel-81] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 14:52:30.419 [clientInboundChannel-81] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4956636a]
2026-01-26 14:52:30.419 [clientInboundChannel-81] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@832916410 wrapping org.postgresql.jdbc.PgConnection@5b53c138] will be managed by Spring
2026-01-26 14:52:30.419 [clientInboundChannel-81] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 14:52:30.420 [clientInboundChannel-81] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T14:52:30.418016900(LocalDateTime), room-1761b5eb(String)
2026-01-26 14:52:30.420 [clientInboundChannel-81] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 14:52:30.421 [clientInboundChannel-81] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4956636a]
2026-01-26 14:52:30.422 [clientInboundChannel-81] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4956636a]
2026-01-26 14:52:30.422 [clientInboundChannel-81] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4956636a]
2026-01-26 14:52:30.422 [clientInboundChannel-81] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4956636a]
2026-01-26 15:12:23.048 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:12:23.050 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7bd346]
2026-01-26 15:12:23.051 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1783247978 wrapping org.postgresql.jdbc.PgConnection@56265f4] will be managed by Spring
2026-01-26 15:12:23.052 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:12:23.054 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-3088d5dd(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T15:12:23.037500100(LocalDateTime), null, 2026-01-26T15:12:23.037500100(LocalDateTime), null, null
2026-01-26 15:12:23.063 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 15:12:23.106 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7bd346]
2026-01-26 15:12:23.106 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7bd346]
2026-01-26 15:12:23.106 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7bd346]
2026-01-26 15:12:23.106 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7bd346]
2026-01-26 15:12:23.114 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:12:23.114 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ce4c27f]
2026-01-26 15:12:23.115 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1850268148 wrapping org.postgresql.jdbc.PgConnection@56265f4] will be managed by Spring
2026-01-26 15:12:23.115 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:12:23.116 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-3088d5dd(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T15:12:23.113168800(LocalDateTime), null
2026-01-26 15:12:23.119 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:12:23.122 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ce4c27f]
2026-01-26 15:12:23.122 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ce4c27f]
2026-01-26 15:12:23.122 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ce4c27f]
2026-01-26 15:12:23.122 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ce4c27f]
2026-01-26 15:12:23.234 [clientInboundChannel-94] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:12:23.234 [clientInboundChannel-94] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fbb06ad]
2026-01-26 15:12:23.235 [clientInboundChannel-94] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1162046941 wrapping org.postgresql.jdbc.PgConnection@56265f4] will be managed by Spring
2026-01-26 15:12:23.235 [clientInboundChannel-94] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:12:23.236 [clientInboundChannel-94] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-3088d5dd(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T15:12:23.234377700(LocalDateTime), null
2026-01-26 15:12:23.237 [clientInboundChannel-94] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:12:23.241 [clientInboundChannel-94] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fbb06ad]
2026-01-26 15:12:23.241 [clientInboundChannel-94] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fbb06ad]
2026-01-26 15:12:23.241 [clientInboundChannel-94] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fbb06ad]
2026-01-26 15:12:23.241 [clientInboundChannel-94] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fbb06ad]
2026-01-26 15:12:23.243 [clientInboundChannel-94] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:12:23.243 [clientInboundChannel-94] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17d80bda]
2026-01-26 15:12:23.243 [clientInboundChannel-94] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1870164931 wrapping org.postgresql.jdbc.PgConnection@56265f4] will be managed by Spring
2026-01-26 15:12:23.244 [clientInboundChannel-94] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 15:12:23.244 [clientInboundChannel-94] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T15:12:23.242354900(LocalDateTime), room-3088d5dd(String)
2026-01-26 15:12:23.257 [clientInboundChannel-94] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 15:12:23.259 [clientInboundChannel-94] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17d80bda]
2026-01-26 15:12:23.259 [clientInboundChannel-94] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17d80bda]
2026-01-26 15:12:23.259 [clientInboundChannel-94] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17d80bda]
2026-01-26 15:12:23.259 [clientInboundChannel-94] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17d80bda]
2026-01-26 15:15:11.697 [clientInboundChannel-97] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:15:11.697 [clientInboundChannel-97] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43617cce]
2026-01-26 15:15:11.698 [clientInboundChannel-97] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1234769854 wrapping org.postgresql.jdbc.PgConnection@c9b80e9] will be managed by Spring
2026-01-26 15:15:11.698 [clientInboundChannel-97] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:15:11.700 [clientInboundChannel-97] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-3088d5dd(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T15:15:11.695801700(LocalDateTime), null
2026-01-26 15:15:11.708 [clientInboundChannel-97] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:15:11.711 [clientInboundChannel-97] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43617cce]
2026-01-26 15:15:11.711 [clientInboundChannel-97] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43617cce]
2026-01-26 15:15:11.712 [clientInboundChannel-97] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43617cce]
2026-01-26 15:15:11.712 [clientInboundChannel-97] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43617cce]
2026-01-26 15:15:11.714 [clientInboundChannel-97] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:15:11.714 [clientInboundChannel-97] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c782c08]
2026-01-26 15:15:11.715 [clientInboundChannel-97] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@139536722 wrapping org.postgresql.jdbc.PgConnection@c9b80e9] will be managed by Spring
2026-01-26 15:15:11.715 [clientInboundChannel-97] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 15:15:11.716 [clientInboundChannel-97] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T15:15:11.714751700(LocalDateTime), room-3088d5dd(String)
2026-01-26 15:15:11.727 [clientInboundChannel-97] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 15:15:11.728 [clientInboundChannel-97] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c782c08]
2026-01-26 15:15:11.728 [clientInboundChannel-97] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c782c08]
2026-01-26 15:15:11.728 [clientInboundChannel-97] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c782c08]
2026-01-26 15:15:11.728 [clientInboundChannel-97] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c782c08]
2026-01-26 15:16:41.346 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:16:41.347 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a17e3f]
2026-01-26 15:16:41.347 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1914557071 wrapping org.postgresql.jdbc.PgConnection@c9b80e9] will be managed by Spring
2026-01-26 15:16:41.348 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:16:41.351 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-08efd106(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T15:16:41.345556500(LocalDateTime), null, 2026-01-26T15:16:41.345556500(LocalDateTime), null, null
2026-01-26 15:16:41.354 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 15:16:41.359 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a17e3f]
2026-01-26 15:16:41.359 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a17e3f]
2026-01-26 15:16:41.360 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a17e3f]
2026-01-26 15:16:41.360 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a17e3f]
2026-01-26 15:16:41.367 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:16:41.367 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f2d605]
2026-01-26 15:16:41.367 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1148942378 wrapping org.postgresql.jdbc.PgConnection@c9b80e9] will be managed by Spring
2026-01-26 15:16:41.367 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:16:41.368 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-08efd106(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T15:16:41.366508700(LocalDateTime), null
2026-01-26 15:16:41.369 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:16:41.371 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f2d605]
2026-01-26 15:16:41.372 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f2d605]
2026-01-26 15:16:41.372 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f2d605]
2026-01-26 15:16:41.372 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f2d605]
2026-01-26 15:16:41.466 [clientInboundChannel-112] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:16:41.467 [clientInboundChannel-112] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d6d14c7]
2026-01-26 15:16:41.468 [clientInboundChannel-112] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1681603955 wrapping org.postgresql.jdbc.PgConnection@c9b80e9] will be managed by Spring
2026-01-26 15:16:41.469 [clientInboundChannel-112] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:16:41.469 [clientInboundChannel-112] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-08efd106(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T15:16:41.466703100(LocalDateTime), null
2026-01-26 15:16:41.471 [clientInboundChannel-112] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:16:41.474 [clientInboundChannel-112] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d6d14c7]
2026-01-26 15:16:41.474 [clientInboundChannel-112] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d6d14c7]
2026-01-26 15:16:41.474 [clientInboundChannel-112] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d6d14c7]
2026-01-26 15:16:41.474 [clientInboundChannel-112] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d6d14c7]
2026-01-26 15:16:41.476 [clientInboundChannel-112] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:16:41.476 [clientInboundChannel-112] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc33b3e]
2026-01-26 15:16:41.476 [clientInboundChannel-112] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@86836383 wrapping org.postgresql.jdbc.PgConnection@c9b80e9] will be managed by Spring
2026-01-26 15:16:41.477 [clientInboundChannel-112] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 15:16:41.477 [clientInboundChannel-112] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T15:16:41.476190200(LocalDateTime), room-08efd106(String)
2026-01-26 15:16:41.478 [clientInboundChannel-112] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 15:16:41.480 [clientInboundChannel-112] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc33b3e]
2026-01-26 15:16:41.480 [clientInboundChannel-112] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc33b3e]
2026-01-26 15:16:41.480 [clientInboundChannel-112] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc33b3e]
2026-01-26 15:16:41.480 [clientInboundChannel-112] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc33b3e]
2026-01-26 15:16:54.815 [clientInboundChannel-115] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:16:54.815 [clientInboundChannel-115] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7448d93c]
2026-01-26 15:16:54.815 [clientInboundChannel-115] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2125509196 wrapping org.postgresql.jdbc.PgConnection@c9b80e9] will be managed by Spring
2026-01-26 15:16:54.815 [clientInboundChannel-115] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:16:54.817 [clientInboundChannel-115] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-08efd106(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T15:16:54.814793900(LocalDateTime), null
2026-01-26 15:16:54.818 [clientInboundChannel-115] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:16:54.825 [clientInboundChannel-115] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7448d93c]
2026-01-26 15:16:54.825 [clientInboundChannel-115] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7448d93c]
2026-01-26 15:16:54.825 [clientInboundChannel-115] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7448d93c]
2026-01-26 15:16:54.826 [clientInboundChannel-115] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7448d93c]
2026-01-26 15:16:54.827 [clientInboundChannel-115] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:16:54.827 [clientInboundChannel-115] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9018c8d]
2026-01-26 15:16:54.827 [clientInboundChannel-115] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1897573567 wrapping org.postgresql.jdbc.PgConnection@c9b80e9] will be managed by Spring
2026-01-26 15:16:54.827 [clientInboundChannel-115] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 15:16:54.827 [clientInboundChannel-115] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T15:16:54.826760(LocalDateTime), room-08efd106(String)
2026-01-26 15:16:54.829 [clientInboundChannel-115] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 15:16:54.830 [clientInboundChannel-115] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9018c8d]
2026-01-26 15:16:54.830 [clientInboundChannel-115] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9018c8d]
2026-01-26 15:16:54.830 [clientInboundChannel-115] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9018c8d]
2026-01-26 15:16:54.830 [clientInboundChannel-115] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9018c8d]
2026-01-26 15:21:24.630 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatHistoryMapper.class]
2026-01-26 15:21:24.631 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatSessionMapper.class]
2026-01-26 15:21:24.632 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\UserAccountMapper.class]
2026-01-26 15:21:24.635 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'aicc.chat.mapper.ChatHistoryMapper' mapperInterface
2026-01-26 15:21:24.638 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatHistoryMapper'.
2026-01-26 15:21:24.638 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatSessionMapper' and 'aicc.chat.mapper.ChatSessionMapper' mapperInterface
2026-01-26 15:21:24.639 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatSessionMapper'.
2026-01-26 15:21:24.639 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userAccountMapper' and 'aicc.chat.mapper.UserAccountMapper' mapperInterface
2026-01-26 15:21:24.640 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'userAccountMapper'.
2026-01-26 15:21:27.415 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Registered plugin: 'aicc.chat.config.MyBatisSqlLogger@17d19538'
2026-01-26 15:21:27.637 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatHistoryMapper.xml]'
2026-01-26 15:21:27.697 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatSessionMapper.xml]'
2026-01-26 15:21:27.715 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\UserAccountMapper.xml]'
2026-01-26 15:21:53.791 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:21:53.808 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d7ee80]
2026-01-26 15:21:53.823 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2077069752 wrapping org.postgresql.jdbc.PgConnection@75cac700] will be managed by Spring
2026-01-26 15:21:53.835 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:21:53.862 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-dba1f913(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T15:21:53.432267400(LocalDateTime), null, 2026-01-26T15:21:53.433265100(LocalDateTime), null, null
2026-01-26 15:21:53.884 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 15:21:53.906 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d7ee80]
2026-01-26 15:21:53.907 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d7ee80]
2026-01-26 15:21:53.909 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d7ee80]
2026-01-26 15:21:53.910 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d7ee80]
2026-01-26 15:21:53.929 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:21:53.930 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4778da46]
2026-01-26 15:21:53.931 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1866394824 wrapping org.postgresql.jdbc.PgConnection@75cac700] will be managed by Spring
2026-01-26 15:21:53.932 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:21:53.934 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-dba1f913(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T15:21:53.928038700(LocalDateTime), null
2026-01-26 15:21:53.938 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:21:53.941 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4778da46]
2026-01-26 15:21:53.942 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4778da46]
2026-01-26 15:21:53.943 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4778da46]
2026-01-26 15:21:53.944 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4778da46]
2026-01-26 15:21:54.216 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:21:54.217 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1489d31a]
2026-01-26 15:21:54.218 [clientInboundChannel-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@522027523 wrapping org.postgresql.jdbc.PgConnection@75cac700] will be managed by Spring
2026-01-26 15:21:54.219 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:21:54.221 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-dba1f913(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T15:21:54.216574600(LocalDateTime), null
2026-01-26 15:21:54.224 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:21:54.229 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1489d31a]
2026-01-26 15:21:54.240 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1489d31a]
2026-01-26 15:21:54.241 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1489d31a]
2026-01-26 15:21:54.242 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1489d31a]
2026-01-26 15:21:54.246 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:21:54.247 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15c121c2]
2026-01-26 15:21:54.247 [clientInboundChannel-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@986108333 wrapping org.postgresql.jdbc.PgConnection@75cac700] will be managed by Spring
2026-01-26 15:21:54.248 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 15:21:54.250 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T15:21:54.244030500(LocalDateTime), room-dba1f913(String)
2026-01-26 15:21:54.280 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 15:21:54.283 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15c121c2]
2026-01-26 15:21:54.283 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15c121c2]
2026-01-26 15:21:54.284 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15c121c2]
2026-01-26 15:21:54.284 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15c121c2]
2026-01-26 15:22:15.997 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:22:16.000 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551202f3]
2026-01-26 15:22:16.002 [clientInboundChannel-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1609197955 wrapping org.postgresql.jdbc.PgConnection@75cac700] will be managed by Spring
2026-01-26 15:22:16.003 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:22:16.004 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-dba1f913(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T15:22:15.996598300(LocalDateTime), null
2026-01-26 15:22:16.006 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:22:16.010 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551202f3]
2026-01-26 15:22:16.011 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551202f3]
2026-01-26 15:22:16.011 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551202f3]
2026-01-26 15:22:16.012 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551202f3]
2026-01-26 15:22:16.014 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:22:16.014 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa8702e]
2026-01-26 15:22:16.015 [clientInboundChannel-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@655537041 wrapping org.postgresql.jdbc.PgConnection@75cac700] will be managed by Spring
2026-01-26 15:22:16.016 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 15:22:16.017 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T15:22:16.013552400(LocalDateTime), room-dba1f913(String)
2026-01-26 15:22:16.019 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 15:22:16.021 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa8702e]
2026-01-26 15:22:16.021 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa8702e]
2026-01-26 15:22:16.022 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa8702e]
2026-01-26 15:22:16.022 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa8702e]
2026-01-26 15:25:27.000 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:25:27.001 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a8a304]
2026-01-26 15:25:27.002 [http-nio-28070-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@529991915 wrapping org.postgresql.jdbc.PgConnection@75cac700] will be managed by Spring
2026-01-26 15:25:27.009 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:25:27.013 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-6c736bd7(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T15:25:26.999273200(LocalDateTime), null, 2026-01-26T15:25:26.999273200(LocalDateTime), null, null
2026-01-26 15:25:27.017 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 15:25:27.026 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a8a304]
2026-01-26 15:25:27.027 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a8a304]
2026-01-26 15:25:27.028 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a8a304]
2026-01-26 15:25:27.028 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a8a304]
2026-01-26 15:25:27.036 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:25:27.038 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67dbefb1]
2026-01-26 15:25:27.039 [http-nio-28070-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@625092734 wrapping org.postgresql.jdbc.PgConnection@75cac700] will be managed by Spring
2026-01-26 15:25:27.040 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:25:27.042 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-6c736bd7(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T15:25:27.035708900(LocalDateTime), null
2026-01-26 15:25:27.049 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:25:27.054 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67dbefb1]
2026-01-26 15:25:27.055 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67dbefb1]
2026-01-26 15:25:27.056 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67dbefb1]
2026-01-26 15:25:27.057 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67dbefb1]
2026-01-26 15:25:33.811 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:25:33.811 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a28d860]
2026-01-26 15:25:33.812 [clientInboundChannel-23] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1624290064 wrapping org.postgresql.jdbc.PgConnection@75cac700] will be managed by Spring
2026-01-26 15:25:33.812 [clientInboundChannel-23] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:25:33.813 [clientInboundChannel-23] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-6c736bd7(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T15:25:33.810992500(LocalDateTime), null
2026-01-26 15:25:33.815 [clientInboundChannel-23] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:25:33.818 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a28d860]
2026-01-26 15:25:33.819 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a28d860]
2026-01-26 15:25:33.819 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a28d860]
2026-01-26 15:25:33.819 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a28d860]
2026-01-26 15:25:33.821 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:25:33.821 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19364a72]
2026-01-26 15:25:33.821 [clientInboundChannel-23] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1102309221 wrapping org.postgresql.jdbc.PgConnection@75cac700] will be managed by Spring
2026-01-26 15:25:33.822 [clientInboundChannel-23] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 15:25:33.822 [clientInboundChannel-23] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T15:25:33.821962800(LocalDateTime), room-6c736bd7(String)
2026-01-26 15:25:33.824 [clientInboundChannel-23] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 15:25:33.825 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19364a72]
2026-01-26 15:25:33.826 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19364a72]
2026-01-26 15:25:33.826 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19364a72]
2026-01-26 15:25:33.826 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19364a72]
2026-01-26 15:36:05.098 [clientInboundChannel-26] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:36:05.100 [clientInboundChannel-26] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50943806]
2026-01-26 15:36:05.102 [clientInboundChannel-26] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1636731825 wrapping org.postgresql.jdbc.PgConnection@75cac700] will be managed by Spring
2026-01-26 15:36:05.103 [clientInboundChannel-26] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:36:05.109 [clientInboundChannel-26] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-6c736bd7(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T15:36:05.095551100(LocalDateTime), null
2026-01-26 15:36:05.114 [clientInboundChannel-26] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:36:05.134 [clientInboundChannel-26] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50943806]
2026-01-26 15:36:05.135 [clientInboundChannel-26] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50943806]
2026-01-26 15:36:05.135 [clientInboundChannel-26] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50943806]
2026-01-26 15:36:05.136 [clientInboundChannel-26] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50943806]
2026-01-26 15:36:05.137 [clientInboundChannel-26] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:36:05.139 [clientInboundChannel-26] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d453a4]
2026-01-26 15:36:05.139 [clientInboundChannel-26] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@495556330 wrapping org.postgresql.jdbc.PgConnection@75cac700] will be managed by Spring
2026-01-26 15:36:05.139 [clientInboundChannel-26] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 15:36:05.140 [clientInboundChannel-26] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T15:36:05.137954700(LocalDateTime), room-6c736bd7(String)
2026-01-26 15:36:05.142 [clientInboundChannel-26] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 15:36:05.144 [clientInboundChannel-26] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d453a4]
2026-01-26 15:36:05.144 [clientInboundChannel-26] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d453a4]
2026-01-26 15:36:05.145 [clientInboundChannel-26] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d453a4]
2026-01-26 15:36:05.145 [clientInboundChannel-26] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d453a4]
2026-01-26 15:39:46.439 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatHistoryMapper.class]
2026-01-26 15:39:46.440 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatSessionMapper.class]
2026-01-26 15:39:46.441 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\UserAccountMapper.class]
2026-01-26 15:39:46.444 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'aicc.chat.mapper.ChatHistoryMapper' mapperInterface
2026-01-26 15:39:46.447 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatHistoryMapper'.
2026-01-26 15:39:46.447 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatSessionMapper' and 'aicc.chat.mapper.ChatSessionMapper' mapperInterface
2026-01-26 15:39:46.448 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatSessionMapper'.
2026-01-26 15:39:46.448 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userAccountMapper' and 'aicc.chat.mapper.UserAccountMapper' mapperInterface
2026-01-26 15:39:46.450 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'userAccountMapper'.
2026-01-26 15:39:49.104 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Registered plugin: 'aicc.chat.config.MyBatisSqlLogger@7891cf3'
2026-01-26 15:39:49.292 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatHistoryMapper.xml]'
2026-01-26 15:39:49.328 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatSessionMapper.xml]'
2026-01-26 15:39:49.345 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\UserAccountMapper.xml]'
2026-01-26 15:43:46.375 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatHistoryMapper.class]
2026-01-26 15:43:46.376 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatSessionMapper.class]
2026-01-26 15:43:46.377 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\UserAccountMapper.class]
2026-01-26 15:43:46.379 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'aicc.chat.mapper.ChatHistoryMapper' mapperInterface
2026-01-26 15:43:46.382 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatHistoryMapper'.
2026-01-26 15:43:46.383 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatSessionMapper' and 'aicc.chat.mapper.ChatSessionMapper' mapperInterface
2026-01-26 15:43:46.384 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatSessionMapper'.
2026-01-26 15:43:46.385 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userAccountMapper' and 'aicc.chat.mapper.UserAccountMapper' mapperInterface
2026-01-26 15:43:46.385 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'userAccountMapper'.
2026-01-26 15:43:48.937 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Registered plugin: 'aicc.chat.config.MyBatisSqlLogger@6bfbab1c'
2026-01-26 15:43:49.131 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatHistoryMapper.xml]'
2026-01-26 15:43:49.172 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatSessionMapper.xml]'
2026-01-26 15:43:49.187 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\UserAccountMapper.xml]'
2026-01-26 15:46:37.307 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatHistoryMapper.class]
2026-01-26 15:46:37.308 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatSessionMapper.class]
2026-01-26 15:46:37.309 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\UserAccountMapper.class]
2026-01-26 15:46:37.311 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'aicc.chat.mapper.ChatHistoryMapper' mapperInterface
2026-01-26 15:46:37.314 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatHistoryMapper'.
2026-01-26 15:46:37.315 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatSessionMapper' and 'aicc.chat.mapper.ChatSessionMapper' mapperInterface
2026-01-26 15:46:37.316 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatSessionMapper'.
2026-01-26 15:46:37.317 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userAccountMapper' and 'aicc.chat.mapper.UserAccountMapper' mapperInterface
2026-01-26 15:46:37.318 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'userAccountMapper'.
2026-01-26 15:46:39.731 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Registered plugin: 'aicc.chat.config.MyBatisSqlLogger@3700994c'
2026-01-26 15:46:39.884 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatHistoryMapper.xml]'
2026-01-26 15:46:39.920 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatSessionMapper.xml]'
2026-01-26 15:46:39.932 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\UserAccountMapper.xml]'
2026-01-26 15:46:54.588 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:46:54.602 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764ccc32]
2026-01-26 15:46:54.622 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1670023723 wrapping org.postgresql.jdbc.PgConnection@5972b095] will be managed by Spring
2026-01-26 15:46:54.636 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:46:54.674 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-07f96ead(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T15:46:54.263123200(LocalDateTime), null, 2026-01-26T15:46:54.263123200(LocalDateTime), null, null
2026-01-26 15:46:54.697 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 15:46:54.720 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764ccc32]
2026-01-26 15:46:54.723 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764ccc32]
2026-01-26 15:46:54.724 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764ccc32]
2026-01-26 15:46:54.725 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764ccc32]
2026-01-26 15:46:54.744 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:46:54.744 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69accfb3]
2026-01-26 15:46:54.745 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@607087164 wrapping org.postgresql.jdbc.PgConnection@5972b095] will be managed by Spring
2026-01-26 15:46:54.746 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:46:54.748 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-07f96ead(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T15:46:54.743402400(LocalDateTime), null
2026-01-26 15:46:54.752 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:46:54.758 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69accfb3]
2026-01-26 15:46:54.759 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69accfb3]
2026-01-26 15:46:54.759 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69accfb3]
2026-01-26 15:46:54.760 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69accfb3]
2026-01-26 15:47:03.780 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:47:03.781 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b6d111]
2026-01-26 15:47:03.782 [clientInboundChannel-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1723403927 wrapping org.postgresql.jdbc.PgConnection@5972b095] will be managed by Spring
2026-01-26 15:47:03.782 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:47:03.784 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-07f96ead(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T15:47:03.779568900(LocalDateTime), null
2026-01-26 15:47:03.787 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:47:03.792 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b6d111]
2026-01-26 15:47:03.794 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b6d111]
2026-01-26 15:47:03.794 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b6d111]
2026-01-26 15:47:03.795 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b6d111]
2026-01-26 15:47:03.799 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:47:03.800 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b24bdaa]
2026-01-26 15:47:03.801 [clientInboundChannel-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1200983316 wrapping org.postgresql.jdbc.PgConnection@5972b095] will be managed by Spring
2026-01-26 15:47:03.802 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 15:47:03.803 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T15:47:03.797046100(LocalDateTime), room-07f96ead(String)
2026-01-26 15:47:03.816 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 15:47:03.817 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b24bdaa]
2026-01-26 15:47:03.818 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b24bdaa]
2026-01-26 15:47:03.818 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b24bdaa]
2026-01-26 15:47:03.818 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b24bdaa]
2026-01-26 15:48:36.246 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatHistoryMapper.class]
2026-01-26 15:48:36.246 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatSessionMapper.class]
2026-01-26 15:48:36.247 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\UserAccountMapper.class]
2026-01-26 15:48:36.250 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'aicc.chat.mapper.ChatHistoryMapper' mapperInterface
2026-01-26 15:48:36.252 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatHistoryMapper'.
2026-01-26 15:48:36.253 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatSessionMapper' and 'aicc.chat.mapper.ChatSessionMapper' mapperInterface
2026-01-26 15:48:36.254 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatSessionMapper'.
2026-01-26 15:48:36.254 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userAccountMapper' and 'aicc.chat.mapper.UserAccountMapper' mapperInterface
2026-01-26 15:48:36.255 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'userAccountMapper'.
2026-01-26 15:48:38.818 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Registered plugin: 'aicc.chat.config.MyBatisSqlLogger@5e2b512b'
2026-01-26 15:48:38.974 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatHistoryMapper.xml]'
2026-01-26 15:48:38.998 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatSessionMapper.xml]'
2026-01-26 15:48:39.010 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\UserAccountMapper.xml]'
2026-01-26 15:48:51.265 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:48:51.288 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@634d8c0e]
2026-01-26 15:48:51.308 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@333682378 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 15:48:51.323 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:48:51.374 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-23a70999(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T15:48:50.810190700(LocalDateTime), null, 2026-01-26T15:48:50.811188500(LocalDateTime), null, null
2026-01-26 15:48:51.393 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 15:48:51.421 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@634d8c0e]
2026-01-26 15:48:51.424 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@634d8c0e]
2026-01-26 15:48:51.425 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@634d8c0e]
2026-01-26 15:48:51.426 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@634d8c0e]
2026-01-26 15:48:51.448 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:48:51.449 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae4f2a]
2026-01-26 15:48:51.450 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1797298037 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 15:48:51.451 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:48:51.454 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-23a70999(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T15:48:51.448144(LocalDateTime), null
2026-01-26 15:48:51.459 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:48:51.463 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae4f2a]
2026-01-26 15:48:51.465 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae4f2a]
2026-01-26 15:48:51.465 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae4f2a]
2026-01-26 15:48:51.466 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae4f2a]
2026-01-26 15:48:52.105 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:48:52.107 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e807be]
2026-01-26 15:48:52.108 [clientInboundChannel-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1095893315 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 15:48:52.110 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:48:52.113 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-23a70999(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T15:48:52.104935400(LocalDateTime), null
2026-01-26 15:48:52.119 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:48:52.133 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e807be]
2026-01-26 15:48:52.135 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e807be]
2026-01-26 15:48:52.135 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e807be]
2026-01-26 15:48:52.136 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e807be]
2026-01-26 15:48:52.140 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:48:52.141 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3505bfe2]
2026-01-26 15:48:52.142 [clientInboundChannel-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@547492304 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 15:48:52.143 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 15:48:52.145 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T15:48:52.137390(LocalDateTime), room-23a70999(String)
2026-01-26 15:48:52.161 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 15:48:52.164 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3505bfe2]
2026-01-26 15:48:52.165 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3505bfe2]
2026-01-26 15:48:52.166 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3505bfe2]
2026-01-26 15:48:52.166 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3505bfe2]
2026-01-26 15:49:36.412 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:49:36.413 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4da08361]
2026-01-26 15:49:36.413 [clientInboundChannel-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1197008913 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 15:49:36.414 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:49:36.415 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-23a70999(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T15:49:36.412941600(LocalDateTime), null
2026-01-26 15:49:36.417 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:49:36.422 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4da08361]
2026-01-26 15:49:36.423 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4da08361]
2026-01-26 15:49:36.424 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4da08361]
2026-01-26 15:49:36.424 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4da08361]
2026-01-26 15:49:36.425 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:49:36.426 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba85e3f]
2026-01-26 15:49:36.426 [clientInboundChannel-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@864724912 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 15:49:36.426 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 15:49:36.427 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T15:49:36.425908(LocalDateTime), room-23a70999(String)
2026-01-26 15:49:36.428 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 15:49:36.430 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba85e3f]
2026-01-26 15:49:36.430 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba85e3f]
2026-01-26 15:49:36.431 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba85e3f]
2026-01-26 15:49:36.431 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba85e3f]
2026-01-26 15:52:41.571 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:52:41.572 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@418357cd] was not registered for synchronization because synchronization is not active
2026-01-26 15:52:41.584 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1102598561 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will not be managed by Spring
2026-01-26 15:52:41.585 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 15:52:41.586 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 15:52:41.626 [http-nio-28070-exec-5] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 15:52:41.627 [http-nio-28070-exec-5] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 15:52:41.633 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 15:52:41.659 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@418357cd]
2026-01-26 15:52:48.523 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:52:48.523 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a60a75c]
2026-01-26 15:52:48.524 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1149576788 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 15:52:48.524 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:52:48.525 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-27600998(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T15:52:48.522641400(LocalDateTime), null, 2026-01-26T15:52:48.522641400(LocalDateTime), null, null
2026-01-26 15:52:48.528 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 15:52:48.532 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a60a75c]
2026-01-26 15:52:48.533 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a60a75c]
2026-01-26 15:52:48.534 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a60a75c]
2026-01-26 15:52:48.534 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a60a75c]
2026-01-26 15:52:48.540 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:52:48.540 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0b485e]
2026-01-26 15:52:48.541 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2100110973 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 15:52:48.542 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:52:48.543 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-27600998(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T15:52:48.539598(LocalDateTime), null
2026-01-26 15:52:48.546 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:52:48.548 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0b485e]
2026-01-26 15:52:48.549 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0b485e]
2026-01-26 15:52:48.549 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0b485e]
2026-01-26 15:52:48.549 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0b485e]
2026-01-26 15:52:48.613 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:52:48.618 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5793312e]
2026-01-26 15:52:48.621 [clientInboundChannel-23] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1567316574 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 15:52:48.622 [clientInboundChannel-23] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 15:52:48.623 [clientInboundChannel-23] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-27600998(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T15:52:48.612930600(LocalDateTime), null
2026-01-26 15:52:48.627 [clientInboundChannel-23] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 15:52:48.630 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5793312e]
2026-01-26 15:52:48.631 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5793312e]
2026-01-26 15:52:48.631 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5793312e]
2026-01-26 15:52:48.631 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5793312e]
2026-01-26 15:52:48.632 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 15:52:48.633 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35bbb1e7]
2026-01-26 15:52:48.633 [clientInboundChannel-23] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2080947239 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 15:52:48.633 [clientInboundChannel-23] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 15:52:48.634 [clientInboundChannel-23] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T15:52:48.632876500(LocalDateTime), room-27600998(String)
2026-01-26 15:52:48.635 [clientInboundChannel-23] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 15:52:48.637 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35bbb1e7]
2026-01-26 15:52:48.638 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35bbb1e7]
2026-01-26 15:52:48.638 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35bbb1e7]
2026-01-26 15:52:48.638 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35bbb1e7]
2026-01-26 16:06:14.372 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:06:14.373 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f587d06] was not registered for synchronization because synchronization is not active
2026-01-26 16:06:14.374 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2047202929 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will not be managed by Spring
2026-01-26 16:06:14.375 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 16:06:14.377 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 16:06:14.380 [http-nio-28070-exec-6] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 16:06:14.380 [http-nio-28070-exec-6] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 16:06:14.381 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 16:06:14.383 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f587d06]
2026-01-26 16:07:22.287 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:22.288 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694169dc]
2026-01-26 16:07:22.288 [clientInboundChannel-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1673069228 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:22.289 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:07:22.291 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-27600998(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅁ(String), TALK(String), apt001(String), 2026-01-26T16:07:22.286224100(LocalDateTime), null
2026-01-26 16:07:22.293 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:07:22.301 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694169dc]
2026-01-26 16:07:22.303 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694169dc]
2026-01-26 16:07:22.303 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694169dc]
2026-01-26 16:07:22.303 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694169dc]
2026-01-26 16:07:22.305 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:22.306 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e48b592]
2026-01-26 16:07:22.306 [clientInboundChannel-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1121633749 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:22.307 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:07:22.308 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:07:22.305174(LocalDateTime), room-27600998(String)
2026-01-26 16:07:22.309 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:07:22.311 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e48b592]
2026-01-26 16:07:22.311 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e48b592]
2026-01-26 16:07:22.312 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e48b592]
2026-01-26 16:07:22.312 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e48b592]
2026-01-26 16:07:22.670 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:22.671 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36769234]
2026-01-26 16:07:22.671 [reactor-http-nio-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@944065620 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:22.673 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:07:22.676 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-27600998(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T16:07:22.670080600(LocalDateTime), null
2026-01-26 16:07:22.678 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:07:22.681 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36769234]
2026-01-26 16:07:22.682 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36769234]
2026-01-26 16:07:22.683 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36769234]
2026-01-26 16:07:22.683 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36769234]
2026-01-26 16:07:22.684 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:22.686 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@502d335c]
2026-01-26 16:07:22.687 [reactor-http-nio-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1821891757 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:22.688 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:07:22.690 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:07:22.684043300(LocalDateTime), room-27600998(String)
2026-01-26 16:07:22.692 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:07:22.695 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@502d335c]
2026-01-26 16:07:22.695 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@502d335c]
2026-01-26 16:07:22.696 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@502d335c]
2026-01-26 16:07:22.697 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@502d335c]
2026-01-26 16:07:38.387 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:38.388 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9db811c]
2026-01-26 16:07:38.388 [clientInboundChannel-35] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@52685420 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:38.389 [clientInboundChannel-35] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:07:38.391 [clientInboundChannel-35] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-27600998(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T16:07:38.386865400(LocalDateTime), null
2026-01-26 16:07:38.395 [clientInboundChannel-35] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:07:38.408 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9db811c]
2026-01-26 16:07:38.409 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9db811c]
2026-01-26 16:07:38.409 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9db811c]
2026-01-26 16:07:38.409 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9db811c]
2026-01-26 16:07:38.412 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:38.412 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2799f041]
2026-01-26 16:07:38.413 [clientInboundChannel-35] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@204940144 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:38.413 [clientInboundChannel-35] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:07:38.414 [clientInboundChannel-35] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:07:38.411802900(LocalDateTime), room-27600998(String)
2026-01-26 16:07:38.415 [clientInboundChannel-35] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:07:38.416 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2799f041]
2026-01-26 16:07:38.417 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2799f041]
2026-01-26 16:07:38.417 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2799f041]
2026-01-26 16:07:38.417 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2799f041]
2026-01-26 16:07:42.652 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:42.653 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ad56adc]
2026-01-26 16:07:42.654 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@372074717 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:42.654 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:07:42.655 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-b9d542e3(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T16:07:42.652703100(LocalDateTime), null, 2026-01-26T16:07:42.652703100(LocalDateTime), null, null
2026-01-26 16:07:42.656 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 16:07:42.659 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ad56adc]
2026-01-26 16:07:42.660 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ad56adc]
2026-01-26 16:07:42.661 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ad56adc]
2026-01-26 16:07:42.661 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ad56adc]
2026-01-26 16:07:42.666 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:42.667 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@267106bf]
2026-01-26 16:07:42.667 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1690231899 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:42.668 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:07:42.669 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b9d542e3(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T16:07:42.666666400(LocalDateTime), null
2026-01-26 16:07:42.671 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:07:42.673 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@267106bf]
2026-01-26 16:07:42.674 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@267106bf]
2026-01-26 16:07:42.674 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@267106bf]
2026-01-26 16:07:42.674 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@267106bf]
2026-01-26 16:07:42.730 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:42.731 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a6016c]
2026-01-26 16:07:42.732 [clientInboundChannel-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1376992538 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:42.732 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:07:42.733 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b9d542e3(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T16:07:42.730005400(LocalDateTime), null
2026-01-26 16:07:42.734 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:07:42.738 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a6016c]
2026-01-26 16:07:42.738 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a6016c]
2026-01-26 16:07:42.739 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a6016c]
2026-01-26 16:07:42.739 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a6016c]
2026-01-26 16:07:42.739 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:42.740 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ab74e9]
2026-01-26 16:07:42.741 [clientInboundChannel-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@226956249 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:42.742 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:07:42.743 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:07:42.739997200(LocalDateTime), room-b9d542e3(String)
2026-01-26 16:07:42.744 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:07:42.746 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ab74e9]
2026-01-26 16:07:42.746 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ab74e9]
2026-01-26 16:07:42.748 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ab74e9]
2026-01-26 16:07:42.748 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ab74e9]
2026-01-26 16:07:44.450 [clientInboundChannel-40] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:44.450 [clientInboundChannel-40] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7477fa1]
2026-01-26 16:07:44.451 [clientInboundChannel-40] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@230626513 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:44.451 [clientInboundChannel-40] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:07:44.451 [clientInboundChannel-40] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b9d542e3(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅁㅁ(String), TALK(String), apt001(String), 2026-01-26T16:07:44.449633400(LocalDateTime), null
2026-01-26 16:07:44.454 [clientInboundChannel-40] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:07:44.457 [clientInboundChannel-40] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7477fa1]
2026-01-26 16:07:44.457 [clientInboundChannel-40] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7477fa1]
2026-01-26 16:07:44.457 [clientInboundChannel-40] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7477fa1]
2026-01-26 16:07:44.457 [clientInboundChannel-40] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7477fa1]
2026-01-26 16:07:44.458 [clientInboundChannel-40] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:44.459 [clientInboundChannel-40] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@743b5fc3]
2026-01-26 16:07:44.459 [clientInboundChannel-40] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@206768990 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:44.460 [clientInboundChannel-40] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:07:44.460 [clientInboundChannel-40] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:07:44.458612400(LocalDateTime), room-b9d542e3(String)
2026-01-26 16:07:44.463 [clientInboundChannel-40] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:07:44.465 [clientInboundChannel-40] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@743b5fc3]
2026-01-26 16:07:44.465 [clientInboundChannel-40] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@743b5fc3]
2026-01-26 16:07:44.466 [clientInboundChannel-40] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@743b5fc3]
2026-01-26 16:07:44.466 [clientInboundChannel-40] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@743b5fc3]
2026-01-26 16:07:44.481 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:44.483 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@edabdcb]
2026-01-26 16:07:44.484 [reactor-http-nio-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1602272615 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:44.484 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:07:44.485 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b9d542e3(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T16:07:44.481549700(LocalDateTime), null
2026-01-26 16:07:44.487 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:07:44.490 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@edabdcb]
2026-01-26 16:07:44.491 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@edabdcb]
2026-01-26 16:07:44.491 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@edabdcb]
2026-01-26 16:07:44.492 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@edabdcb]
2026-01-26 16:07:44.493 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:44.494 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d609e9]
2026-01-26 16:07:44.494 [reactor-http-nio-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1540228702 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:44.495 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:07:44.496 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:07:44.493517500(LocalDateTime), room-b9d542e3(String)
2026-01-26 16:07:44.498 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:07:44.500 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d609e9]
2026-01-26 16:07:44.500 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d609e9]
2026-01-26 16:07:44.500 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d609e9]
2026-01-26 16:07:44.500 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d609e9]
2026-01-26 16:07:57.694 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:57.694 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a08b42]
2026-01-26 16:07:57.695 [clientInboundChannel-41] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1265960751 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:57.695 [clientInboundChannel-41] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:07:57.695 [clientInboundChannel-41] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b9d542e3(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T16:07:57.693006700(LocalDateTime), null
2026-01-26 16:07:57.696 [clientInboundChannel-41] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:07:57.699 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a08b42]
2026-01-26 16:07:57.700 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a08b42]
2026-01-26 16:07:57.700 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a08b42]
2026-01-26 16:07:57.700 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a08b42]
2026-01-26 16:07:57.702 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:57.702 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28cfa9cf]
2026-01-26 16:07:57.703 [clientInboundChannel-41] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@849229011 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:57.703 [clientInboundChannel-41] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:07:57.704 [clientInboundChannel-41] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:07:57.702980(LocalDateTime), room-b9d542e3(String)
2026-01-26 16:07:57.705 [clientInboundChannel-41] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:07:57.706 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28cfa9cf]
2026-01-26 16:07:57.707 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28cfa9cf]
2026-01-26 16:07:57.707 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28cfa9cf]
2026-01-26 16:07:57.707 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28cfa9cf]
2026-01-26 16:07:57.729 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:57.729 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@976fbb2]
2026-01-26 16:07:57.729 [clientInboundChannel-41] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1228260798 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:57.730 [clientInboundChannel-41] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:07:57.730 [clientInboundChannel-41] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: WAITING(String), room-b9d542e3(String)
2026-01-26 16:07:57.732 [clientInboundChannel-41] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 16:07:57.734 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@976fbb2]
2026-01-26 16:07:57.735 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@976fbb2]
2026-01-26 16:07:57.735 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@976fbb2]
2026-01-26 16:07:57.736 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@976fbb2]
2026-01-26 16:07:57.737 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:07:57.738 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef29ad4]
2026-01-26 16:07:57.738 [clientInboundChannel-41] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@532007895 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:07:57.739 [clientInboundChannel-41] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:07:57.740 [clientInboundChannel-41] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b9d542e3(String), SYSTEM(String), System(String), SYSTEM(String), 상담원 연결을 요청하였습니다. 상담원이 연결될 때까지 잠시만 기다려 주세요.(String), TALK(String), null, 2026-01-26T16:07:57.737886800(LocalDateTime), null
2026-01-26 16:07:57.741 [clientInboundChannel-41] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:07:57.747 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef29ad4]
2026-01-26 16:07:57.752 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef29ad4]
2026-01-26 16:07:57.753 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef29ad4]
2026-01-26 16:07:57.753 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef29ad4]
2026-01-26 16:08:09.169 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:08:09.170 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc267a6]
2026-01-26 16:08:09.171 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1009217823 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:08:09.171 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:08:09.172 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: AGENT(String), room-b9d542e3(String)
2026-01-26 16:08:09.187 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 16:08:09.189 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc267a6]
2026-01-26 16:08:09.190 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc267a6]
2026-01-26 16:08:09.190 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc267a6]
2026-01-26 16:08:09.191 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc267a6]
2026-01-26 16:08:09.197 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:08:09.198 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0ab537]
2026-01-26 16:08:09.199 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1676693425 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:08:09.200 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateAssignedAgent - ==>  Preparing: UPDATE chat_session SET assigned_agent = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:08:09.201 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateAssignedAgent - ==> Parameters: 상담원-01(String), room-b9d542e3(String)
2026-01-26 16:08:09.203 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateAssignedAgent - <==    Updates: 1
2026-01-26 16:08:09.205 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0ab537]
2026-01-26 16:08:09.206 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0ab537]
2026-01-26 16:08:09.211 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0ab537]
2026-01-26 16:08:09.211 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0ab537]
2026-01-26 16:08:09.213 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:08:09.214 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69ff0899]
2026-01-26 16:08:09.215 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@792798780 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:08:09.216 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:08:09.217 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b9d542e3(String), SYSTEM(String), System(String), SYSTEM(String), 상담원-01 상담원과 연결되었습니다.(String), TALK(String), null, 2026-01-26T16:08:09.213806800(LocalDateTime), null
2026-01-26 16:08:09.222 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:08:09.225 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69ff0899]
2026-01-26 16:08:09.225 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69ff0899]
2026-01-26 16:08:09.225 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69ff0899]
2026-01-26 16:08:09.226 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69ff0899]
2026-01-26 16:10:28.525 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:10:28.526 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3143e7ec]
2026-01-26 16:10:28.526 [clientInboundChannel-48] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1227765318 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:10:28.527 [clientInboundChannel-48] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:10:28.527 [clientInboundChannel-48] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b9d542e3(String), agent01(String), 상담원-01(String), AGENT(String), 안녕하세요(String), TALK(String), apt001(String), 2026-01-26T16:10:28.523704500(LocalDateTime), null
2026-01-26 16:10:28.528 [clientInboundChannel-48] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:10:28.530 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3143e7ec]
2026-01-26 16:10:28.530 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3143e7ec]
2026-01-26 16:10:28.530 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3143e7ec]
2026-01-26 16:10:28.530 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3143e7ec]
2026-01-26 16:10:28.531 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:10:28.531 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@522a3e45]
2026-01-26 16:10:28.531 [clientInboundChannel-48] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1798781772 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:10:28.531 [clientInboundChannel-48] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:10:28.533 [clientInboundChannel-48] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:10:28.531924600(LocalDateTime), room-b9d542e3(String)
2026-01-26 16:10:28.534 [clientInboundChannel-48] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:10:28.535 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@522a3e45]
2026-01-26 16:10:28.536 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@522a3e45]
2026-01-26 16:10:28.536 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@522a3e45]
2026-01-26 16:10:28.536 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@522a3e45]
2026-01-26 16:10:44.242 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:10:44.243 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@492d926b]
2026-01-26 16:10:44.243 [clientInboundChannel-51] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1138096411 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:10:44.244 [clientInboundChannel-51] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:10:44.244 [clientInboundChannel-51] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b9d542e3(String), agent01(String), 상담원-01(String), AGENT(String), 챗봇입니다(String), TALK(String), apt001(String), 2026-01-26T16:10:44.242939700(LocalDateTime), null
2026-01-26 16:10:44.245 [clientInboundChannel-51] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:10:44.248 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@492d926b]
2026-01-26 16:10:44.249 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@492d926b]
2026-01-26 16:10:44.250 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@492d926b]
2026-01-26 16:10:44.250 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@492d926b]
2026-01-26 16:10:44.251 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:10:44.251 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@234c0b7e]
2026-01-26 16:10:44.251 [clientInboundChannel-51] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1533703013 wrapping org.postgresql.jdbc.PgConnection@429cf0bb] will be managed by Spring
2026-01-26 16:10:44.251 [clientInboundChannel-51] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:10:44.252 [clientInboundChannel-51] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:10:44.251920100(LocalDateTime), room-b9d542e3(String)
2026-01-26 16:10:44.253 [clientInboundChannel-51] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:10:44.253 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@234c0b7e]
2026-01-26 16:10:44.254 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@234c0b7e]
2026-01-26 16:10:44.254 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@234c0b7e]
2026-01-26 16:10:44.254 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@234c0b7e]
2026-01-26 16:24:08.394 [clientInboundChannel-54] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:24:08.396 [clientInboundChannel-54] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a5a3f0]
2026-01-26 16:24:08.396 [clientInboundChannel-54] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1247660160 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:24:08.396 [clientInboundChannel-54] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:24:08.398 [clientInboundChannel-54] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b9d542e3(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T16:24:08.393434900(LocalDateTime), null
2026-01-26 16:24:08.404 [clientInboundChannel-54] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:24:08.407 [clientInboundChannel-54] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a5a3f0]
2026-01-26 16:24:08.407 [clientInboundChannel-54] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a5a3f0]
2026-01-26 16:24:08.408 [clientInboundChannel-54] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a5a3f0]
2026-01-26 16:24:08.408 [clientInboundChannel-54] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a5a3f0]
2026-01-26 16:24:08.411 [clientInboundChannel-54] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:24:08.411 [clientInboundChannel-54] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aa7263c]
2026-01-26 16:24:08.413 [clientInboundChannel-54] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@27487325 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:24:08.414 [clientInboundChannel-54] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:24:08.414 [clientInboundChannel-54] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:24:08.411243900(LocalDateTime), room-b9d542e3(String)
2026-01-26 16:24:08.425 [clientInboundChannel-54] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:24:08.426 [clientInboundChannel-54] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aa7263c]
2026-01-26 16:24:08.426 [clientInboundChannel-54] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aa7263c]
2026-01-26 16:24:08.426 [clientInboundChannel-54] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aa7263c]
2026-01-26 16:24:08.426 [clientInboundChannel-54] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aa7263c]
2026-01-26 16:26:49.428 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:26:49.429 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bab015c] was not registered for synchronization because synchronization is not active
2026-01-26 16:26:49.430 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1474820450 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will not be managed by Spring
2026-01-26 16:26:49.430 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 16:26:49.431 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 16:26:49.444 [http-nio-28070-exec-6] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 16:26:49.445 [http-nio-28070-exec-6] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 16:26:49.447 [http-nio-28070-exec-6] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 16:26:49.451 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bab015c]
2026-01-26 16:30:05.377 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:30:05.377 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336f9511]
2026-01-26 16:30:05.377 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@32438551 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:30:05.378 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:30:05.379 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-87e539b0(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T16:30:05.376103200(LocalDateTime), null, 2026-01-26T16:30:05.376103200(LocalDateTime), null, null
2026-01-26 16:30:05.381 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 16:30:05.384 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336f9511]
2026-01-26 16:30:05.386 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336f9511]
2026-01-26 16:30:05.386 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336f9511]
2026-01-26 16:30:05.386 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336f9511]
2026-01-26 16:30:05.392 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:30:05.393 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a66579]
2026-01-26 16:30:05.393 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@754563200 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:30:05.394 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:30:05.395 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-87e539b0(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T16:30:05.392103600(LocalDateTime), null
2026-01-26 16:30:05.397 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:30:05.400 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a66579]
2026-01-26 16:30:05.401 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a66579]
2026-01-26 16:30:05.402 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a66579]
2026-01-26 16:30:05.402 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a66579]
2026-01-26 16:30:05.461 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:30:05.462 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65566ffe]
2026-01-26 16:30:05.462 [clientInboundChannel-69] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1873675406 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:30:05.463 [clientInboundChannel-69] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:30:05.464 [clientInboundChannel-69] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-87e539b0(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T16:30:05.461468200(LocalDateTime), null
2026-01-26 16:30:05.466 [clientInboundChannel-69] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:30:05.470 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65566ffe]
2026-01-26 16:30:05.471 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65566ffe]
2026-01-26 16:30:05.471 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65566ffe]
2026-01-26 16:30:05.472 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65566ffe]
2026-01-26 16:30:05.473 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:30:05.473 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c53342b]
2026-01-26 16:30:05.474 [clientInboundChannel-69] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@72942507 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:30:05.474 [clientInboundChannel-69] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:30:05.475 [clientInboundChannel-69] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:30:05.473435400(LocalDateTime), room-87e539b0(String)
2026-01-26 16:30:05.476 [clientInboundChannel-69] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:30:05.478 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c53342b]
2026-01-26 16:30:05.478 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c53342b]
2026-01-26 16:30:05.478 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c53342b]
2026-01-26 16:30:05.478 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c53342b]
2026-01-26 16:30:19.153 [clientInboundChannel-72] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:30:19.154 [clientInboundChannel-72] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e8e9a2]
2026-01-26 16:30:19.156 [clientInboundChannel-72] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@470844114 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:30:19.156 [clientInboundChannel-72] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:30:19.157 [clientInboundChannel-72] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-87e539b0(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T16:30:19.151379300(LocalDateTime), null
2026-01-26 16:30:19.159 [clientInboundChannel-72] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:30:19.163 [clientInboundChannel-72] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e8e9a2]
2026-01-26 16:30:19.164 [clientInboundChannel-72] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e8e9a2]
2026-01-26 16:30:19.164 [clientInboundChannel-72] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e8e9a2]
2026-01-26 16:30:19.164 [clientInboundChannel-72] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e8e9a2]
2026-01-26 16:30:19.165 [clientInboundChannel-72] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:30:19.165 [clientInboundChannel-72] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@866584d]
2026-01-26 16:30:19.166 [clientInboundChannel-72] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1889483507 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:30:19.166 [clientInboundChannel-72] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:30:19.166 [clientInboundChannel-72] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:30:19.165342300(LocalDateTime), room-87e539b0(String)
2026-01-26 16:30:19.167 [clientInboundChannel-72] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:30:19.169 [clientInboundChannel-72] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@866584d]
2026-01-26 16:30:19.170 [clientInboundChannel-72] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@866584d]
2026-01-26 16:30:19.170 [clientInboundChannel-72] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@866584d]
2026-01-26 16:30:19.170 [clientInboundChannel-72] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@866584d]
2026-01-26 16:30:34.110 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:30:34.111 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fdfa72e] was not registered for synchronization because synchronization is not active
2026-01-26 16:30:34.112 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1145525279 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will not be managed by Spring
2026-01-26 16:30:34.113 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 16:30:34.113 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 16:30:34.115 [http-nio-28070-exec-7] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 16:30:34.115 [http-nio-28070-exec-7] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 16:30:34.117 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 16:30:34.118 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fdfa72e]
2026-01-26 16:30:36.874 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:30:36.874 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31cac255]
2026-01-26 16:30:36.875 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1060983970 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:30:36.875 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:30:36.876 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-8518da91(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T16:30:36.873022500(LocalDateTime), null, 2026-01-26T16:30:36.873022500(LocalDateTime), null, null
2026-01-26 16:30:36.877 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 16:30:36.880 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31cac255]
2026-01-26 16:30:36.881 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31cac255]
2026-01-26 16:30:36.881 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31cac255]
2026-01-26 16:30:36.881 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31cac255]
2026-01-26 16:30:36.885 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:30:36.886 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d18c80]
2026-01-26 16:30:36.887 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1449304476 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:30:36.888 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:30:36.888 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8518da91(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T16:30:36.885985400(LocalDateTime), null
2026-01-26 16:30:36.890 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:30:36.893 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d18c80]
2026-01-26 16:30:36.894 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d18c80]
2026-01-26 16:30:36.894 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d18c80]
2026-01-26 16:30:36.894 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d18c80]
2026-01-26 16:30:36.953 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:30:36.954 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f94ff47]
2026-01-26 16:30:36.955 [clientInboundChannel-69] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@526216233 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:30:36.955 [clientInboundChannel-69] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:30:36.957 [clientInboundChannel-69] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8518da91(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T16:30:36.953954200(LocalDateTime), null
2026-01-26 16:30:36.958 [clientInboundChannel-69] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:30:36.961 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f94ff47]
2026-01-26 16:30:36.962 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f94ff47]
2026-01-26 16:30:36.962 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f94ff47]
2026-01-26 16:30:36.963 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f94ff47]
2026-01-26 16:30:36.964 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:30:36.965 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a831860]
2026-01-26 16:30:36.966 [clientInboundChannel-69] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2002424026 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:30:36.966 [clientInboundChannel-69] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:30:36.967 [clientInboundChannel-69] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:30:36.964925900(LocalDateTime), room-8518da91(String)
2026-01-26 16:30:36.970 [clientInboundChannel-69] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:30:36.972 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a831860]
2026-01-26 16:30:36.972 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a831860]
2026-01-26 16:30:36.972 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a831860]
2026-01-26 16:30:36.973 [clientInboundChannel-69] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a831860]
2026-01-26 16:34:34.261 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:34:34.262 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@234b1725]
2026-01-26 16:34:34.263 [clientInboundChannel-79] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@699628629 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:34:34.263 [clientInboundChannel-79] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:34:34.264 [clientInboundChannel-79] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8518da91(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T16:34:34.260872600(LocalDateTime), null
2026-01-26 16:34:34.265 [clientInboundChannel-79] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:34:34.266 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@234b1725]
2026-01-26 16:34:34.267 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@234b1725]
2026-01-26 16:34:34.267 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@234b1725]
2026-01-26 16:34:34.267 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@234b1725]
2026-01-26 16:34:34.269 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:34:34.269 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1738378b]
2026-01-26 16:34:34.269 [clientInboundChannel-79] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1869890430 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:34:34.269 [clientInboundChannel-79] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:34:34.270 [clientInboundChannel-79] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:34:34.269848(LocalDateTime), room-8518da91(String)
2026-01-26 16:34:34.271 [clientInboundChannel-79] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:34:34.273 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1738378b]
2026-01-26 16:34:34.273 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1738378b]
2026-01-26 16:34:34.274 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1738378b]
2026-01-26 16:34:34.274 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1738378b]
2026-01-26 16:34:34.297 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:34:34.297 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74706af9]
2026-01-26 16:34:34.298 [clientInboundChannel-79] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@892380744 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:34:34.298 [clientInboundChannel-79] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:34:34.299 [clientInboundChannel-79] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: WAITING(String), room-8518da91(String)
2026-01-26 16:34:34.302 [clientInboundChannel-79] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 16:34:34.303 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74706af9]
2026-01-26 16:34:34.304 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74706af9]
2026-01-26 16:34:34.304 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74706af9]
2026-01-26 16:34:34.304 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74706af9]
2026-01-26 16:34:34.305 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:34:34.306 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e162d52]
2026-01-26 16:34:34.306 [clientInboundChannel-79] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1442595768 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:34:34.307 [clientInboundChannel-79] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:34:34.307 [clientInboundChannel-79] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8518da91(String), SYSTEM(String), System(String), SYSTEM(String), 상담원 연결을 요청하였습니다. 상담원이 연결될 때까지 잠시만 기다려 주세요.(String), TALK(String), null, 2026-01-26T16:34:34.305834900(LocalDateTime), null
2026-01-26 16:34:34.309 [clientInboundChannel-79] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:34:34.313 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e162d52]
2026-01-26 16:34:34.313 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e162d52]
2026-01-26 16:34:34.313 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e162d52]
2026-01-26 16:34:34.314 [clientInboundChannel-79] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e162d52]
2026-01-26 16:38:06.487 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:38:06.488 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ef7dfd] was not registered for synchronization because synchronization is not active
2026-01-26 16:38:06.489 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1532964780 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will not be managed by Spring
2026-01-26 16:38:06.490 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 16:38:06.491 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 16:38:06.495 [http-nio-28070-exec-8] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 16:38:06.495 [http-nio-28070-exec-8] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 16:38:06.496 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 16:38:06.499 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ef7dfd]
2026-01-26 16:38:09.053 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:38:09.053 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7795b9]
2026-01-26 16:38:09.053 [clientInboundChannel-83] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1263181698 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:38:09.054 [clientInboundChannel-83] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:38:09.054 [clientInboundChannel-83] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8518da91(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결 요청을 취소합니다.(String), CANCEL_HANDOFF(String), apt001(String), 2026-01-26T16:38:09.052138700(LocalDateTime), null
2026-01-26 16:38:09.056 [clientInboundChannel-83] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:38:09.059 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7795b9]
2026-01-26 16:38:09.060 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7795b9]
2026-01-26 16:38:09.060 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7795b9]
2026-01-26 16:38:09.060 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7795b9]
2026-01-26 16:38:09.062 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:38:09.063 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4bf157]
2026-01-26 16:38:09.063 [clientInboundChannel-83] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@728064205 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:38:09.063 [clientInboundChannel-83] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:38:09.064 [clientInboundChannel-83] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:38:09.062111400(LocalDateTime), room-8518da91(String)
2026-01-26 16:38:09.065 [clientInboundChannel-83] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:38:09.066 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4bf157]
2026-01-26 16:38:09.066 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4bf157]
2026-01-26 16:38:09.067 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4bf157]
2026-01-26 16:38:09.067 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4bf157]
2026-01-26 16:38:10.364 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:38:10.365 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b9a787c]
2026-01-26 16:38:10.365 [clientInboundChannel-86] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@715616839 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:38:10.365 [clientInboundChannel-86] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:38:10.366 [clientInboundChannel-86] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8518da91(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T16:38:10.364396600(LocalDateTime), null
2026-01-26 16:38:10.367 [clientInboundChannel-86] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:38:10.369 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b9a787c]
2026-01-26 16:38:10.369 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b9a787c]
2026-01-26 16:38:10.369 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b9a787c]
2026-01-26 16:38:10.369 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b9a787c]
2026-01-26 16:38:10.379 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:38:10.379 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc79896]
2026-01-26 16:38:10.379 [clientInboundChannel-86] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1250462984 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:38:10.380 [clientInboundChannel-86] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:38:10.381 [clientInboundChannel-86] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:38:10.379261300(LocalDateTime), room-8518da91(String)
2026-01-26 16:38:10.382 [clientInboundChannel-86] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:38:10.386 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc79896]
2026-01-26 16:38:10.386 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc79896]
2026-01-26 16:38:10.387 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc79896]
2026-01-26 16:38:10.387 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc79896]
2026-01-26 16:38:50.240 [clientInboundChannel-90] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:38:50.240 [clientInboundChannel-90] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c5d3fa]
2026-01-26 16:38:50.241 [clientInboundChannel-90] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@577651804 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:38:50.242 [clientInboundChannel-90] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:38:50.243 [clientInboundChannel-90] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8518da91(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결 요청을 취소합니다.(String), CANCEL_HANDOFF(String), apt001(String), 2026-01-26T16:38:50.237529800(LocalDateTime), null
2026-01-26 16:38:50.248 [clientInboundChannel-90] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:38:50.253 [clientInboundChannel-90] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c5d3fa]
2026-01-26 16:38:50.254 [clientInboundChannel-90] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c5d3fa]
2026-01-26 16:38:50.258 [clientInboundChannel-90] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c5d3fa]
2026-01-26 16:38:50.259 [clientInboundChannel-90] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c5d3fa]
2026-01-26 16:38:50.262 [clientInboundChannel-90] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:38:50.263 [clientInboundChannel-90] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5abcc873]
2026-01-26 16:38:50.264 [clientInboundChannel-90] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1123311244 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:38:50.265 [clientInboundChannel-90] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:38:50.265 [clientInboundChannel-90] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:38:50.261257600(LocalDateTime), room-8518da91(String)
2026-01-26 16:38:50.267 [clientInboundChannel-90] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:38:50.268 [clientInboundChannel-90] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5abcc873]
2026-01-26 16:38:50.268 [clientInboundChannel-90] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5abcc873]
2026-01-26 16:38:50.268 [clientInboundChannel-90] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5abcc873]
2026-01-26 16:38:50.268 [clientInboundChannel-90] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5abcc873]
2026-01-26 16:38:53.744 [clientInboundChannel-91] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:38:53.745 [clientInboundChannel-91] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df95409]
2026-01-26 16:38:53.745 [clientInboundChannel-91] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@117522297 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:38:53.746 [clientInboundChannel-91] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:38:53.746 [clientInboundChannel-91] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8518da91(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T16:38:53.744294600(LocalDateTime), null
2026-01-26 16:38:53.747 [clientInboundChannel-91] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:38:53.750 [clientInboundChannel-91] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df95409]
2026-01-26 16:38:53.751 [clientInboundChannel-91] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df95409]
2026-01-26 16:38:53.751 [clientInboundChannel-91] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df95409]
2026-01-26 16:38:53.751 [clientInboundChannel-91] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df95409]
2026-01-26 16:38:53.760 [clientInboundChannel-91] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:38:53.760 [clientInboundChannel-91] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59dfca8]
2026-01-26 16:38:53.761 [clientInboundChannel-91] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2113864889 wrapping org.postgresql.jdbc.PgConnection@f5f5faf] will be managed by Spring
2026-01-26 16:38:53.761 [clientInboundChannel-91] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:38:53.762 [clientInboundChannel-91] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:38:53.760467800(LocalDateTime), room-8518da91(String)
2026-01-26 16:38:53.763 [clientInboundChannel-91] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:38:53.765 [clientInboundChannel-91] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59dfca8]
2026-01-26 16:38:53.765 [clientInboundChannel-91] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59dfca8]
2026-01-26 16:38:53.766 [clientInboundChannel-91] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59dfca8]
2026-01-26 16:38:53.766 [clientInboundChannel-91] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59dfca8]
2026-01-26 16:41:54.573 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatHistoryMapper.class]
2026-01-26 16:41:54.574 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatSessionMapper.class]
2026-01-26 16:41:54.575 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\UserAccountMapper.class]
2026-01-26 16:41:54.578 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'aicc.chat.mapper.ChatHistoryMapper' mapperInterface
2026-01-26 16:41:54.581 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatHistoryMapper'.
2026-01-26 16:41:54.581 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatSessionMapper' and 'aicc.chat.mapper.ChatSessionMapper' mapperInterface
2026-01-26 16:41:54.582 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatSessionMapper'.
2026-01-26 16:41:54.582 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userAccountMapper' and 'aicc.chat.mapper.UserAccountMapper' mapperInterface
2026-01-26 16:41:54.584 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'userAccountMapper'.
2026-01-26 16:41:57.132 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Registered plugin: 'aicc.chat.config.MyBatisSqlLogger@644e6a8e'
2026-01-26 16:41:57.310 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatHistoryMapper.xml]'
2026-01-26 16:41:57.342 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatSessionMapper.xml]'
2026-01-26 16:41:57.359 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\UserAccountMapper.xml]'
2026-01-26 16:42:46.313 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:42:46.327 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a1c2aea] was not registered for synchronization because synchronization is not active
2026-01-26 16:42:46.622 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@872074073 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will not be managed by Spring
2026-01-26 16:42:46.631 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 16:42:46.653 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 16:42:46.686 [http-nio-28070-exec-8] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 16:42:46.686 [http-nio-28070-exec-8] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 16:42:46.690 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 16:42:46.709 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a1c2aea]
2026-01-26 16:42:49.520 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:42:49.522 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1c4347]
2026-01-26 16:42:49.524 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1505336666 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:42:49.524 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:42:49.526 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-8c869149(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T16:42:49.510289100(LocalDateTime), null, 2026-01-26T16:42:49.510289100(LocalDateTime), null, null
2026-01-26 16:42:49.534 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 16:42:49.540 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1c4347]
2026-01-26 16:42:49.542 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1c4347]
2026-01-26 16:42:49.542 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1c4347]
2026-01-26 16:42:49.543 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1c4347]
2026-01-26 16:42:49.556 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:42:49.557 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa94cbd]
2026-01-26 16:42:49.558 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1010072445 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:42:49.558 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:42:49.560 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8c869149(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T16:42:49.556019500(LocalDateTime), null
2026-01-26 16:42:49.564 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:42:49.568 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa94cbd]
2026-01-26 16:42:49.570 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa94cbd]
2026-01-26 16:42:49.570 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa94cbd]
2026-01-26 16:42:49.571 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa94cbd]
2026-01-26 16:42:49.746 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:42:49.746 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449a800e]
2026-01-26 16:42:49.747 [clientInboundChannel-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1431282031 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:42:49.747 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:42:49.749 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8c869149(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T16:42:49.746511900(LocalDateTime), null
2026-01-26 16:42:49.752 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:42:49.756 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449a800e]
2026-01-26 16:42:49.756 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449a800e]
2026-01-26 16:42:49.756 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449a800e]
2026-01-26 16:42:49.756 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449a800e]
2026-01-26 16:42:49.757 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:42:49.758 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e19190a]
2026-01-26 16:42:49.758 [clientInboundChannel-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2106936691 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:42:49.758 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:42:49.759 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:42:49.757601100(LocalDateTime), room-8c869149(String)
2026-01-26 16:42:49.765 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:42:49.768 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e19190a]
2026-01-26 16:42:49.768 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e19190a]
2026-01-26 16:42:49.768 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e19190a]
2026-01-26 16:42:49.769 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e19190a]
2026-01-26 16:42:51.641 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:42:51.641 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7e5775] was not registered for synchronization because synchronization is not active
2026-01-26 16:42:51.642 [http-nio-28070-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@789990802 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will not be managed by Spring
2026-01-26 16:42:51.642 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 16:42:51.643 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 16:42:51.645 [http-nio-28070-exec-2] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 16:42:51.646 [http-nio-28070-exec-2] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 16:42:51.646 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 16:42:51.648 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7e5775]
2026-01-26 16:45:28.229 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:45:28.230 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75679141]
2026-01-26 16:45:28.231 [clientInboundChannel-17] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1146676408 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:45:28.232 [clientInboundChannel-17] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:45:28.233 [clientInboundChannel-17] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8c869149(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T16:45:28.228096(LocalDateTime), null
2026-01-26 16:45:28.235 [clientInboundChannel-17] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:45:28.240 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75679141]
2026-01-26 16:45:28.241 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75679141]
2026-01-26 16:45:28.242 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75679141]
2026-01-26 16:45:28.242 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75679141]
2026-01-26 16:45:28.245 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:45:28.245 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15486e0e]
2026-01-26 16:45:28.246 [clientInboundChannel-17] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2075269494 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:45:28.247 [clientInboundChannel-17] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:45:28.248 [clientInboundChannel-17] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:45:28.244051500(LocalDateTime), room-8c869149(String)
2026-01-26 16:45:28.250 [clientInboundChannel-17] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:45:28.254 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15486e0e]
2026-01-26 16:45:28.255 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15486e0e]
2026-01-26 16:45:28.255 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15486e0e]
2026-01-26 16:45:28.256 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15486e0e]
2026-01-26 16:45:28.271 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:45:28.272 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@baff1fb]
2026-01-26 16:45:28.273 [clientInboundChannel-17] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1646241149 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:45:28.273 [clientInboundChannel-17] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:45:28.275 [clientInboundChannel-17] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: WAITING(String), room-8c869149(String)
2026-01-26 16:45:28.278 [clientInboundChannel-17] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 16:45:28.281 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@baff1fb]
2026-01-26 16:45:28.283 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@baff1fb]
2026-01-26 16:45:28.283 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@baff1fb]
2026-01-26 16:45:28.283 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@baff1fb]
2026-01-26 16:45:28.285 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:45:28.285 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d77e8c]
2026-01-26 16:45:28.286 [clientInboundChannel-17] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@625643875 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:45:28.287 [clientInboundChannel-17] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:45:28.288 [clientInboundChannel-17] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8c869149(String), SYSTEM(String), System(String), SYSTEM(String), 상담원 연결을 요청하였습니다. 상담원이 연결될 때까지 잠시만 기다려 주세요.(String), TALK(String), null, 2026-01-26T16:45:28.285939600(LocalDateTime), null
2026-01-26 16:45:28.290 [clientInboundChannel-17] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:45:28.294 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d77e8c]
2026-01-26 16:45:28.295 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d77e8c]
2026-01-26 16:45:28.296 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d77e8c]
2026-01-26 16:45:28.296 [clientInboundChannel-17] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d77e8c]
2026-01-26 16:45:53.735 [clientInboundChannel-20] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:45:53.735 [clientInboundChannel-20] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@503ed6d8]
2026-01-26 16:45:53.736 [clientInboundChannel-20] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2054719049 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:45:53.737 [clientInboundChannel-20] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:45:53.741 [clientInboundChannel-20] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8c869149(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결 요청을 취소합니다.(String), CANCEL_HANDOFF(String), apt001(String), 2026-01-26T16:45:53.734302200(LocalDateTime), null
2026-01-26 16:45:53.744 [clientInboundChannel-20] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:45:53.748 [clientInboundChannel-20] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@503ed6d8]
2026-01-26 16:45:53.749 [clientInboundChannel-20] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@503ed6d8]
2026-01-26 16:45:53.749 [clientInboundChannel-20] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@503ed6d8]
2026-01-26 16:45:53.750 [clientInboundChannel-20] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@503ed6d8]
2026-01-26 16:45:53.752 [clientInboundChannel-20] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:45:53.752 [clientInboundChannel-20] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715da446]
2026-01-26 16:45:53.753 [clientInboundChannel-20] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@615976397 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:45:53.753 [clientInboundChannel-20] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:45:53.754 [clientInboundChannel-20] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:45:53.751257500(LocalDateTime), room-8c869149(String)
2026-01-26 16:45:53.757 [clientInboundChannel-20] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:45:53.759 [clientInboundChannel-20] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715da446]
2026-01-26 16:45:53.760 [clientInboundChannel-20] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715da446]
2026-01-26 16:45:53.761 [clientInboundChannel-20] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715da446]
2026-01-26 16:45:53.761 [clientInboundChannel-20] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715da446]
2026-01-26 16:45:59.201 [clientInboundChannel-24] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:45:59.201 [clientInboundChannel-24] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce6a116]
2026-01-26 16:45:59.202 [clientInboundChannel-24] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@907987558 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:45:59.202 [clientInboundChannel-24] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:45:59.203 [clientInboundChannel-24] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8c869149(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T16:45:59.200686900(LocalDateTime), null
2026-01-26 16:45:59.204 [clientInboundChannel-24] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:45:59.209 [clientInboundChannel-24] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce6a116]
2026-01-26 16:45:59.210 [clientInboundChannel-24] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce6a116]
2026-01-26 16:45:59.210 [clientInboundChannel-24] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce6a116]
2026-01-26 16:45:59.211 [clientInboundChannel-24] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce6a116]
2026-01-26 16:45:59.212 [clientInboundChannel-24] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:45:59.212 [clientInboundChannel-24] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1333bd8e]
2026-01-26 16:45:59.213 [clientInboundChannel-24] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1554737106 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:45:59.213 [clientInboundChannel-24] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:45:59.214 [clientInboundChannel-24] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:45:59.212654200(LocalDateTime), room-8c869149(String)
2026-01-26 16:45:59.216 [clientInboundChannel-24] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:45:59.218 [clientInboundChannel-24] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1333bd8e]
2026-01-26 16:45:59.218 [clientInboundChannel-24] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1333bd8e]
2026-01-26 16:45:59.219 [clientInboundChannel-24] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1333bd8e]
2026-01-26 16:45:59.219 [clientInboundChannel-24] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1333bd8e]
2026-01-26 16:48:18.650 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:18.650 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1c5c1f]
2026-01-26 16:48:18.651 [clientInboundChannel-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1373910895 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:18.652 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:48:18.653 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8c869149(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결 요청을 취소합니다.(String), CANCEL_HANDOFF(String), apt001(String), 2026-01-26T16:48:18.649921700(LocalDateTime), null
2026-01-26 16:48:18.654 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:48:18.657 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1c5c1f]
2026-01-26 16:48:18.657 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1c5c1f]
2026-01-26 16:48:18.657 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1c5c1f]
2026-01-26 16:48:18.657 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1c5c1f]
2026-01-26 16:48:18.659 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:18.662 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4610d098]
2026-01-26 16:48:18.663 [clientInboundChannel-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1318316862 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:18.663 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:48:18.667 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:48:18.659890400(LocalDateTime), room-8c869149(String)
2026-01-26 16:48:18.670 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:48:18.672 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4610d098]
2026-01-26 16:48:18.672 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4610d098]
2026-01-26 16:48:18.673 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4610d098]
2026-01-26 16:48:18.673 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4610d098]
2026-01-26 16:48:31.167 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:31.168 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1a5f8d]
2026-01-26 16:48:31.169 [clientInboundChannel-35] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@350369021 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:31.170 [clientInboundChannel-35] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:48:31.171 [clientInboundChannel-35] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8c869149(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T16:48:31.166516900(LocalDateTime), null
2026-01-26 16:48:31.172 [clientInboundChannel-35] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:48:31.176 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1a5f8d]
2026-01-26 16:48:31.176 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1a5f8d]
2026-01-26 16:48:31.176 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1a5f8d]
2026-01-26 16:48:31.177 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1a5f8d]
2026-01-26 16:48:31.187 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:31.187 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bf27b04]
2026-01-26 16:48:31.188 [clientInboundChannel-35] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1782129802 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:31.189 [clientInboundChannel-35] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:48:31.190 [clientInboundChannel-35] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:48:31.186164(LocalDateTime), room-8c869149(String)
2026-01-26 16:48:31.192 [clientInboundChannel-35] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:48:31.195 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bf27b04]
2026-01-26 16:48:31.195 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bf27b04]
2026-01-26 16:48:31.196 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bf27b04]
2026-01-26 16:48:31.196 [clientInboundChannel-35] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bf27b04]
2026-01-26 16:48:39.754 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:39.754 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25962d59] was not registered for synchronization because synchronization is not active
2026-01-26 16:48:39.755 [http-nio-28070-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@466696923 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will not be managed by Spring
2026-01-26 16:48:39.756 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 16:48:39.757 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 16:48:39.759 [http-nio-28070-exec-9] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 16:48:39.759 [http-nio-28070-exec-9] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 16:48:39.761 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 16:48:39.763 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25962d59]
2026-01-26 16:48:42.546 [clientInboundChannel-47] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:42.547 [clientInboundChannel-47] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d057d6d]
2026-01-26 16:48:42.547 [clientInboundChannel-47] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2013074973 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:42.548 [clientInboundChannel-47] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:48:42.549 [clientInboundChannel-47] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-8c869149(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T16:48:42.545624500(LocalDateTime), null
2026-01-26 16:48:42.550 [clientInboundChannel-47] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:48:42.553 [clientInboundChannel-47] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d057d6d]
2026-01-26 16:48:42.554 [clientInboundChannel-47] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d057d6d]
2026-01-26 16:48:42.554 [clientInboundChannel-47] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d057d6d]
2026-01-26 16:48:42.554 [clientInboundChannel-47] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d057d6d]
2026-01-26 16:48:42.556 [clientInboundChannel-47] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:42.556 [clientInboundChannel-47] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64476ba1]
2026-01-26 16:48:42.557 [clientInboundChannel-47] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@475334515 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:42.557 [clientInboundChannel-47] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:48:42.558 [clientInboundChannel-47] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:48:42.556599(LocalDateTime), room-8c869149(String)
2026-01-26 16:48:42.559 [clientInboundChannel-47] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:48:42.560 [clientInboundChannel-47] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64476ba1]
2026-01-26 16:48:42.560 [clientInboundChannel-47] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64476ba1]
2026-01-26 16:48:42.560 [clientInboundChannel-47] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64476ba1]
2026-01-26 16:48:42.560 [clientInboundChannel-47] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64476ba1]
2026-01-26 16:48:46.416 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:46.416 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149b20e5]
2026-01-26 16:48:46.417 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@362756351 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:46.423 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:48:46.425 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-a59a2b5c(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T16:48:46.415791200(LocalDateTime), null, 2026-01-26T16:48:46.415791200(LocalDateTime), null, null
2026-01-26 16:48:46.426 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 16:48:46.429 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149b20e5]
2026-01-26 16:48:46.429 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149b20e5]
2026-01-26 16:48:46.430 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149b20e5]
2026-01-26 16:48:46.430 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149b20e5]
2026-01-26 16:48:46.444 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:46.445 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@273abd00]
2026-01-26 16:48:46.446 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1715910842 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:46.446 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:48:46.447 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a59a2b5c(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T16:48:46.444091600(LocalDateTime), null
2026-01-26 16:48:46.449 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:48:46.452 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@273abd00]
2026-01-26 16:48:46.453 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@273abd00]
2026-01-26 16:48:46.454 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@273abd00]
2026-01-26 16:48:46.454 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@273abd00]
2026-01-26 16:48:46.520 [clientInboundChannel-33] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:46.520 [clientInboundChannel-33] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f3f1685]
2026-01-26 16:48:46.521 [clientInboundChannel-33] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@503454910 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:46.521 [clientInboundChannel-33] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:48:46.522 [clientInboundChannel-33] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a59a2b5c(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T16:48:46.519366700(LocalDateTime), null
2026-01-26 16:48:46.524 [clientInboundChannel-33] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:48:46.526 [clientInboundChannel-33] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f3f1685]
2026-01-26 16:48:46.528 [clientInboundChannel-33] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f3f1685]
2026-01-26 16:48:46.528 [clientInboundChannel-33] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f3f1685]
2026-01-26 16:48:46.528 [clientInboundChannel-33] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f3f1685]
2026-01-26 16:48:46.529 [clientInboundChannel-33] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:46.530 [clientInboundChannel-33] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd6e7b2]
2026-01-26 16:48:46.530 [clientInboundChannel-33] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2116936689 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:46.530 [clientInboundChannel-33] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:48:46.531 [clientInboundChannel-33] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:48:46.529278900(LocalDateTime), room-a59a2b5c(String)
2026-01-26 16:48:46.532 [clientInboundChannel-33] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:48:46.533 [clientInboundChannel-33] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd6e7b2]
2026-01-26 16:48:46.534 [clientInboundChannel-33] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd6e7b2]
2026-01-26 16:48:46.534 [clientInboundChannel-33] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd6e7b2]
2026-01-26 16:48:46.534 [clientInboundChannel-33] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd6e7b2]
2026-01-26 16:48:51.466 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:51.466 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@502cb3b1]
2026-01-26 16:48:51.467 [http-nio-28070-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@841027179 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:51.467 [http-nio-28070-exec-2] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:48:51.468 [http-nio-28070-exec-2] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: AGENT(String), room-a59a2b5c(String)
2026-01-26 16:48:51.471 [http-nio-28070-exec-2] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 16:48:51.476 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@502cb3b1]
2026-01-26 16:48:51.479 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@502cb3b1]
2026-01-26 16:48:51.480 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@502cb3b1]
2026-01-26 16:48:51.481 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@502cb3b1]
2026-01-26 16:48:51.484 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:51.485 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17db57c6]
2026-01-26 16:48:51.485 [http-nio-28070-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2096008192 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:51.488 [http-nio-28070-exec-2] DEBUG a.c.m.C.updateAssignedAgent - ==>  Preparing: UPDATE chat_session SET assigned_agent = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:48:51.493 [http-nio-28070-exec-2] DEBUG a.c.m.C.updateAssignedAgent - ==> Parameters: 상담원-01(String), room-a59a2b5c(String)
2026-01-26 16:48:51.496 [http-nio-28070-exec-2] DEBUG a.c.m.C.updateAssignedAgent - <==    Updates: 1
2026-01-26 16:48:51.498 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17db57c6]
2026-01-26 16:48:51.498 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17db57c6]
2026-01-26 16:48:51.499 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17db57c6]
2026-01-26 16:48:51.499 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17db57c6]
2026-01-26 16:48:51.501 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:51.501 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0de34e]
2026-01-26 16:48:51.506 [http-nio-28070-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@402130569 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:51.507 [http-nio-28070-exec-2] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:48:51.508 [http-nio-28070-exec-2] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a59a2b5c(String), SYSTEM(String), System(String), SYSTEM(String), 상담원-01 상담원과 연결되었습니다.(String), TALK(String), null, 2026-01-26T16:48:51.500122500(LocalDateTime), null
2026-01-26 16:48:51.509 [http-nio-28070-exec-2] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:48:51.516 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0de34e]
2026-01-26 16:48:51.517 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0de34e]
2026-01-26 16:48:51.517 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0de34e]
2026-01-26 16:48:51.518 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0de34e]
2026-01-26 16:48:55.540 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:55.541 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d5720de]
2026-01-26 16:48:55.541 [clientInboundChannel-46] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1202670510 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:55.542 [clientInboundChannel-46] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:48:55.542 [clientInboundChannel-46] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a59a2b5c(String), agent01(String), 상담원-01(String), AGENT(String), ㅇㅇㅇ(String), TALK(String), apt001(String), 2026-01-26T16:48:55.539332600(LocalDateTime), null
2026-01-26 16:48:55.543 [clientInboundChannel-46] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:48:55.545 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d5720de]
2026-01-26 16:48:55.546 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d5720de]
2026-01-26 16:48:55.546 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d5720de]
2026-01-26 16:48:55.546 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d5720de]
2026-01-26 16:48:55.554 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:48:55.554 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76884c64]
2026-01-26 16:48:55.555 [clientInboundChannel-46] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@237687487 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:48:55.555 [clientInboundChannel-46] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:48:55.555 [clientInboundChannel-46] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:48:55.554681(LocalDateTime), room-a59a2b5c(String)
2026-01-26 16:48:55.556 [clientInboundChannel-46] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:48:55.558 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76884c64]
2026-01-26 16:48:55.559 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76884c64]
2026-01-26 16:48:55.559 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76884c64]
2026-01-26 16:48:55.559 [clientInboundChannel-46] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76884c64]
2026-01-26 16:50:27.706 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:50:27.707 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f01cdc4]
2026-01-26 16:50:27.708 [clientInboundChannel-48] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1102422617 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:50:27.709 [clientInboundChannel-48] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:50:27.710 [clientInboundChannel-48] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a59a2b5c(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원님 안녕!(String), TALK(String), apt001(String), 2026-01-26T16:50:27.705287300(LocalDateTime), null
2026-01-26 16:50:27.711 [clientInboundChannel-48] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:50:27.721 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f01cdc4]
2026-01-26 16:50:27.721 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f01cdc4]
2026-01-26 16:50:27.722 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f01cdc4]
2026-01-26 16:50:27.722 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f01cdc4]
2026-01-26 16:50:27.723 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:50:27.723 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f1b5f8]
2026-01-26 16:50:27.724 [clientInboundChannel-48] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@274826905 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:50:27.724 [clientInboundChannel-48] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:50:27.727 [clientInboundChannel-48] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:50:27.723904900(LocalDateTime), room-a59a2b5c(String)
2026-01-26 16:50:27.728 [clientInboundChannel-48] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:50:27.730 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f1b5f8]
2026-01-26 16:50:27.730 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f1b5f8]
2026-01-26 16:50:27.731 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f1b5f8]
2026-01-26 16:50:27.731 [clientInboundChannel-48] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f1b5f8]
2026-01-26 16:50:27.958 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:50:27.959 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3487534b]
2026-01-26 16:50:27.959 [reactor-http-nio-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1307709930 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:50:27.960 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:50:27.961 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a59a2b5c(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T16:50:27.958276700(LocalDateTime), null
2026-01-26 16:50:27.962 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:50:27.965 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3487534b]
2026-01-26 16:50:27.966 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3487534b]
2026-01-26 16:50:27.966 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3487534b]
2026-01-26 16:50:27.966 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3487534b]
2026-01-26 16:50:27.968 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:50:27.968 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554f7b81]
2026-01-26 16:50:27.969 [reactor-http-nio-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1780599785 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:50:27.970 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:50:27.970 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:50:27.968250300(LocalDateTime), room-a59a2b5c(String)
2026-01-26 16:50:27.972 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:50:27.973 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554f7b81]
2026-01-26 16:50:27.973 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554f7b81]
2026-01-26 16:50:27.974 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554f7b81]
2026-01-26 16:50:27.974 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554f7b81]
2026-01-26 16:50:48.203 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:50:48.203 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49980e00]
2026-01-26 16:50:48.204 [clientInboundChannel-51] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1284580945 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:50:48.204 [clientInboundChannel-51] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 16:50:48.205 [clientInboundChannel-51] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a59a2b5c(String), agent01(String), 상담원-01(String), AGENT(String), 하이 안녕!(String), TALK(String), apt001(String), 2026-01-26T16:50:48.202833100(LocalDateTime), null
2026-01-26 16:50:48.205 [clientInboundChannel-51] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 16:50:48.208 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49980e00]
2026-01-26 16:50:48.208 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49980e00]
2026-01-26 16:50:48.208 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49980e00]
2026-01-26 16:50:48.208 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49980e00]
2026-01-26 16:50:48.217 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 16:50:48.218 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29536671]
2026-01-26 16:50:48.218 [clientInboundChannel-51] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@800675933 wrapping org.postgresql.jdbc.PgConnection@727d26fa] will be managed by Spring
2026-01-26 16:50:48.218 [clientInboundChannel-51] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 16:50:48.219 [clientInboundChannel-51] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T16:50:48.217524300(LocalDateTime), room-a59a2b5c(String)
2026-01-26 16:50:48.220 [clientInboundChannel-51] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 16:50:48.221 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29536671]
2026-01-26 16:50:48.221 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29536671]
2026-01-26 16:50:48.221 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29536671]
2026-01-26 16:50:48.221 [clientInboundChannel-51] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29536671]
2026-01-26 17:20:00.046 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:20:00.047 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21c84c04] was not registered for synchronization because synchronization is not active
2026-01-26 17:20:00.050 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1114904921 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will not be managed by Spring
2026-01-26 17:20:00.051 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 17:20:00.053 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 17:20:00.066 [http-nio-28070-exec-3] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 17:20:00.067 [http-nio-28070-exec-3] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 17:20:00.068 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 17:20:00.072 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21c84c04]
2026-01-26 17:20:05.363 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:20:05.363 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@464dcdc4] was not registered for synchronization because synchronization is not active
2026-01-26 17:20:05.364 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@629543269 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will not be managed by Spring
2026-01-26 17:20:05.365 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 17:20:05.366 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 17:20:05.367 [http-nio-28070-exec-3] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 17:20:05.368 [http-nio-28070-exec-3] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 17:20:05.369 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 17:20:05.373 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@464dcdc4]
2026-01-26 17:20:08.947 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:20:08.948 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4624eb0f] was not registered for synchronization because synchronization is not active
2026-01-26 17:20:08.949 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1988240345 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will not be managed by Spring
2026-01-26 17:20:08.949 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 17:20:08.950 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 17:20:08.952 [http-nio-28070-exec-3] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 17:20:08.952 [http-nio-28070-exec-3] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 17:20:08.953 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 17:20:08.954 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4624eb0f]
2026-01-26 17:20:14.757 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:20:14.757 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f08fee7] was not registered for synchronization because synchronization is not active
2026-01-26 17:20:14.759 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@578800427 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will not be managed by Spring
2026-01-26 17:20:14.759 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 17:20:14.760 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 17:20:14.761 [http-nio-28070-exec-3] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 17:20:14.762 [http-nio-28070-exec-3] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 17:20:14.763 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 17:20:14.765 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f08fee7]
2026-01-26 17:20:28.297 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:20:28.298 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43e230f8] was not registered for synchronization because synchronization is not active
2026-01-26 17:20:28.299 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1545499156 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will not be managed by Spring
2026-01-26 17:20:28.299 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 17:20:28.299 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 17:20:28.301 [http-nio-28070-exec-3] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 17:20:28.302 [http-nio-28070-exec-3] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 17:20:28.303 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 17:20:28.305 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43e230f8]
2026-01-26 17:26:07.399 [clientInboundChannel-73] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:07.400 [clientInboundChannel-73] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e04c392]
2026-01-26 17:26:07.401 [clientInboundChannel-73] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@83667170 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:07.401 [clientInboundChannel-73] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:26:07.403 [clientInboundChannel-73] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a59a2b5c(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T17:26:07.392555700(LocalDateTime), null
2026-01-26 17:26:07.407 [clientInboundChannel-73] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:26:07.410 [clientInboundChannel-73] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e04c392]
2026-01-26 17:26:07.410 [clientInboundChannel-73] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e04c392]
2026-01-26 17:26:07.411 [clientInboundChannel-73] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e04c392]
2026-01-26 17:26:07.411 [clientInboundChannel-73] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e04c392]
2026-01-26 17:26:07.414 [clientInboundChannel-73] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:07.415 [clientInboundChannel-73] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70f5e6d0]
2026-01-26 17:26:07.416 [clientInboundChannel-73] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1689670405 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:07.416 [clientInboundChannel-73] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:26:07.416 [clientInboundChannel-73] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:26:07.414497300(LocalDateTime), room-a59a2b5c(String)
2026-01-26 17:26:07.424 [clientInboundChannel-73] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:26:07.426 [clientInboundChannel-73] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70f5e6d0]
2026-01-26 17:26:07.426 [clientInboundChannel-73] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70f5e6d0]
2026-01-26 17:26:07.426 [clientInboundChannel-73] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70f5e6d0]
2026-01-26 17:26:07.426 [clientInboundChannel-73] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70f5e6d0]
2026-01-26 17:26:10.708 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:10.709 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58d7fba3]
2026-01-26 17:26:10.709 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@79023521 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:10.710 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:26:10.711 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-d5c026a4(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T17:26:10.708119600(LocalDateTime), null, 2026-01-26T17:26:10.708119600(LocalDateTime), null, null
2026-01-26 17:26:10.713 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 17:26:10.716 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58d7fba3]
2026-01-26 17:26:10.717 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58d7fba3]
2026-01-26 17:26:10.717 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58d7fba3]
2026-01-26 17:26:10.717 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58d7fba3]
2026-01-26 17:26:10.730 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:10.730 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7139ef96]
2026-01-26 17:26:10.731 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1873226744 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:10.732 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:26:10.733 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T17:26:10.729062600(LocalDateTime), null
2026-01-26 17:26:10.735 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:26:10.737 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7139ef96]
2026-01-26 17:26:10.738 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7139ef96]
2026-01-26 17:26:10.738 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7139ef96]
2026-01-26 17:26:10.738 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7139ef96]
2026-01-26 17:26:10.810 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:10.811 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74ceb748]
2026-01-26 17:26:10.812 [clientInboundChannel-88] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2117524536 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:10.813 [clientInboundChannel-88] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:26:10.815 [clientInboundChannel-88] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T17:26:10.809845500(LocalDateTime), null
2026-01-26 17:26:10.817 [clientInboundChannel-88] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:26:10.820 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74ceb748]
2026-01-26 17:26:10.821 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74ceb748]
2026-01-26 17:26:10.821 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74ceb748]
2026-01-26 17:26:10.822 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74ceb748]
2026-01-26 17:26:10.823 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:10.824 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a41d943]
2026-01-26 17:26:10.824 [clientInboundChannel-88] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1113227161 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:10.824 [clientInboundChannel-88] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:26:10.825 [clientInboundChannel-88] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:26:10.823807400(LocalDateTime), room-d5c026a4(String)
2026-01-26 17:26:10.826 [clientInboundChannel-88] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:26:10.828 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a41d943]
2026-01-26 17:26:10.829 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a41d943]
2026-01-26 17:26:10.829 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a41d943]
2026-01-26 17:26:10.829 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a41d943]
2026-01-26 17:26:22.069 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:22.070 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d65c369]
2026-01-26 17:26:22.071 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1722956717 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:22.072 [http-nio-28070-exec-4] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:26:22.073 [http-nio-28070-exec-4] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: AGENT(String), room-d5c026a4(String)
2026-01-26 17:26:22.075 [http-nio-28070-exec-4] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 17:26:22.078 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d65c369]
2026-01-26 17:26:22.079 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d65c369]
2026-01-26 17:26:22.079 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d65c369]
2026-01-26 17:26:22.080 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d65c369]
2026-01-26 17:26:22.093 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:22.094 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30914489]
2026-01-26 17:26:22.095 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1433839576 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:22.095 [http-nio-28070-exec-4] DEBUG a.c.m.C.updateAssignedAgent - ==>  Preparing: UPDATE chat_session SET assigned_agent = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:26:22.096 [http-nio-28070-exec-4] DEBUG a.c.m.C.updateAssignedAgent - ==> Parameters: 상담원-01(String), room-d5c026a4(String)
2026-01-26 17:26:22.098 [http-nio-28070-exec-4] DEBUG a.c.m.C.updateAssignedAgent - <==    Updates: 1
2026-01-26 17:26:22.138 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30914489]
2026-01-26 17:26:22.146 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30914489]
2026-01-26 17:26:22.146 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30914489]
2026-01-26 17:26:22.147 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30914489]
2026-01-26 17:26:22.149 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:22.149 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@692b8756]
2026-01-26 17:26:22.150 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1598091293 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:22.151 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:26:22.152 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), SYSTEM(String), System(String), SYSTEM(String), 상담원-01 상담원과 연결되었습니다.(String), TALK(String), null, 2026-01-26T17:26:22.148536(LocalDateTime), null
2026-01-26 17:26:22.154 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:26:22.157 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@692b8756]
2026-01-26 17:26:22.158 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@692b8756]
2026-01-26 17:26:22.158 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@692b8756]
2026-01-26 17:26:22.158 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@692b8756]
2026-01-26 17:26:54.410 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:54.411 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@210ca61f]
2026-01-26 17:26:54.411 [clientInboundChannel-82] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@737463663 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:54.412 [clientInboundChannel-82] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:26:54.412 [clientInboundChannel-82] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), agent01(String), 상담원-01(String), AGENT(String), ㅇ(String), TALK(String), apt001(String), 2026-01-26T17:26:54.410907(LocalDateTime), null
2026-01-26 17:26:54.414 [clientInboundChannel-82] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:26:54.417 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@210ca61f]
2026-01-26 17:26:54.418 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@210ca61f]
2026-01-26 17:26:54.418 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@210ca61f]
2026-01-26 17:26:54.418 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@210ca61f]
2026-01-26 17:26:54.420 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:54.420 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52c018e9]
2026-01-26 17:26:54.421 [clientInboundChannel-82] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1438847090 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:54.421 [clientInboundChannel-82] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:26:54.421 [clientInboundChannel-82] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:26:54.420915900(LocalDateTime), room-d5c026a4(String)
2026-01-26 17:26:54.422 [clientInboundChannel-82] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:26:54.424 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52c018e9]
2026-01-26 17:26:54.424 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52c018e9]
2026-01-26 17:26:54.424 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52c018e9]
2026-01-26 17:26:54.425 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52c018e9]
2026-01-26 17:26:57.780 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:57.781 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4add716]
2026-01-26 17:26:57.781 [clientInboundChannel-86] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@240499814 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:57.781 [clientInboundChannel-86] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:26:57.782 [clientInboundChannel-86] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), agent01(String), 상담원-01(String), AGENT(String), ㅇ(String), TALK(String), apt001(String), 2026-01-26T17:26:57.779380600(LocalDateTime), null
2026-01-26 17:26:57.783 [clientInboundChannel-86] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:26:57.786 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4add716]
2026-01-26 17:26:57.787 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4add716]
2026-01-26 17:26:57.787 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4add716]
2026-01-26 17:26:57.787 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4add716]
2026-01-26 17:26:57.789 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:57.790 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5943fd04]
2026-01-26 17:26:57.790 [clientInboundChannel-86] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1224042475 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:57.790 [clientInboundChannel-86] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:26:57.791 [clientInboundChannel-86] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:26:57.789356800(LocalDateTime), room-d5c026a4(String)
2026-01-26 17:26:57.793 [clientInboundChannel-86] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:26:57.794 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5943fd04]
2026-01-26 17:26:57.795 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5943fd04]
2026-01-26 17:26:57.795 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5943fd04]
2026-01-26 17:26:57.795 [clientInboundChannel-86] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5943fd04]
2026-01-26 17:26:59.527 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:59.527 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f24f334]
2026-01-26 17:26:59.528 [clientInboundChannel-88] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1499337099 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:59.528 [clientInboundChannel-88] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:26:59.529 [clientInboundChannel-88] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), agent01(String), 상담원-01(String), AGENT(String), ㅇ(String), TALK(String), apt001(String), 2026-01-26T17:26:59.526727900(LocalDateTime), null
2026-01-26 17:26:59.530 [clientInboundChannel-88] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:26:59.531 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f24f334]
2026-01-26 17:26:59.532 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f24f334]
2026-01-26 17:26:59.532 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f24f334]
2026-01-26 17:26:59.532 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f24f334]
2026-01-26 17:26:59.534 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:26:59.534 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172078e2]
2026-01-26 17:26:59.535 [clientInboundChannel-88] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1048514261 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:26:59.535 [clientInboundChannel-88] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:26:59.536 [clientInboundChannel-88] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:26:59.534710500(LocalDateTime), room-d5c026a4(String)
2026-01-26 17:26:59.538 [clientInboundChannel-88] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:26:59.540 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172078e2]
2026-01-26 17:26:59.540 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172078e2]
2026-01-26 17:26:59.541 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172078e2]
2026-01-26 17:26:59.541 [clientInboundChannel-88] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172078e2]
2026-01-26 17:27:01.178 [clientInboundChannel-77] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:27:01.178 [clientInboundChannel-77] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7795b9]
2026-01-26 17:27:01.179 [clientInboundChannel-77] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1263181698 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:27:01.179 [clientInboundChannel-77] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:27:01.179 [clientInboundChannel-77] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), agent01(String), 상담원-01(String), AGENT(String), ㅇ(String), TALK(String), apt001(String), 2026-01-26T17:27:01.177821700(LocalDateTime), null
2026-01-26 17:27:01.180 [clientInboundChannel-77] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:27:01.182 [clientInboundChannel-77] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7795b9]
2026-01-26 17:27:01.183 [clientInboundChannel-77] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7795b9]
2026-01-26 17:27:01.183 [clientInboundChannel-77] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7795b9]
2026-01-26 17:27:01.184 [clientInboundChannel-77] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7795b9]
2026-01-26 17:27:01.185 [clientInboundChannel-77] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:27:01.186 [clientInboundChannel-77] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4bf157]
2026-01-26 17:27:01.186 [clientInboundChannel-77] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@728064205 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:27:01.187 [clientInboundChannel-77] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:27:01.187 [clientInboundChannel-77] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:27:01.185798700(LocalDateTime), room-d5c026a4(String)
2026-01-26 17:27:01.189 [clientInboundChannel-77] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:27:01.190 [clientInboundChannel-77] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4bf157]
2026-01-26 17:27:01.191 [clientInboundChannel-77] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4bf157]
2026-01-26 17:27:01.191 [clientInboundChannel-77] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4bf157]
2026-01-26 17:27:01.191 [clientInboundChannel-77] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4bf157]
2026-01-26 17:27:03.765 [clientInboundChannel-80] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:27:03.765 [clientInboundChannel-80] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fddebe4]
2026-01-26 17:27:03.765 [clientInboundChannel-80] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1054925279 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:27:03.765 [clientInboundChannel-80] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:27:03.766 [clientInboundChannel-80] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅇ(String), TALK(String), apt001(String), 2026-01-26T17:27:03.764674800(LocalDateTime), null
2026-01-26 17:27:03.767 [clientInboundChannel-80] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:27:03.770 [clientInboundChannel-80] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fddebe4]
2026-01-26 17:27:03.771 [clientInboundChannel-80] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fddebe4]
2026-01-26 17:27:03.771 [clientInboundChannel-80] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fddebe4]
2026-01-26 17:27:03.771 [clientInboundChannel-80] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fddebe4]
2026-01-26 17:27:03.772 [clientInboundChannel-80] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:27:03.773 [clientInboundChannel-80] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9458d8]
2026-01-26 17:27:03.773 [clientInboundChannel-80] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1590632080 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:27:03.773 [clientInboundChannel-80] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:27:03.774 [clientInboundChannel-80] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:27:03.772655500(LocalDateTime), room-d5c026a4(String)
2026-01-26 17:27:03.775 [clientInboundChannel-80] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:27:03.776 [clientInboundChannel-80] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9458d8]
2026-01-26 17:27:03.776 [clientInboundChannel-80] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9458d8]
2026-01-26 17:27:03.776 [clientInboundChannel-80] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9458d8]
2026-01-26 17:27:03.776 [clientInboundChannel-80] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9458d8]
2026-01-26 17:27:05.534 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:27:05.534 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cdc8592]
2026-01-26 17:27:05.534 [clientInboundChannel-83] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1843498921 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:27:05.535 [clientInboundChannel-83] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:27:05.536 [clientInboundChannel-83] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅇ(String), TALK(String), apt001(String), 2026-01-26T17:27:05.533008800(LocalDateTime), null
2026-01-26 17:27:05.536 [clientInboundChannel-83] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:27:05.539 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cdc8592]
2026-01-26 17:27:05.539 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cdc8592]
2026-01-26 17:27:05.540 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cdc8592]
2026-01-26 17:27:05.540 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cdc8592]
2026-01-26 17:27:05.541 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:27:05.542 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc664cb]
2026-01-26 17:27:05.542 [clientInboundChannel-83] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@231633126 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:27:05.543 [clientInboundChannel-83] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:27:05.543 [clientInboundChannel-83] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:27:05.541985600(LocalDateTime), room-d5c026a4(String)
2026-01-26 17:27:05.544 [clientInboundChannel-83] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:27:05.546 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc664cb]
2026-01-26 17:27:05.546 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc664cb]
2026-01-26 17:27:05.546 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc664cb]
2026-01-26 17:27:05.546 [clientInboundChannel-83] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc664cb]
2026-01-26 17:27:07.859 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:27:07.859 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c43329]
2026-01-26 17:27:07.860 [clientInboundChannel-82] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1192887026 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:27:07.860 [clientInboundChannel-82] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:27:07.861 [clientInboundChannel-82] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), agent01(String), 상담원-01(String), AGENT(String), ㅇ(String), TALK(String), apt001(String), 2026-01-26T17:27:07.858506300(LocalDateTime), null
2026-01-26 17:27:07.862 [clientInboundChannel-82] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:27:07.864 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c43329]
2026-01-26 17:27:07.865 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c43329]
2026-01-26 17:27:07.865 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c43329]
2026-01-26 17:27:07.865 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c43329]
2026-01-26 17:27:07.867 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:27:07.867 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f11ef32]
2026-01-26 17:27:07.868 [clientInboundChannel-82] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@481441988 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:27:07.868 [clientInboundChannel-82] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:27:07.868 [clientInboundChannel-82] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:27:07.867481200(LocalDateTime), room-d5c026a4(String)
2026-01-26 17:27:07.870 [clientInboundChannel-82] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:27:07.873 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f11ef32]
2026-01-26 17:27:07.877 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f11ef32]
2026-01-26 17:27:07.878 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f11ef32]
2026-01-26 17:27:07.879 [clientInboundChannel-82] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f11ef32]
2026-01-26 17:28:36.384 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:28:36.386 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412b1666]
2026-01-26 17:28:36.387 [http-nio-28070-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1068756529 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:28:36.387 [http-nio-28070-exec-1] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:28:36.388 [http-nio-28070-exec-1] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: CLOSED(String), room-d5c026a4(String)
2026-01-26 17:28:36.390 [http-nio-28070-exec-1] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 17:28:36.392 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412b1666]
2026-01-26 17:28:36.393 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412b1666]
2026-01-26 17:28:36.393 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412b1666]
2026-01-26 17:28:36.393 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412b1666]
2026-01-26 17:28:36.394 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:28:36.395 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412c63df]
2026-01-26 17:28:36.395 [http-nio-28070-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1627830760 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:28:36.396 [http-nio-28070-exec-1] DEBUG a.c.m.C.updateEndedAt - ==>  Preparing: UPDATE chat_session SET ended_at = ?, status = 'CLOSED', updated_at = NOW() WHERE room_id = ?
2026-01-26 17:28:36.397 [http-nio-28070-exec-1] DEBUG a.c.m.C.updateEndedAt - ==> Parameters: 2026-01-26T17:28:36.394105300(LocalDateTime), room-d5c026a4(String)
2026-01-26 17:28:36.399 [http-nio-28070-exec-1] DEBUG a.c.m.C.updateEndedAt - <==    Updates: 1
2026-01-26 17:28:36.401 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412c63df]
2026-01-26 17:28:36.402 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412c63df]
2026-01-26 17:28:36.403 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412c63df]
2026-01-26 17:28:36.403 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412c63df]
2026-01-26 17:28:36.406 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:28:36.407 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@534a51e5]
2026-01-26 17:28:36.407 [http-nio-28070-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@405637998 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:28:36.408 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:28:36.409 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), SYSTEM(String), System(String), SYSTEM(String), 상담원 상담원-01에 의해 상담이 종료되었습니다.(String), LEAVE(String), null, 2026-01-26T17:28:36.406073800(LocalDateTime), null
2026-01-26 17:28:36.411 [http-nio-28070-exec-1] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:28:36.412 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@534a51e5]
2026-01-26 17:28:36.413 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@534a51e5]
2026-01-26 17:28:36.413 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@534a51e5]
2026-01-26 17:28:36.413 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@534a51e5]
2026-01-26 17:29:16.163 [clientInboundChannel-95] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:29:16.163 [clientInboundChannel-95] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5fa056]
2026-01-26 17:29:16.164 [clientInboundChannel-95] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1705495334 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:29:16.164 [clientInboundChannel-95] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:29:16.164 [clientInboundChannel-95] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅇ(String), TALK(String), apt001(String), 2026-01-26T17:29:16.161959300(LocalDateTime), null
2026-01-26 17:29:16.165 [clientInboundChannel-95] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:29:16.168 [clientInboundChannel-95] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5fa056]
2026-01-26 17:29:16.168 [clientInboundChannel-95] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5fa056]
2026-01-26 17:29:16.168 [clientInboundChannel-95] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5fa056]
2026-01-26 17:29:16.168 [clientInboundChannel-95] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5fa056]
2026-01-26 17:29:16.177 [clientInboundChannel-95] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:29:16.177 [clientInboundChannel-95] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326a00a4]
2026-01-26 17:29:16.178 [clientInboundChannel-95] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1248476395 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:29:16.178 [clientInboundChannel-95] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:29:16.178 [clientInboundChannel-95] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:29:16.177888300(LocalDateTime), room-d5c026a4(String)
2026-01-26 17:29:16.180 [clientInboundChannel-95] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:29:16.181 [clientInboundChannel-95] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326a00a4]
2026-01-26 17:29:16.181 [clientInboundChannel-95] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326a00a4]
2026-01-26 17:29:16.181 [clientInboundChannel-95] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326a00a4]
2026-01-26 17:29:16.182 [clientInboundChannel-95] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326a00a4]
2026-01-26 17:29:16.201 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:29:16.202 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b019c79]
2026-01-26 17:29:16.203 [reactor-http-nio-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1933090331 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:29:16.204 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:29:16.205 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T17:29:16.201829600(LocalDateTime), null
2026-01-26 17:29:16.207 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:29:16.210 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b019c79]
2026-01-26 17:29:16.210 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b019c79]
2026-01-26 17:29:16.211 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b019c79]
2026-01-26 17:29:16.211 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b019c79]
2026-01-26 17:29:16.212 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:29:16.213 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6835fb]
2026-01-26 17:29:16.214 [reactor-http-nio-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1748816527 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:29:16.214 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:29:16.215 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:29:16.212800200(LocalDateTime), room-d5c026a4(String)
2026-01-26 17:29:16.217 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:29:16.218 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6835fb]
2026-01-26 17:29:16.219 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6835fb]
2026-01-26 17:29:16.219 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6835fb]
2026-01-26 17:29:16.220 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6835fb]
2026-01-26 17:29:23.796 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:29:23.797 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e9a6f93]
2026-01-26 17:29:23.797 [clientInboundChannel-98] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1684145379 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:29:23.798 [clientInboundChannel-98] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:29:23.798 [clientInboundChannel-98] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅇ(String), TALK(String), apt001(String), 2026-01-26T17:29:23.796787200(LocalDateTime), null
2026-01-26 17:29:23.799 [clientInboundChannel-98] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:29:23.801 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e9a6f93]
2026-01-26 17:29:23.801 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e9a6f93]
2026-01-26 17:29:23.801 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e9a6f93]
2026-01-26 17:29:23.801 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e9a6f93]
2026-01-26 17:29:23.802 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:29:23.803 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbb9343]
2026-01-26 17:29:23.803 [clientInboundChannel-98] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1681582870 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:29:23.804 [clientInboundChannel-98] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:29:23.804 [clientInboundChannel-98] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:29:23.802754700(LocalDateTime), room-d5c026a4(String)
2026-01-26 17:29:23.805 [clientInboundChannel-98] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:29:23.807 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbb9343]
2026-01-26 17:29:23.807 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbb9343]
2026-01-26 17:29:23.808 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbb9343]
2026-01-26 17:29:23.808 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbb9343]
2026-01-26 17:29:23.818 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:29:23.819 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@679526b8]
2026-01-26 17:29:23.819 [reactor-http-nio-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@530265696 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:29:23.820 [reactor-http-nio-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:29:23.821 [reactor-http-nio-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T17:29:23.818711500(LocalDateTime), null
2026-01-26 17:29:23.823 [reactor-http-nio-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:29:23.827 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@679526b8]
2026-01-26 17:29:23.828 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@679526b8]
2026-01-26 17:29:23.829 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@679526b8]
2026-01-26 17:29:23.829 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@679526b8]
2026-01-26 17:29:23.830 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:29:23.831 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce5c63]
2026-01-26 17:29:23.832 [reactor-http-nio-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@77553089 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:29:23.832 [reactor-http-nio-5] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:29:23.832 [reactor-http-nio-5] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:29:23.830677700(LocalDateTime), room-d5c026a4(String)
2026-01-26 17:29:23.834 [reactor-http-nio-5] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:29:23.836 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce5c63]
2026-01-26 17:29:23.837 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce5c63]
2026-01-26 17:29:23.837 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce5c63]
2026-01-26 17:29:23.837 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce5c63]
2026-01-26 17:29:46.417 [clientInboundChannel-101] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:29:46.417 [clientInboundChannel-101] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69173bc9]
2026-01-26 17:29:46.418 [clientInboundChannel-101] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@904285996 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:29:46.418 [clientInboundChannel-101] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:29:46.418 [clientInboundChannel-101] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-d5c026a4(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T17:29:46.416587200(LocalDateTime), null
2026-01-26 17:29:46.419 [clientInboundChannel-101] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:29:46.421 [clientInboundChannel-101] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69173bc9]
2026-01-26 17:29:46.421 [clientInboundChannel-101] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69173bc9]
2026-01-26 17:29:46.421 [clientInboundChannel-101] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69173bc9]
2026-01-26 17:29:46.421 [clientInboundChannel-101] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69173bc9]
2026-01-26 17:29:46.430 [clientInboundChannel-101] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:29:46.430 [clientInboundChannel-101] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6a5f22]
2026-01-26 17:29:46.430 [clientInboundChannel-101] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1260580420 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:29:46.430 [clientInboundChannel-101] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:29:46.431 [clientInboundChannel-101] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:29:46.430324400(LocalDateTime), room-d5c026a4(String)
2026-01-26 17:29:46.432 [clientInboundChannel-101] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:29:46.433 [clientInboundChannel-101] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6a5f22]
2026-01-26 17:29:46.433 [clientInboundChannel-101] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6a5f22]
2026-01-26 17:29:46.434 [clientInboundChannel-101] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6a5f22]
2026-01-26 17:29:46.434 [clientInboundChannel-101] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6a5f22]
2026-01-26 17:29:49.224 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:29:49.225 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44fbf33d]
2026-01-26 17:29:49.225 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1752725907 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:29:49.225 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:29:49.226 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-cf2fbf26(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T17:29:49.224340400(LocalDateTime), null, 2026-01-26T17:29:49.224340400(LocalDateTime), null, null
2026-01-26 17:29:49.227 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 17:29:49.229 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44fbf33d]
2026-01-26 17:29:49.229 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44fbf33d]
2026-01-26 17:29:49.230 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44fbf33d]
2026-01-26 17:29:49.230 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44fbf33d]
2026-01-26 17:29:49.234 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:29:49.234 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33dae207]
2026-01-26 17:29:49.235 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1406954669 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:29:49.235 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:29:49.236 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-cf2fbf26(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T17:29:49.233316600(LocalDateTime), null
2026-01-26 17:29:49.238 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:29:49.240 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33dae207]
2026-01-26 17:29:49.241 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33dae207]
2026-01-26 17:29:49.242 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33dae207]
2026-01-26 17:29:49.242 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33dae207]
2026-01-26 17:29:49.286 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:29:49.286 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c6f2798]
2026-01-26 17:29:49.287 [clientInboundChannel-98] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1157743778 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:29:49.287 [clientInboundChannel-98] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:29:49.288 [clientInboundChannel-98] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-cf2fbf26(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T17:29:49.285179400(LocalDateTime), null
2026-01-26 17:29:49.289 [clientInboundChannel-98] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:29:49.291 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c6f2798]
2026-01-26 17:29:49.292 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c6f2798]
2026-01-26 17:29:49.292 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c6f2798]
2026-01-26 17:29:49.292 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c6f2798]
2026-01-26 17:29:49.293 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:29:49.293 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636e6b]
2026-01-26 17:29:49.293 [clientInboundChannel-98] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1124555875 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:29:49.294 [clientInboundChannel-98] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:29:49.294 [clientInboundChannel-98] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:29:49.293155300(LocalDateTime), room-cf2fbf26(String)
2026-01-26 17:29:49.295 [clientInboundChannel-98] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:29:49.296 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636e6b]
2026-01-26 17:29:49.296 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636e6b]
2026-01-26 17:29:49.296 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636e6b]
2026-01-26 17:29:49.296 [clientInboundChannel-98] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636e6b]
2026-01-26 17:30:10.956 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:30:10.957 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52eeea3b]
2026-01-26 17:30:10.958 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@653478300 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:30:10.959 [http-nio-28070-exec-6] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:30:10.959 [http-nio-28070-exec-6] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: AGENT(String), room-cf2fbf26(String)
2026-01-26 17:30:10.972 [http-nio-28070-exec-6] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 17:30:10.974 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52eeea3b]
2026-01-26 17:30:10.975 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52eeea3b]
2026-01-26 17:30:10.975 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52eeea3b]
2026-01-26 17:30:10.976 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52eeea3b]
2026-01-26 17:30:10.985 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:30:10.985 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29dd768c]
2026-01-26 17:30:10.986 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1624524994 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:30:10.987 [http-nio-28070-exec-6] DEBUG a.c.m.C.updateAssignedAgent - ==>  Preparing: UPDATE chat_session SET assigned_agent = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:30:10.987 [http-nio-28070-exec-6] DEBUG a.c.m.C.updateAssignedAgent - ==> Parameters: 상담원-01(String), room-cf2fbf26(String)
2026-01-26 17:30:10.989 [http-nio-28070-exec-6] DEBUG a.c.m.C.updateAssignedAgent - <==    Updates: 1
2026-01-26 17:30:10.991 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29dd768c]
2026-01-26 17:30:10.991 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29dd768c]
2026-01-26 17:30:10.992 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29dd768c]
2026-01-26 17:30:10.992 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29dd768c]
2026-01-26 17:30:10.993 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:30:10.993 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@115bb4a3]
2026-01-26 17:30:10.994 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@890315578 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:30:10.995 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:30:10.996 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-cf2fbf26(String), SYSTEM(String), System(String), SYSTEM(String), 상담원-01 상담원과 연결되었습니다.(String), TALK(String), null, 2026-01-26T17:30:10.993890900(LocalDateTime), null
2026-01-26 17:30:10.997 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:30:11.000 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@115bb4a3]
2026-01-26 17:30:11.000 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@115bb4a3]
2026-01-26 17:30:11.001 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@115bb4a3]
2026-01-26 17:30:11.001 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@115bb4a3]
2026-01-26 17:30:39.083 [clientInboundChannel-111] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:30:39.084 [clientInboundChannel-111] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff1e05c]
2026-01-26 17:30:39.084 [clientInboundChannel-111] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@889817900 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:30:39.084 [clientInboundChannel-111] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:30:39.085 [clientInboundChannel-111] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-cf2fbf26(String), agent01(String), 상담원-01(String), AGENT(String), ㅇ(String), TALK(String), apt001(String), 2026-01-26T17:30:39.082133300(LocalDateTime), null
2026-01-26 17:30:39.086 [clientInboundChannel-111] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:30:39.087 [clientInboundChannel-111] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff1e05c]
2026-01-26 17:30:39.088 [clientInboundChannel-111] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff1e05c]
2026-01-26 17:30:39.088 [clientInboundChannel-111] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff1e05c]
2026-01-26 17:30:39.088 [clientInboundChannel-111] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff1e05c]
2026-01-26 17:30:39.089 [clientInboundChannel-111] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:30:39.089 [clientInboundChannel-111] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4048feb4]
2026-01-26 17:30:39.090 [clientInboundChannel-111] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@941110295 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:30:39.090 [clientInboundChannel-111] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:30:39.091 [clientInboundChannel-111] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:30:39.089120900(LocalDateTime), room-cf2fbf26(String)
2026-01-26 17:30:39.092 [clientInboundChannel-111] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:30:39.093 [clientInboundChannel-111] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4048feb4]
2026-01-26 17:30:39.093 [clientInboundChannel-111] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4048feb4]
2026-01-26 17:30:39.093 [clientInboundChannel-111] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4048feb4]
2026-01-26 17:30:39.093 [clientInboundChannel-111] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4048feb4]
2026-01-26 17:30:49.327 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:30:49.327 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53763b12] was not registered for synchronization because synchronization is not active
2026-01-26 17:30:49.328 [http-nio-28070-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@615435595 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will not be managed by Spring
2026-01-26 17:30:49.328 [http-nio-28070-exec-1] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 17:30:49.329 [http-nio-28070-exec-1] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 17:30:49.330 [http-nio-28070-exec-1] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 17:30:49.333 [http-nio-28070-exec-1] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 17:30:49.333 [http-nio-28070-exec-1] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 17:30:49.334 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53763b12]
2026-01-26 17:30:54.130 [clientInboundChannel-114] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:30:54.130 [clientInboundChannel-114] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d2359d9]
2026-01-26 17:30:54.131 [clientInboundChannel-114] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1742418601 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:30:54.131 [clientInboundChannel-114] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:30:54.131 [clientInboundChannel-114] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-cf2fbf26(String), agent01(String), 상담원-01(String), AGENT(String), ㅇ(String), TALK(String), apt001(String), 2026-01-26T17:30:54.129688100(LocalDateTime), null
2026-01-26 17:30:54.132 [clientInboundChannel-114] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:30:54.134 [clientInboundChannel-114] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d2359d9]
2026-01-26 17:30:54.134 [clientInboundChannel-114] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d2359d9]
2026-01-26 17:30:54.134 [clientInboundChannel-114] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d2359d9]
2026-01-26 17:30:54.134 [clientInboundChannel-114] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d2359d9]
2026-01-26 17:30:54.136 [clientInboundChannel-114] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:30:54.136 [clientInboundChannel-114] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5543c825]
2026-01-26 17:30:54.136 [clientInboundChannel-114] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@759272183 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:30:54.136 [clientInboundChannel-114] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:30:54.137 [clientInboundChannel-114] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:30:54.136665800(LocalDateTime), room-cf2fbf26(String)
2026-01-26 17:30:54.138 [clientInboundChannel-114] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:30:54.138 [clientInboundChannel-114] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5543c825]
2026-01-26 17:30:54.138 [clientInboundChannel-114] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5543c825]
2026-01-26 17:30:54.139 [clientInboundChannel-114] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5543c825]
2026-01-26 17:30:54.139 [clientInboundChannel-114] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5543c825]
2026-01-26 17:30:58.424 [clientInboundChannel-116] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:30:58.424 [clientInboundChannel-116] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a4c089b]
2026-01-26 17:30:58.425 [clientInboundChannel-116] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@191955616 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:30:58.425 [clientInboundChannel-116] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:30:58.425 [clientInboundChannel-116] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-cf2fbf26(String), agent01(String), 상담원-01(String), AGENT(String), ㅇ(String), TALK(String), apt001(String), 2026-01-26T17:30:58.423310600(LocalDateTime), null
2026-01-26 17:30:58.426 [clientInboundChannel-116] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:30:58.429 [clientInboundChannel-116] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a4c089b]
2026-01-26 17:30:58.429 [clientInboundChannel-116] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a4c089b]
2026-01-26 17:30:58.429 [clientInboundChannel-116] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a4c089b]
2026-01-26 17:30:58.429 [clientInboundChannel-116] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a4c089b]
2026-01-26 17:30:58.431 [clientInboundChannel-116] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:30:58.431 [clientInboundChannel-116] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a300fc3]
2026-01-26 17:30:58.432 [clientInboundChannel-116] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1801387503 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:30:58.432 [clientInboundChannel-116] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:30:58.433 [clientInboundChannel-116] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:30:58.431288100(LocalDateTime), room-cf2fbf26(String)
2026-01-26 17:30:58.434 [clientInboundChannel-116] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:30:58.434 [clientInboundChannel-116] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a300fc3]
2026-01-26 17:30:58.435 [clientInboundChannel-116] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a300fc3]
2026-01-26 17:30:58.435 [clientInboundChannel-116] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a300fc3]
2026-01-26 17:30:58.435 [clientInboundChannel-116] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a300fc3]
2026-01-26 17:34:36.852 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:34:36.852 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e18181] was not registered for synchronization because synchronization is not active
2026-01-26 17:34:36.853 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1014174991 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will not be managed by Spring
2026-01-26 17:34:36.854 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 17:34:36.854 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 17:34:36.855 [http-nio-28070-exec-7] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 17:34:36.856 [http-nio-28070-exec-7] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 17:34:36.857 [http-nio-28070-exec-7] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 17:34:36.860 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e18181]
2026-01-26 17:34:39.407 [clientInboundChannel-128] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:34:39.408 [clientInboundChannel-128] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ddd247]
2026-01-26 17:34:39.409 [clientInboundChannel-128] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@237353271 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:34:39.410 [clientInboundChannel-128] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:34:39.410 [clientInboundChannel-128] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-cf2fbf26(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T17:34:39.406330200(LocalDateTime), null
2026-01-26 17:34:39.411 [clientInboundChannel-128] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:34:39.414 [clientInboundChannel-128] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ddd247]
2026-01-26 17:34:39.414 [clientInboundChannel-128] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ddd247]
2026-01-26 17:34:39.415 [clientInboundChannel-128] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ddd247]
2026-01-26 17:34:39.415 [clientInboundChannel-128] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ddd247]
2026-01-26 17:34:39.417 [clientInboundChannel-128] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:34:39.417 [clientInboundChannel-128] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21029a5e]
2026-01-26 17:34:39.418 [clientInboundChannel-128] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1508495356 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:34:39.418 [clientInboundChannel-128] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:34:39.420 [clientInboundChannel-128] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:34:39.417875100(LocalDateTime), room-cf2fbf26(String)
2026-01-26 17:34:39.421 [clientInboundChannel-128] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:34:39.423 [clientInboundChannel-128] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21029a5e]
2026-01-26 17:34:39.424 [clientInboundChannel-128] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21029a5e]
2026-01-26 17:34:39.424 [clientInboundChannel-128] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21029a5e]
2026-01-26 17:34:39.424 [clientInboundChannel-128] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21029a5e]
2026-01-26 17:34:42.484 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:34:42.484 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b8b2808]
2026-01-26 17:34:42.485 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2129725766 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:34:42.487 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:34:42.488 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-a12474d0(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T17:34:42.483517400(LocalDateTime), null, 2026-01-26T17:34:42.483517400(LocalDateTime), null, null
2026-01-26 17:34:42.490 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 17:34:42.493 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b8b2808]
2026-01-26 17:34:42.493 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b8b2808]
2026-01-26 17:34:42.494 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b8b2808]
2026-01-26 17:34:42.494 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b8b2808]
2026-01-26 17:34:42.497 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:34:42.500 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a09fb6]
2026-01-26 17:34:42.500 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2113250183 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:34:42.501 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:34:42.502 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a12474d0(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T17:34:42.497482800(LocalDateTime), null
2026-01-26 17:34:42.503 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:34:42.505 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a09fb6]
2026-01-26 17:34:42.506 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a09fb6]
2026-01-26 17:34:42.506 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a09fb6]
2026-01-26 17:34:42.506 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a09fb6]
2026-01-26 17:34:42.557 [clientInboundChannel-127] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:34:42.558 [clientInboundChannel-127] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105c83bf]
2026-01-26 17:34:42.558 [clientInboundChannel-127] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@447015119 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:34:42.558 [clientInboundChannel-127] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:34:42.559 [clientInboundChannel-127] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a12474d0(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T17:34:42.557503200(LocalDateTime), null
2026-01-26 17:34:42.560 [clientInboundChannel-127] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:34:42.561 [clientInboundChannel-127] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105c83bf]
2026-01-26 17:34:42.562 [clientInboundChannel-127] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105c83bf]
2026-01-26 17:34:42.562 [clientInboundChannel-127] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105c83bf]
2026-01-26 17:34:42.562 [clientInboundChannel-127] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105c83bf]
2026-01-26 17:34:42.564 [clientInboundChannel-127] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:34:42.564 [clientInboundChannel-127] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b1354cf]
2026-01-26 17:34:42.565 [clientInboundChannel-127] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1399592111 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:34:42.566 [clientInboundChannel-127] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:34:42.566 [clientInboundChannel-127] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:34:42.563487400(LocalDateTime), room-a12474d0(String)
2026-01-26 17:34:42.568 [clientInboundChannel-127] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:34:42.569 [clientInboundChannel-127] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b1354cf]
2026-01-26 17:34:42.570 [clientInboundChannel-127] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b1354cf]
2026-01-26 17:34:42.570 [clientInboundChannel-127] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b1354cf]
2026-01-26 17:34:42.570 [clientInboundChannel-127] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b1354cf]
2026-01-26 17:34:45.837 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:34:45.838 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46cec020]
2026-01-26 17:34:45.839 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@644686940 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:34:45.840 [http-nio-28070-exec-4] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:34:45.840 [http-nio-28070-exec-4] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: AGENT(String), room-a12474d0(String)
2026-01-26 17:34:45.841 [http-nio-28070-exec-4] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 17:34:45.844 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46cec020]
2026-01-26 17:34:45.846 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46cec020]
2026-01-26 17:34:45.847 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46cec020]
2026-01-26 17:34:45.847 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46cec020]
2026-01-26 17:34:45.849 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:34:45.850 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62043861]
2026-01-26 17:34:45.850 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@932358143 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:34:45.851 [http-nio-28070-exec-4] DEBUG a.c.m.C.updateAssignedAgent - ==>  Preparing: UPDATE chat_session SET assigned_agent = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:34:45.852 [http-nio-28070-exec-4] DEBUG a.c.m.C.updateAssignedAgent - ==> Parameters: 상담원-01(String), room-a12474d0(String)
2026-01-26 17:34:45.854 [http-nio-28070-exec-4] DEBUG a.c.m.C.updateAssignedAgent - <==    Updates: 1
2026-01-26 17:34:45.857 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62043861]
2026-01-26 17:34:45.858 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62043861]
2026-01-26 17:34:45.858 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62043861]
2026-01-26 17:34:45.859 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62043861]
2026-01-26 17:34:45.860 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:34:45.860 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f8899ce]
2026-01-26 17:34:45.861 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@887583932 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:34:45.861 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:34:45.862 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a12474d0(String), SYSTEM(String), System(String), SYSTEM(String), 상담원-01 상담원과 연결되었습니다.(String), TALK(String), null, 2026-01-26T17:34:45.859649200(LocalDateTime), null
2026-01-26 17:34:45.863 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:34:45.866 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f8899ce]
2026-01-26 17:34:45.868 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f8899ce]
2026-01-26 17:34:45.871 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f8899ce]
2026-01-26 17:34:45.871 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f8899ce]
2026-01-26 17:36:06.948 [clientInboundChannel-138] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:06.949 [clientInboundChannel-138] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24226c06]
2026-01-26 17:36:06.949 [clientInboundChannel-138] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@786040694 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:06.949 [clientInboundChannel-138] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:36:06.950 [clientInboundChannel-138] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a12474d0(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅇㅇㅇ(String), TALK(String), apt001(String), 2026-01-26T17:36:06.947457100(LocalDateTime), null
2026-01-26 17:36:06.953 [clientInboundChannel-138] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:36:06.955 [clientInboundChannel-138] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24226c06]
2026-01-26 17:36:06.955 [clientInboundChannel-138] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24226c06]
2026-01-26 17:36:06.956 [clientInboundChannel-138] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24226c06]
2026-01-26 17:36:06.956 [clientInboundChannel-138] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24226c06]
2026-01-26 17:36:06.957 [clientInboundChannel-138] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:06.957 [clientInboundChannel-138] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cad9fe8]
2026-01-26 17:36:06.958 [clientInboundChannel-138] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@619089159 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:06.958 [clientInboundChannel-138] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:36:06.958 [clientInboundChannel-138] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:36:06.957432200(LocalDateTime), room-a12474d0(String)
2026-01-26 17:36:06.959 [clientInboundChannel-138] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:36:06.961 [clientInboundChannel-138] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cad9fe8]
2026-01-26 17:36:06.961 [clientInboundChannel-138] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cad9fe8]
2026-01-26 17:36:06.961 [clientInboundChannel-138] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cad9fe8]
2026-01-26 17:36:06.961 [clientInboundChannel-138] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cad9fe8]
2026-01-26 17:36:06.976 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:06.977 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d954d2]
2026-01-26 17:36:06.977 [reactor-http-nio-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1222389147 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:06.978 [reactor-http-nio-6] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:36:06.979 [reactor-http-nio-6] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a12474d0(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T17:36:06.976379600(LocalDateTime), null
2026-01-26 17:36:06.982 [reactor-http-nio-6] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:36:06.985 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d954d2]
2026-01-26 17:36:06.986 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d954d2]
2026-01-26 17:36:06.986 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d954d2]
2026-01-26 17:36:06.986 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d954d2]
2026-01-26 17:36:06.987 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:06.988 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fdf5338]
2026-01-26 17:36:06.988 [reactor-http-nio-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1406682448 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:06.989 [reactor-http-nio-6] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:36:06.989 [reactor-http-nio-6] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:36:06.987350700(LocalDateTime), room-a12474d0(String)
2026-01-26 17:36:06.990 [reactor-http-nio-6] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:36:06.992 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fdf5338]
2026-01-26 17:36:06.992 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fdf5338]
2026-01-26 17:36:06.993 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fdf5338]
2026-01-26 17:36:06.993 [reactor-http-nio-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fdf5338]
2026-01-26 17:36:13.972 [clientInboundChannel-141] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:13.973 [clientInboundChannel-141] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@306a11f7]
2026-01-26 17:36:13.973 [clientInboundChannel-141] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@982678151 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:13.973 [clientInboundChannel-141] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:36:13.974 [clientInboundChannel-141] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a12474d0(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅇㅇㅇㅇ(String), TALK(String), apt001(String), 2026-01-26T17:36:13.972112900(LocalDateTime), null
2026-01-26 17:36:13.975 [clientInboundChannel-141] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:36:13.976 [clientInboundChannel-141] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@306a11f7]
2026-01-26 17:36:13.977 [clientInboundChannel-141] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@306a11f7]
2026-01-26 17:36:13.977 [clientInboundChannel-141] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@306a11f7]
2026-01-26 17:36:13.977 [clientInboundChannel-141] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@306a11f7]
2026-01-26 17:36:13.978 [clientInboundChannel-141] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:13.979 [clientInboundChannel-141] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f95b01d]
2026-01-26 17:36:13.979 [clientInboundChannel-141] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1732933341 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:13.979 [clientInboundChannel-141] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:36:13.979 [clientInboundChannel-141] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:36:13.978093600(LocalDateTime), room-a12474d0(String)
2026-01-26 17:36:13.980 [clientInboundChannel-141] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:36:13.981 [clientInboundChannel-141] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f95b01d]
2026-01-26 17:36:13.981 [clientInboundChannel-141] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f95b01d]
2026-01-26 17:36:13.981 [clientInboundChannel-141] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f95b01d]
2026-01-26 17:36:13.981 [clientInboundChannel-141] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f95b01d]
2026-01-26 17:36:13.994 [reactor-http-nio-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:13.995 [reactor-http-nio-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c64097]
2026-01-26 17:36:13.996 [reactor-http-nio-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1779828861 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:13.996 [reactor-http-nio-7] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:36:13.997 [reactor-http-nio-7] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a12474d0(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T17:36:13.994051800(LocalDateTime), null
2026-01-26 17:36:14.000 [reactor-http-nio-7] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:36:14.003 [reactor-http-nio-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c64097]
2026-01-26 17:36:14.004 [reactor-http-nio-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c64097]
2026-01-26 17:36:14.004 [reactor-http-nio-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c64097]
2026-01-26 17:36:14.005 [reactor-http-nio-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c64097]
2026-01-26 17:36:14.006 [reactor-http-nio-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:14.006 [reactor-http-nio-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305c8f42]
2026-01-26 17:36:14.007 [reactor-http-nio-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1897047362 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:14.007 [reactor-http-nio-7] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:36:14.008 [reactor-http-nio-7] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:36:14.006019100(LocalDateTime), room-a12474d0(String)
2026-01-26 17:36:14.009 [reactor-http-nio-7] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:36:14.011 [reactor-http-nio-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305c8f42]
2026-01-26 17:36:14.011 [reactor-http-nio-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305c8f42]
2026-01-26 17:36:14.012 [reactor-http-nio-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305c8f42]
2026-01-26 17:36:14.012 [reactor-http-nio-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305c8f42]
2026-01-26 17:36:26.779 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:26.779 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ddaa866]
2026-01-26 17:36:26.780 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1758561916 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:26.780 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:36:26.781 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: CLOSED(String), room-a12474d0(String)
2026-01-26 17:36:26.782 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 17:36:26.784 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ddaa866]
2026-01-26 17:36:26.784 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ddaa866]
2026-01-26 17:36:26.785 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ddaa866]
2026-01-26 17:36:26.785 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ddaa866]
2026-01-26 17:36:26.787 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:26.787 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767d707c]
2026-01-26 17:36:26.789 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1773914417 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:26.789 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateEndedAt - ==>  Preparing: UPDATE chat_session SET ended_at = ?, status = 'CLOSED', updated_at = NOW() WHERE room_id = ?
2026-01-26 17:36:26.790 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateEndedAt - ==> Parameters: 2026-01-26T17:36:26.786849900(LocalDateTime), room-a12474d0(String)
2026-01-26 17:36:26.793 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateEndedAt - <==    Updates: 1
2026-01-26 17:36:26.795 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767d707c]
2026-01-26 17:36:26.796 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767d707c]
2026-01-26 17:36:26.796 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767d707c]
2026-01-26 17:36:26.797 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767d707c]
2026-01-26 17:36:26.798 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:26.799 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f16ead3]
2026-01-26 17:36:26.800 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1169181700 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:26.800 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:36:26.802 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a12474d0(String), SYSTEM(String), System(String), SYSTEM(String), 상담원 상담원-01에 의해 상담이 종료되었습니다.(String), LEAVE(String), null, 2026-01-26T17:36:26.798817200(LocalDateTime), null
2026-01-26 17:36:26.803 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:36:26.807 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f16ead3]
2026-01-26 17:36:26.808 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f16ead3]
2026-01-26 17:36:26.808 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f16ead3]
2026-01-26 17:36:26.809 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f16ead3]
2026-01-26 17:36:30.114 [clientInboundChannel-144] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:30.114 [clientInboundChannel-144] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b19ec64]
2026-01-26 17:36:30.115 [clientInboundChannel-144] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1642170132 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:30.115 [clientInboundChannel-144] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:36:30.115 [clientInboundChannel-144] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a12474d0(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅇㅇㅇ(String), TALK(String), apt001(String), 2026-01-26T17:36:30.113518(LocalDateTime), null
2026-01-26 17:36:30.116 [clientInboundChannel-144] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:36:30.118 [clientInboundChannel-144] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b19ec64]
2026-01-26 17:36:30.118 [clientInboundChannel-144] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b19ec64]
2026-01-26 17:36:30.118 [clientInboundChannel-144] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b19ec64]
2026-01-26 17:36:30.118 [clientInboundChannel-144] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b19ec64]
2026-01-26 17:36:30.120 [clientInboundChannel-144] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:30.120 [clientInboundChannel-144] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bdb778]
2026-01-26 17:36:30.120 [clientInboundChannel-144] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2017020205 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:30.120 [clientInboundChannel-144] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:36:30.121 [clientInboundChannel-144] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:36:30.120502900(LocalDateTime), room-a12474d0(String)
2026-01-26 17:36:30.121 [clientInboundChannel-144] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:36:30.123 [clientInboundChannel-144] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bdb778]
2026-01-26 17:36:30.123 [clientInboundChannel-144] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bdb778]
2026-01-26 17:36:30.123 [clientInboundChannel-144] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bdb778]
2026-01-26 17:36:30.123 [clientInboundChannel-144] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bdb778]
2026-01-26 17:36:30.135 [reactor-http-nio-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:30.136 [reactor-http-nio-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49fe99b4]
2026-01-26 17:36:30.137 [reactor-http-nio-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@823634785 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:30.137 [reactor-http-nio-8] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:36:30.138 [reactor-http-nio-8] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a12474d0(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T17:36:30.135459500(LocalDateTime), null
2026-01-26 17:36:30.141 [reactor-http-nio-8] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:36:30.144 [reactor-http-nio-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49fe99b4]
2026-01-26 17:36:30.145 [reactor-http-nio-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49fe99b4]
2026-01-26 17:36:30.145 [reactor-http-nio-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49fe99b4]
2026-01-26 17:36:30.146 [reactor-http-nio-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49fe99b4]
2026-01-26 17:36:30.147 [reactor-http-nio-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:30.147 [reactor-http-nio-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ebc4eb]
2026-01-26 17:36:30.148 [reactor-http-nio-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@705898245 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:30.148 [reactor-http-nio-8] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:36:30.149 [reactor-http-nio-8] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:36:30.147433300(LocalDateTime), room-a12474d0(String)
2026-01-26 17:36:30.150 [reactor-http-nio-8] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:36:30.152 [reactor-http-nio-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ebc4eb]
2026-01-26 17:36:30.152 [reactor-http-nio-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ebc4eb]
2026-01-26 17:36:30.152 [reactor-http-nio-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ebc4eb]
2026-01-26 17:36:30.153 [reactor-http-nio-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ebc4eb]
2026-01-26 17:36:38.121 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:38.122 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79a4c622]
2026-01-26 17:36:38.122 [clientInboundChannel-147] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1935453522 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:38.122 [clientInboundChannel-147] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:36:38.123 [clientInboundChannel-147] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a12474d0(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅇㅇㅇㅇㅇ(String), TALK(String), apt001(String), 2026-01-26T17:36:38.121933600(LocalDateTime), null
2026-01-26 17:36:38.124 [clientInboundChannel-147] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:36:38.125 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79a4c622]
2026-01-26 17:36:38.126 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79a4c622]
2026-01-26 17:36:38.126 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79a4c622]
2026-01-26 17:36:38.126 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79a4c622]
2026-01-26 17:36:38.128 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:38.128 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69146862]
2026-01-26 17:36:38.128 [clientInboundChannel-147] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@293740986 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:38.129 [clientInboundChannel-147] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:36:38.129 [clientInboundChannel-147] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:36:38.128912800(LocalDateTime), room-a12474d0(String)
2026-01-26 17:36:38.129 [clientInboundChannel-147] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:36:38.130 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69146862]
2026-01-26 17:36:38.130 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69146862]
2026-01-26 17:36:38.130 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69146862]
2026-01-26 17:36:38.131 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69146862]
2026-01-26 17:36:38.142 [reactor-http-nio-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:38.143 [reactor-http-nio-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1dfad2]
2026-01-26 17:36:38.143 [reactor-http-nio-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1527367882 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:38.144 [reactor-http-nio-1] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:36:38.145 [reactor-http-nio-1] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a12474d0(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T17:36:38.142877800(LocalDateTime), null
2026-01-26 17:36:38.146 [reactor-http-nio-1] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:36:38.149 [reactor-http-nio-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1dfad2]
2026-01-26 17:36:38.150 [reactor-http-nio-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1dfad2]
2026-01-26 17:36:38.150 [reactor-http-nio-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1dfad2]
2026-01-26 17:36:38.151 [reactor-http-nio-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1dfad2]
2026-01-26 17:36:38.152 [reactor-http-nio-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:36:38.153 [reactor-http-nio-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f53456e]
2026-01-26 17:36:38.154 [reactor-http-nio-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@911643302 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:36:38.154 [reactor-http-nio-1] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:36:38.155 [reactor-http-nio-1] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:36:38.152854800(LocalDateTime), room-a12474d0(String)
2026-01-26 17:36:38.157 [reactor-http-nio-1] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:36:38.159 [reactor-http-nio-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f53456e]
2026-01-26 17:36:38.160 [reactor-http-nio-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f53456e]
2026-01-26 17:36:38.160 [reactor-http-nio-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f53456e]
2026-01-26 17:36:38.161 [reactor-http-nio-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f53456e]
2026-01-26 17:37:05.406 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:05.406 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dfe6fc8]
2026-01-26 17:37:05.406 [clientInboundChannel-150] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@117834936 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:05.407 [clientInboundChannel-150] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:37:05.407 [clientInboundChannel-150] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-a12474d0(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T17:37:05.402515300(LocalDateTime), null
2026-01-26 17:37:05.408 [clientInboundChannel-150] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:37:05.410 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dfe6fc8]
2026-01-26 17:37:05.411 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dfe6fc8]
2026-01-26 17:37:05.411 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dfe6fc8]
2026-01-26 17:37:05.411 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dfe6fc8]
2026-01-26 17:37:05.412 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:05.412 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c7a2d9b]
2026-01-26 17:37:05.413 [clientInboundChannel-150] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1142477494 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:05.413 [clientInboundChannel-150] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:37:05.413 [clientInboundChannel-150] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:37:05.412487600(LocalDateTime), room-a12474d0(String)
2026-01-26 17:37:05.414 [clientInboundChannel-150] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:37:05.416 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c7a2d9b]
2026-01-26 17:37:05.416 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c7a2d9b]
2026-01-26 17:37:05.416 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c7a2d9b]
2026-01-26 17:37:05.417 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c7a2d9b]
2026-01-26 17:37:11.430 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:11.431 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa59204]
2026-01-26 17:37:11.431 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1241529459 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:11.432 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:37:11.432 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-0de2b08e(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T17:37:11.430546100(LocalDateTime), null, 2026-01-26T17:37:11.430546100(LocalDateTime), null, null
2026-01-26 17:37:11.434 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 17:37:11.436 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa59204]
2026-01-26 17:37:11.437 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa59204]
2026-01-26 17:37:11.437 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa59204]
2026-01-26 17:37:11.438 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa59204]
2026-01-26 17:37:11.443 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:11.444 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6886ffac]
2026-01-26 17:37:11.445 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@568741504 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:11.445 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:37:11.446 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-0de2b08e(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T17:37:11.443028400(LocalDateTime), null
2026-01-26 17:37:11.447 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:37:11.450 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6886ffac]
2026-01-26 17:37:11.450 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6886ffac]
2026-01-26 17:37:11.450 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6886ffac]
2026-01-26 17:37:11.451 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6886ffac]
2026-01-26 17:37:11.508 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:11.509 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a09b5c8]
2026-01-26 17:37:11.510 [clientInboundChannel-147] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1379887298 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:11.510 [clientInboundChannel-147] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:37:11.511 [clientInboundChannel-147] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-0de2b08e(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T17:37:11.507855400(LocalDateTime), null
2026-01-26 17:37:11.512 [clientInboundChannel-147] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:37:11.515 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a09b5c8]
2026-01-26 17:37:11.516 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a09b5c8]
2026-01-26 17:37:11.516 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a09b5c8]
2026-01-26 17:37:11.516 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a09b5c8]
2026-01-26 17:37:11.517 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:11.517 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e76a09b]
2026-01-26 17:37:11.518 [clientInboundChannel-147] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2068491428 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:11.518 [clientInboundChannel-147] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:37:11.518 [clientInboundChannel-147] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:37:11.517828100(LocalDateTime), room-0de2b08e(String)
2026-01-26 17:37:11.519 [clientInboundChannel-147] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:37:11.520 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e76a09b]
2026-01-26 17:37:11.520 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e76a09b]
2026-01-26 17:37:11.520 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e76a09b]
2026-01-26 17:37:11.521 [clientInboundChannel-147] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e76a09b]
2026-01-26 17:37:20.699 [clientInboundChannel-154] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:20.700 [clientInboundChannel-154] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@664a65c8]
2026-01-26 17:37:20.700 [clientInboundChannel-154] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@662138867 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:20.700 [clientInboundChannel-154] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:37:20.701 [clientInboundChannel-154] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-0de2b08e(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅇㅇㅇ(String), TALK(String), apt001(String), 2026-01-26T17:37:20.697330300(LocalDateTime), null
2026-01-26 17:37:20.702 [clientInboundChannel-154] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:37:20.703 [clientInboundChannel-154] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@664a65c8]
2026-01-26 17:37:20.703 [clientInboundChannel-154] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@664a65c8]
2026-01-26 17:37:20.703 [clientInboundChannel-154] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@664a65c8]
2026-01-26 17:37:20.704 [clientInboundChannel-154] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@664a65c8]
2026-01-26 17:37:20.705 [clientInboundChannel-154] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:20.705 [clientInboundChannel-154] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@169ac8ee]
2026-01-26 17:37:20.706 [clientInboundChannel-154] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1196986556 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:20.706 [clientInboundChannel-154] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:37:20.707 [clientInboundChannel-154] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:37:20.705305400(LocalDateTime), room-0de2b08e(String)
2026-01-26 17:37:20.707 [clientInboundChannel-154] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:37:20.709 [clientInboundChannel-154] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@169ac8ee]
2026-01-26 17:37:20.710 [clientInboundChannel-154] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@169ac8ee]
2026-01-26 17:37:20.710 [clientInboundChannel-154] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@169ac8ee]
2026-01-26 17:37:20.710 [clientInboundChannel-154] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@169ac8ee]
2026-01-26 17:37:20.723 [reactor-http-nio-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:20.724 [reactor-http-nio-2] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d2aebf8]
2026-01-26 17:37:20.725 [reactor-http-nio-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1403751270 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:20.725 [reactor-http-nio-2] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:37:20.726 [reactor-http-nio-2] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-0de2b08e(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T17:37:20.723259600(LocalDateTime), null
2026-01-26 17:37:20.727 [reactor-http-nio-2] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:37:20.730 [reactor-http-nio-2] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d2aebf8]
2026-01-26 17:37:20.731 [reactor-http-nio-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d2aebf8]
2026-01-26 17:37:20.731 [reactor-http-nio-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d2aebf8]
2026-01-26 17:37:20.732 [reactor-http-nio-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d2aebf8]
2026-01-26 17:37:20.733 [reactor-http-nio-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:20.734 [reactor-http-nio-2] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d94b94a]
2026-01-26 17:37:20.735 [reactor-http-nio-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2139133061 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:20.735 [reactor-http-nio-2] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:37:20.736 [reactor-http-nio-2] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:37:20.733232100(LocalDateTime), room-0de2b08e(String)
2026-01-26 17:37:20.737 [reactor-http-nio-2] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:37:20.739 [reactor-http-nio-2] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d94b94a]
2026-01-26 17:37:20.740 [reactor-http-nio-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d94b94a]
2026-01-26 17:37:20.740 [reactor-http-nio-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d94b94a]
2026-01-26 17:37:20.740 [reactor-http-nio-2] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d94b94a]
2026-01-26 17:37:26.338 [clientInboundChannel-152] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:26.338 [clientInboundChannel-152] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14132f55]
2026-01-26 17:37:26.339 [clientInboundChannel-152] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@518734885 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:26.339 [clientInboundChannel-152] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:37:26.340 [clientInboundChannel-152] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-0de2b08e(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅇㅇㅇ(String), TALK(String), apt001(String), 2026-01-26T17:37:26.337963400(LocalDateTime), null
2026-01-26 17:37:26.341 [clientInboundChannel-152] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:37:26.343 [clientInboundChannel-152] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14132f55]
2026-01-26 17:37:26.344 [clientInboundChannel-152] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14132f55]
2026-01-26 17:37:26.344 [clientInboundChannel-152] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14132f55]
2026-01-26 17:37:26.344 [clientInboundChannel-152] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14132f55]
2026-01-26 17:37:26.346 [clientInboundChannel-152] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:26.346 [clientInboundChannel-152] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568d2c33]
2026-01-26 17:37:26.347 [clientInboundChannel-152] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@779530152 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:26.347 [clientInboundChannel-152] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:37:26.347 [clientInboundChannel-152] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:37:26.346939200(LocalDateTime), room-0de2b08e(String)
2026-01-26 17:37:26.348 [clientInboundChannel-152] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:37:26.349 [clientInboundChannel-152] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568d2c33]
2026-01-26 17:37:26.350 [clientInboundChannel-152] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568d2c33]
2026-01-26 17:37:26.350 [clientInboundChannel-152] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568d2c33]
2026-01-26 17:37:26.350 [clientInboundChannel-152] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568d2c33]
2026-01-26 17:37:26.360 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:26.360 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ca8cc9]
2026-01-26 17:37:26.361 [reactor-http-nio-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1380742654 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:26.362 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:37:26.362 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-0de2b08e(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T17:37:26.360911900(LocalDateTime), null
2026-01-26 17:37:26.364 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:37:26.367 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ca8cc9]
2026-01-26 17:37:26.368 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ca8cc9]
2026-01-26 17:37:26.368 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ca8cc9]
2026-01-26 17:37:26.369 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ca8cc9]
2026-01-26 17:37:26.370 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:26.371 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530ddbca]
2026-01-26 17:37:26.371 [reactor-http-nio-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@31059557 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:26.372 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:37:26.372 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:37:26.370403200(LocalDateTime), room-0de2b08e(String)
2026-01-26 17:37:26.374 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:37:26.375 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530ddbca]
2026-01-26 17:37:26.375 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530ddbca]
2026-01-26 17:37:26.375 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530ddbca]
2026-01-26 17:37:26.376 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530ddbca]
2026-01-26 17:37:28.058 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:28.058 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fd08258]
2026-01-26 17:37:28.058 [clientInboundChannel-150] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1595727260 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:28.058 [clientInboundChannel-150] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:37:28.059 [clientInboundChannel-150] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-0de2b08e(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅇㅇㅇ(String), TALK(String), apt001(String), 2026-01-26T17:37:28.057039500(LocalDateTime), null
2026-01-26 17:37:28.059 [clientInboundChannel-150] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:37:28.061 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fd08258]
2026-01-26 17:37:28.062 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fd08258]
2026-01-26 17:37:28.062 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fd08258]
2026-01-26 17:37:28.063 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fd08258]
2026-01-26 17:37:28.064 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:28.065 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6decaf27]
2026-01-26 17:37:28.065 [clientInboundChannel-150] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@280842006 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:28.065 [clientInboundChannel-150] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:37:28.066 [clientInboundChannel-150] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:37:28.064014100(LocalDateTime), room-0de2b08e(String)
2026-01-26 17:37:28.067 [clientInboundChannel-150] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:37:28.068 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6decaf27]
2026-01-26 17:37:28.068 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6decaf27]
2026-01-26 17:37:28.068 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6decaf27]
2026-01-26 17:37:28.068 [clientInboundChannel-150] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6decaf27]
2026-01-26 17:37:28.078 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:28.079 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77095f14]
2026-01-26 17:37:28.079 [reactor-http-nio-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1233633614 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:28.080 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:37:28.081 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-0de2b08e(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T17:37:28.078497(LocalDateTime), null
2026-01-26 17:37:28.082 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:37:28.085 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77095f14]
2026-01-26 17:37:28.085 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77095f14]
2026-01-26 17:37:28.086 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77095f14]
2026-01-26 17:37:28.086 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77095f14]
2026-01-26 17:37:28.087 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:28.088 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eec57bb]
2026-01-26 17:37:28.088 [reactor-http-nio-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1288014657 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:28.089 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:37:28.090 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:37:28.087471500(LocalDateTime), room-0de2b08e(String)
2026-01-26 17:37:28.091 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:37:28.092 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eec57bb]
2026-01-26 17:37:28.093 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eec57bb]
2026-01-26 17:37:28.093 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eec57bb]
2026-01-26 17:37:28.094 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eec57bb]
2026-01-26 17:37:29.672 [clientInboundChannel-146] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:29.673 [clientInboundChannel-146] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cb895bf]
2026-01-26 17:37:29.673 [clientInboundChannel-146] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1178664655 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:29.673 [clientInboundChannel-146] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:37:29.673 [clientInboundChannel-146] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-0de2b08e(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅇㅇㅇ(String), TALK(String), apt001(String), 2026-01-26T17:37:29.672056500(LocalDateTime), null
2026-01-26 17:37:29.674 [clientInboundChannel-146] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:37:29.675 [clientInboundChannel-146] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cb895bf]
2026-01-26 17:37:29.675 [clientInboundChannel-146] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cb895bf]
2026-01-26 17:37:29.675 [clientInboundChannel-146] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cb895bf]
2026-01-26 17:37:29.675 [clientInboundChannel-146] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cb895bf]
2026-01-26 17:37:29.676 [clientInboundChannel-146] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:29.676 [clientInboundChannel-146] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bdf00d9]
2026-01-26 17:37:29.676 [clientInboundChannel-146] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1945958464 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:29.677 [clientInboundChannel-146] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:37:29.677 [clientInboundChannel-146] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:37:29.676563500(LocalDateTime), room-0de2b08e(String)
2026-01-26 17:37:29.677 [clientInboundChannel-146] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:37:29.678 [clientInboundChannel-146] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bdf00d9]
2026-01-26 17:37:29.679 [clientInboundChannel-146] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bdf00d9]
2026-01-26 17:37:29.679 [clientInboundChannel-146] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bdf00d9]
2026-01-26 17:37:29.679 [clientInboundChannel-146] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bdf00d9]
2026-01-26 17:37:29.689 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:29.690 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ca361]
2026-01-26 17:37:29.690 [reactor-http-nio-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@5257813 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:29.691 [reactor-http-nio-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:37:29.692 [reactor-http-nio-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-0de2b08e(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T17:37:29.689528600(LocalDateTime), null
2026-01-26 17:37:29.693 [reactor-http-nio-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:37:29.696 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ca361]
2026-01-26 17:37:29.697 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ca361]
2026-01-26 17:37:29.697 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ca361]
2026-01-26 17:37:29.697 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ca361]
2026-01-26 17:37:29.699 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:37:29.699 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c3cf28]
2026-01-26 17:37:29.700 [reactor-http-nio-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1367277145 wrapping org.postgresql.jdbc.PgConnection@559f2fd3] will be managed by Spring
2026-01-26 17:37:29.700 [reactor-http-nio-5] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:37:29.700 [reactor-http-nio-5] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:37:29.698507100(LocalDateTime), room-0de2b08e(String)
2026-01-26 17:37:29.701 [reactor-http-nio-5] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:37:29.703 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c3cf28]
2026-01-26 17:37:29.704 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c3cf28]
2026-01-26 17:37:29.704 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c3cf28]
2026-01-26 17:37:29.705 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c3cf28]
2026-01-26 17:54:00.924 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatHistoryMapper.class]
2026-01-26 17:54:00.925 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatSessionMapper.class]
2026-01-26 17:54:00.926 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\UserAccountMapper.class]
2026-01-26 17:54:00.929 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'aicc.chat.mapper.ChatHistoryMapper' mapperInterface
2026-01-26 17:54:00.932 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatHistoryMapper'.
2026-01-26 17:54:00.933 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatSessionMapper' and 'aicc.chat.mapper.ChatSessionMapper' mapperInterface
2026-01-26 17:54:00.934 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatSessionMapper'.
2026-01-26 17:54:00.934 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userAccountMapper' and 'aicc.chat.mapper.UserAccountMapper' mapperInterface
2026-01-26 17:54:00.935 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'userAccountMapper'.
2026-01-26 17:54:03.840 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Registered plugin: 'aicc.chat.config.MyBatisSqlLogger@6bfbab1c'
2026-01-26 17:54:04.065 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatHistoryMapper.xml]'
2026-01-26 17:54:04.098 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatSessionMapper.xml]'
2026-01-26 17:54:04.112 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\UserAccountMapper.xml]'
2026-01-26 17:58:18.570 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:58:18.585 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55a10676]
2026-01-26 17:58:18.599 [http-nio-28070-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@127708487 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 17:58:18.607 [http-nio-28070-exec-9] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:58:18.645 [http-nio-28070-exec-9] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-b6f34cd8(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T17:58:18.241621600(LocalDateTime), null, 2026-01-26T17:58:18.241621600(LocalDateTime), null, null
2026-01-26 17:58:18.674 [http-nio-28070-exec-9] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 17:58:18.692 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55a10676]
2026-01-26 17:58:18.694 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55a10676]
2026-01-26 17:58:18.696 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55a10676]
2026-01-26 17:58:18.696 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55a10676]
2026-01-26 17:58:18.715 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:58:18.716 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3edd9a7c]
2026-01-26 17:58:18.717 [http-nio-28070-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@541169283 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 17:58:18.718 [http-nio-28070-exec-9] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:58:18.720 [http-nio-28070-exec-9] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b6f34cd8(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T17:58:18.715247800(LocalDateTime), null
2026-01-26 17:58:18.725 [http-nio-28070-exec-9] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:58:18.731 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3edd9a7c]
2026-01-26 17:58:18.732 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3edd9a7c]
2026-01-26 17:58:18.733 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3edd9a7c]
2026-01-26 17:58:18.734 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3edd9a7c]
2026-01-26 17:58:19.019 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:58:19.020 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b6c395]
2026-01-26 17:58:19.022 [clientInboundChannel-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@457388544 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 17:58:19.023 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:58:19.029 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b6f34cd8(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T17:58:19.018148700(LocalDateTime), null
2026-01-26 17:58:19.033 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:58:19.038 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b6c395]
2026-01-26 17:58:19.040 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b6c395]
2026-01-26 17:58:19.040 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b6c395]
2026-01-26 17:58:19.041 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b6c395]
2026-01-26 17:58:19.046 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:58:19.047 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568af071]
2026-01-26 17:58:19.048 [clientInboundChannel-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1177874007 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 17:58:19.049 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:58:19.050 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:58:19.042084400(LocalDateTime), room-b6f34cd8(String)
2026-01-26 17:58:19.069 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:58:19.072 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568af071]
2026-01-26 17:58:19.072 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568af071]
2026-01-26 17:58:19.073 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568af071]
2026-01-26 17:58:19.073 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568af071]
2026-01-26 17:58:31.004 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:58:31.007 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12170524]
2026-01-26 17:58:31.008 [clientInboundChannel-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@418344532 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 17:58:31.010 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 17:58:31.011 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b6f34cd8(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T17:58:31.003891500(LocalDateTime), null
2026-01-26 17:58:31.013 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 17:58:31.017 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12170524]
2026-01-26 17:58:31.018 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12170524]
2026-01-26 17:58:31.019 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12170524]
2026-01-26 17:58:31.019 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12170524]
2026-01-26 17:58:31.021 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 17:58:31.022 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77f9f391]
2026-01-26 17:58:31.023 [clientInboundChannel-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@251949604 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 17:58:31.024 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 17:58:31.025 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T17:58:31.021378600(LocalDateTime), room-b6f34cd8(String)
2026-01-26 17:58:31.026 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 17:58:31.029 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77f9f391]
2026-01-26 17:58:31.029 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77f9f391]
2026-01-26 17:58:31.030 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77f9f391]
2026-01-26 17:58:31.030 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77f9f391]
2026-01-26 18:00:06.788 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:00:06.790 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fd0e6a2]
2026-01-26 18:00:06.791 [MessageBroker-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1324215449 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:00:06.791 [MessageBroker-6] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:00:06.792 [MessageBroker-6] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: CLOSED(String), room-b6f34cd8(String)
2026-01-26 18:00:06.795 [MessageBroker-6] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:00:06.799 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fd0e6a2]
2026-01-26 18:00:06.800 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fd0e6a2]
2026-01-26 18:00:06.801 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fd0e6a2]
2026-01-26 18:00:06.801 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fd0e6a2]
2026-01-26 18:00:06.803 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:00:06.804 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe92098]
2026-01-26 18:00:06.805 [MessageBroker-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@784470998 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:00:06.805 [MessageBroker-6] DEBUG a.c.m.C.updateEndedAt - ==>  Preparing: UPDATE chat_session SET ended_at = ?, status = 'CLOSED', updated_at = NOW() WHERE room_id = ?
2026-01-26 18:00:06.807 [MessageBroker-6] DEBUG a.c.m.C.updateEndedAt - ==> Parameters: 2026-01-26T18:00:06.803375200(LocalDateTime), room-b6f34cd8(String)
2026-01-26 18:00:06.809 [MessageBroker-6] DEBUG a.c.m.C.updateEndedAt - <==    Updates: 1
2026-01-26 18:00:06.811 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe92098]
2026-01-26 18:00:06.812 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe92098]
2026-01-26 18:00:06.812 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe92098]
2026-01-26 18:00:06.812 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe92098]
2026-01-26 18:00:06.814 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:00:06.814 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea2a488]
2026-01-26 18:00:06.815 [MessageBroker-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@713869757 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:00:06.816 [MessageBroker-6] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:00:06.819 [MessageBroker-6] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b6f34cd8(String), system(String), System(String), SYSTEM(String), 장시간 대화가 없어 상담이 자동 종료되었습니다.(String), LEAVE(String), null, null, null
2026-01-26 18:00:06.821 [MessageBroker-6] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:00:06.825 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea2a488]
2026-01-26 18:00:06.826 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea2a488]
2026-01-26 18:00:06.826 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea2a488]
2026-01-26 18:00:06.827 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea2a488]
2026-01-26 18:02:21.774 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:02:21.775 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bee437f] was not registered for synchronization because synchronization is not active
2026-01-26 18:02:21.781 [http-nio-28070-exec-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@840600947 wrapping org.postgresql.jdbc.PgConnection@657683f] will not be managed by Spring
2026-01-26 18:02:21.791 [http-nio-28070-exec-1] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 18:02:21.793 [http-nio-28070-exec-1] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 18:02:21.834 [http-nio-28070-exec-1] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 18:02:21.834 [http-nio-28070-exec-1] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 18:02:21.838 [http-nio-28070-exec-1] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 18:02:21.882 [http-nio-28070-exec-1] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bee437f]
2026-01-26 18:02:51.879 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:02:51.879 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35116bc7] was not registered for synchronization because synchronization is not active
2026-01-26 18:02:51.880 [http-nio-28070-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1995809509 wrapping org.postgresql.jdbc.PgConnection@657683f] will not be managed by Spring
2026-01-26 18:02:51.881 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 18:02:51.881 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 18:02:51.883 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 18:02:51.884 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 18:02:51.885 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 18:02:51.888 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35116bc7]
2026-01-26 18:02:57.520 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:02:57.522 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3693eb50]
2026-01-26 18:02:57.525 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2007949675 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:02:57.525 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:02:57.526 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-315b5fd0(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T18:02:57.519582200(LocalDateTime), null, 2026-01-26T18:02:57.519582200(LocalDateTime), null, null
2026-01-26 18:02:57.528 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 18:02:57.534 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3693eb50]
2026-01-26 18:02:57.535 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3693eb50]
2026-01-26 18:02:57.536 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3693eb50]
2026-01-26 18:02:57.537 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3693eb50]
2026-01-26 18:02:57.543 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:02:57.544 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4613d733]
2026-01-26 18:02:57.544 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@394337828 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:02:57.545 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:02:57.547 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-315b5fd0(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T18:02:57.542525(LocalDateTime), null
2026-01-26 18:02:57.550 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:02:57.553 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4613d733]
2026-01-26 18:02:57.555 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4613d733]
2026-01-26 18:02:57.555 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4613d733]
2026-01-26 18:02:57.556 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4613d733]
2026-01-26 18:02:57.640 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:02:57.640 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54016255]
2026-01-26 18:02:57.641 [clientInboundChannel-23] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1593379109 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:02:57.641 [clientInboundChannel-23] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:02:57.643 [clientInboundChannel-23] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-315b5fd0(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T18:02:57.639442700(LocalDateTime), null
2026-01-26 18:02:57.647 [clientInboundChannel-23] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:02:57.654 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54016255]
2026-01-26 18:02:57.655 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54016255]
2026-01-26 18:02:57.655 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54016255]
2026-01-26 18:02:57.656 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54016255]
2026-01-26 18:02:57.657 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:02:57.658 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd473d1]
2026-01-26 18:02:57.658 [clientInboundChannel-23] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2145509550 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:02:57.659 [clientInboundChannel-23] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:02:57.660 [clientInboundChannel-23] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:02:57.657389900(LocalDateTime), room-315b5fd0(String)
2026-01-26 18:02:57.663 [clientInboundChannel-23] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:02:57.664 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd473d1]
2026-01-26 18:02:57.664 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd473d1]
2026-01-26 18:02:57.665 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd473d1]
2026-01-26 18:02:57.665 [clientInboundChannel-23] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd473d1]
2026-01-26 18:03:23.962 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:03:23.963 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d92ac7] was not registered for synchronization because synchronization is not active
2026-01-26 18:03:23.964 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2016559387 wrapping org.postgresql.jdbc.PgConnection@657683f] will not be managed by Spring
2026-01-26 18:03:23.965 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 18:03:23.968 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 18:03:23.970 [http-nio-28070-exec-3] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 18:03:23.970 [http-nio-28070-exec-3] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 18:03:23.971 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 18:03:23.974 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d92ac7]
2026-01-26 18:04:06.785 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:04:06.785 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17a9713d]
2026-01-26 18:04:06.786 [MessageBroker-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1332957355 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:04:06.787 [MessageBroker-1] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:04:06.787 [MessageBroker-1] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: CLOSED(String), room-315b5fd0(String)
2026-01-26 18:04:06.790 [MessageBroker-1] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:04:06.792 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17a9713d]
2026-01-26 18:04:06.792 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17a9713d]
2026-01-26 18:04:06.792 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17a9713d]
2026-01-26 18:04:06.793 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17a9713d]
2026-01-26 18:04:06.794 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:04:06.794 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319be679]
2026-01-26 18:04:06.794 [MessageBroker-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2052769940 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:04:06.795 [MessageBroker-1] DEBUG a.c.m.C.updateEndedAt - ==>  Preparing: UPDATE chat_session SET ended_at = ?, status = 'CLOSED', updated_at = NOW() WHERE room_id = ?
2026-01-26 18:04:06.795 [MessageBroker-1] DEBUG a.c.m.C.updateEndedAt - ==> Parameters: 2026-01-26T18:04:06.794148900(LocalDateTime), room-315b5fd0(String)
2026-01-26 18:04:06.797 [MessageBroker-1] DEBUG a.c.m.C.updateEndedAt - <==    Updates: 1
2026-01-26 18:04:06.799 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319be679]
2026-01-26 18:04:06.799 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319be679]
2026-01-26 18:04:06.799 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319be679]
2026-01-26 18:04:06.799 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319be679]
2026-01-26 18:04:06.801 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:04:06.801 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43bfea0c]
2026-01-26 18:04:06.802 [MessageBroker-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1393496698 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:04:06.803 [MessageBroker-1] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:04:06.803 [MessageBroker-1] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-315b5fd0(String), system(String), System(String), SYSTEM(String), 장시간 대화가 없어 상담이 자동 종료되었습니다.(String), LEAVE(String), null, null, null
2026-01-26 18:04:06.805 [MessageBroker-1] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:04:06.808 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43bfea0c]
2026-01-26 18:04:06.809 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43bfea0c]
2026-01-26 18:04:06.809 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43bfea0c]
2026-01-26 18:04:06.809 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43bfea0c]
2026-01-26 18:04:19.795 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:04:19.796 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278f2afc]
2026-01-26 18:04:19.797 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@603178627 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:04:19.797 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:04:19.801 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-05ed4df1(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T18:04:19.795643700(LocalDateTime), null, 2026-01-26T18:04:19.795643700(LocalDateTime), null, null
2026-01-26 18:04:19.803 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 18:04:19.808 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278f2afc]
2026-01-26 18:04:19.808 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278f2afc]
2026-01-26 18:04:19.809 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278f2afc]
2026-01-26 18:04:19.809 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278f2afc]
2026-01-26 18:04:19.814 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:04:19.815 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2516cdc]
2026-01-26 18:04:19.815 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1467384617 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:04:19.816 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:04:19.817 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-05ed4df1(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T18:04:19.814592600(LocalDateTime), null
2026-01-26 18:04:19.821 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:04:19.827 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2516cdc]
2026-01-26 18:04:19.827 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2516cdc]
2026-01-26 18:04:19.827 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2516cdc]
2026-01-26 18:04:19.827 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2516cdc]
2026-01-26 18:04:19.894 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:04:19.895 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42975714]
2026-01-26 18:04:19.895 [clientInboundChannel-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1215249508 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:04:19.895 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:04:19.896 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-05ed4df1(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T18:04:19.894104800(LocalDateTime), null
2026-01-26 18:04:19.898 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:04:19.900 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42975714]
2026-01-26 18:04:19.901 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42975714]
2026-01-26 18:04:19.901 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42975714]
2026-01-26 18:04:19.902 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42975714]
2026-01-26 18:04:19.903 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:04:19.904 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753a6243]
2026-01-26 18:04:19.905 [clientInboundChannel-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@228012846 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:04:19.905 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:04:19.906 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:04:19.903080700(LocalDateTime), room-05ed4df1(String)
2026-01-26 18:04:19.908 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:04:19.909 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753a6243]
2026-01-26 18:04:19.910 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753a6243]
2026-01-26 18:04:19.910 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753a6243]
2026-01-26 18:04:19.910 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753a6243]
2026-01-26 18:04:26.801 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:04:26.801 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c1521ac]
2026-01-26 18:04:26.802 [clientInboundChannel-41] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@384649948 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:04:26.802 [clientInboundChannel-41] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:04:26.804 [clientInboundChannel-41] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-05ed4df1(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T18:04:26.800710500(LocalDateTime), null
2026-01-26 18:04:26.806 [clientInboundChannel-41] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:04:26.809 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c1521ac]
2026-01-26 18:04:26.809 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c1521ac]
2026-01-26 18:04:26.810 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c1521ac]
2026-01-26 18:04:26.810 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c1521ac]
2026-01-26 18:04:26.812 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:04:26.812 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66c295f5]
2026-01-26 18:04:26.813 [clientInboundChannel-41] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@506533991 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:04:26.813 [clientInboundChannel-41] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:04:26.814 [clientInboundChannel-41] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:04:26.812293100(LocalDateTime), room-05ed4df1(String)
2026-01-26 18:04:26.815 [clientInboundChannel-41] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:04:26.817 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66c295f5]
2026-01-26 18:04:26.817 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66c295f5]
2026-01-26 18:04:26.817 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66c295f5]
2026-01-26 18:04:26.817 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66c295f5]
2026-01-26 18:04:46.949 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:04:46.949 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60723974]
2026-01-26 18:04:46.950 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@826708287 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:04:46.951 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:04:46.951 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-60550f91(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T18:04:46.948023(LocalDateTime), null, 2026-01-26T18:04:46.948023(LocalDateTime), null, null
2026-01-26 18:04:46.954 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 18:04:46.957 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60723974]
2026-01-26 18:04:46.958 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60723974]
2026-01-26 18:04:46.959 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60723974]
2026-01-26 18:04:46.959 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60723974]
2026-01-26 18:04:46.966 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:04:46.968 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@281a0164]
2026-01-26 18:04:46.969 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@889736392 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:04:46.969 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:04:46.970 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-60550f91(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T18:04:46.966970100(LocalDateTime), null
2026-01-26 18:04:46.973 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:04:46.976 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@281a0164]
2026-01-26 18:04:46.977 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@281a0164]
2026-01-26 18:04:46.977 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@281a0164]
2026-01-26 18:04:46.978 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@281a0164]
2026-01-26 18:04:47.063 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:04:47.064 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bcc0bd3]
2026-01-26 18:04:47.066 [clientInboundChannel-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1119211976 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:04:47.066 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:04:47.068 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-60550f91(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T18:04:47.063388(LocalDateTime), null
2026-01-26 18:04:47.069 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:04:47.072 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bcc0bd3]
2026-01-26 18:04:47.072 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bcc0bd3]
2026-01-26 18:04:47.073 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bcc0bd3]
2026-01-26 18:04:47.073 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bcc0bd3]
2026-01-26 18:04:47.074 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:04:47.074 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ad8047]
2026-01-26 18:04:47.075 [clientInboundChannel-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@299010812 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:04:47.075 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:04:47.076 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:04:47.074359800(LocalDateTime), room-60550f91(String)
2026-01-26 18:04:47.077 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:04:47.079 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ad8047]
2026-01-26 18:04:47.080 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ad8047]
2026-01-26 18:04:47.080 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ad8047]
2026-01-26 18:04:47.080 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ad8047]
2026-01-26 18:06:06.788 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:06:06.788 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ef0fa71]
2026-01-26 18:06:06.789 [MessageBroker-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@186803501 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:06:06.789 [MessageBroker-5] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:06:06.790 [MessageBroker-5] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: CLOSED(String), room-05ed4df1(String)
2026-01-26 18:06:06.792 [MessageBroker-5] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:06:06.794 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ef0fa71]
2026-01-26 18:06:06.794 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ef0fa71]
2026-01-26 18:06:06.795 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ef0fa71]
2026-01-26 18:06:06.795 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ef0fa71]
2026-01-26 18:06:06.795 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:06:06.795 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7359651b]
2026-01-26 18:06:06.796 [MessageBroker-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@592353759 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:06:06.796 [MessageBroker-5] DEBUG a.c.m.C.updateEndedAt - ==>  Preparing: UPDATE chat_session SET ended_at = ?, status = 'CLOSED', updated_at = NOW() WHERE room_id = ?
2026-01-26 18:06:06.796 [MessageBroker-5] DEBUG a.c.m.C.updateEndedAt - ==> Parameters: 2026-01-26T18:06:06.795747(LocalDateTime), room-05ed4df1(String)
2026-01-26 18:06:06.797 [MessageBroker-5] DEBUG a.c.m.C.updateEndedAt - <==    Updates: 1
2026-01-26 18:06:06.798 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7359651b]
2026-01-26 18:06:06.798 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7359651b]
2026-01-26 18:06:06.798 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7359651b]
2026-01-26 18:06:06.798 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7359651b]
2026-01-26 18:06:06.799 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:06:06.800 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@685d6bcf]
2026-01-26 18:06:06.800 [MessageBroker-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1757688244 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:06:06.800 [MessageBroker-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:06:06.800 [MessageBroker-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-05ed4df1(String), system(String), System(String), SYSTEM(String), 장시간 대화가 없어 상담이 자동 종료되었습니다.(String), LEAVE(String), null, null, null
2026-01-26 18:06:06.802 [MessageBroker-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:06:06.803 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@685d6bcf]
2026-01-26 18:06:06.803 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@685d6bcf]
2026-01-26 18:06:06.804 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@685d6bcf]
2026-01-26 18:06:06.804 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@685d6bcf]
2026-01-26 18:06:06.813 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:06:06.813 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc38de1]
2026-01-26 18:06:06.814 [MessageBroker-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@441717216 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:06:06.814 [MessageBroker-5] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:06:06.816 [MessageBroker-5] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: CLOSED(String), room-60550f91(String)
2026-01-26 18:06:06.817 [MessageBroker-5] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:06:06.819 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc38de1]
2026-01-26 18:06:06.819 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc38de1]
2026-01-26 18:06:06.819 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc38de1]
2026-01-26 18:06:06.819 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc38de1]
2026-01-26 18:06:06.821 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:06:06.822 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8befd7]
2026-01-26 18:06:06.822 [MessageBroker-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1516278934 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:06:06.822 [MessageBroker-5] DEBUG a.c.m.C.updateEndedAt - ==>  Preparing: UPDATE chat_session SET ended_at = ?, status = 'CLOSED', updated_at = NOW() WHERE room_id = ?
2026-01-26 18:06:06.823 [MessageBroker-5] DEBUG a.c.m.C.updateEndedAt - ==> Parameters: 2026-01-26T18:06:06.821683(LocalDateTime), room-60550f91(String)
2026-01-26 18:06:06.825 [MessageBroker-5] DEBUG a.c.m.C.updateEndedAt - <==    Updates: 1
2026-01-26 18:06:06.828 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8befd7]
2026-01-26 18:06:06.828 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8befd7]
2026-01-26 18:06:06.828 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8befd7]
2026-01-26 18:06:06.829 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8befd7]
2026-01-26 18:06:06.830 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:06:06.831 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ed83865]
2026-01-26 18:06:06.831 [MessageBroker-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@390203154 wrapping org.postgresql.jdbc.PgConnection@657683f] will be managed by Spring
2026-01-26 18:06:06.831 [MessageBroker-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:06:06.832 [MessageBroker-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-60550f91(String), system(String), System(String), SYSTEM(String), 장시간 대화가 없어 상담이 자동 종료되었습니다.(String), LEAVE(String), null, null, null
2026-01-26 18:06:06.833 [MessageBroker-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:06:06.835 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ed83865]
2026-01-26 18:06:06.836 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ed83865]
2026-01-26 18:06:06.836 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ed83865]
2026-01-26 18:06:06.836 [MessageBroker-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ed83865]
2026-01-26 18:18:00.904 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatHistoryMapper.class]
2026-01-26 18:18:00.906 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatSessionMapper.class]
2026-01-26 18:18:00.907 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\UserAccountMapper.class]
2026-01-26 18:18:00.910 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'aicc.chat.mapper.ChatHistoryMapper' mapperInterface
2026-01-26 18:18:00.915 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatHistoryMapper'.
2026-01-26 18:18:00.916 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatSessionMapper' and 'aicc.chat.mapper.ChatSessionMapper' mapperInterface
2026-01-26 18:18:00.917 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatSessionMapper'.
2026-01-26 18:18:00.918 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userAccountMapper' and 'aicc.chat.mapper.UserAccountMapper' mapperInterface
2026-01-26 18:18:00.919 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'userAccountMapper'.
2026-01-26 18:18:03.813 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Registered plugin: 'aicc.chat.config.MyBatisSqlLogger@749ee0e3'
2026-01-26 18:18:04.029 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatHistoryMapper.xml]'
2026-01-26 18:18:04.077 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatSessionMapper.xml]'
2026-01-26 18:18:04.095 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\UserAccountMapper.xml]'
2026-01-26 18:18:30.228 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:18:30.240 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe78477] was not registered for synchronization because synchronization is not active
2026-01-26 18:18:30.547 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@811494055 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will not be managed by Spring
2026-01-26 18:18:30.554 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 18:18:30.574 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 18:18:30.607 [http-nio-28070-exec-5] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 18:18:30.607 [http-nio-28070-exec-5] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 18:18:30.611 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 18:18:30.632 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe78477]
2026-01-26 18:18:38.162 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:18:38.163 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8434a9e]
2026-01-26 18:18:38.165 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1887747604 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:18:38.165 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:18:38.167 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-609cb583(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T18:18:38.148366900(LocalDateTime), null, 2026-01-26T18:18:38.148366900(LocalDateTime), null, null
2026-01-26 18:18:38.174 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 18:18:38.182 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8434a9e]
2026-01-26 18:18:38.183 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8434a9e]
2026-01-26 18:18:38.184 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8434a9e]
2026-01-26 18:18:38.184 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8434a9e]
2026-01-26 18:18:38.226 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:18:38.227 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf16251]
2026-01-26 18:18:38.228 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1172901546 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:18:38.228 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:18:38.229 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-609cb583(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T18:18:38.203053600(LocalDateTime), null
2026-01-26 18:18:38.234 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:18:38.239 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf16251]
2026-01-26 18:18:38.241 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf16251]
2026-01-26 18:18:38.241 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf16251]
2026-01-26 18:18:38.242 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf16251]
2026-01-26 18:18:38.588 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:18:38.589 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f4d8e4]
2026-01-26 18:18:38.589 [clientInboundChannel-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@674071526 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:18:38.591 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:18:38.593 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-609cb583(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T18:18:38.585156300(LocalDateTime), null
2026-01-26 18:18:38.596 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:18:38.600 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f4d8e4]
2026-01-26 18:18:38.600 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f4d8e4]
2026-01-26 18:18:38.601 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f4d8e4]
2026-01-26 18:18:38.601 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f4d8e4]
2026-01-26 18:18:38.603 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:18:38.604 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d557185]
2026-01-26 18:18:38.605 [clientInboundChannel-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1512078455 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:18:38.606 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:18:38.607 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:18:38.602112600(LocalDateTime), room-609cb583(String)
2026-01-26 18:18:38.617 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:18:38.619 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d557185]
2026-01-26 18:18:38.620 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d557185]
2026-01-26 18:18:38.620 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d557185]
2026-01-26 18:18:38.621 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d557185]
2026-01-26 18:18:43.283 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:18:43.284 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecb4e5e]
2026-01-26 18:18:43.284 [clientInboundChannel-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1412637998 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:18:43.285 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:18:43.285 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-609cb583(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅁ(String), TALK(String), apt001(String), 2026-01-26T18:18:43.282263300(LocalDateTime), null
2026-01-26 18:18:43.287 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:18:43.290 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecb4e5e]
2026-01-26 18:18:43.291 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecb4e5e]
2026-01-26 18:18:43.291 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecb4e5e]
2026-01-26 18:18:43.291 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecb4e5e]
2026-01-26 18:18:43.292 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:18:43.293 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150ca40a]
2026-01-26 18:18:43.293 [clientInboundChannel-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1841147193 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:18:43.294 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:18:43.295 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:18:43.292234900(LocalDateTime), room-609cb583(String)
2026-01-26 18:18:43.296 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:18:43.298 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150ca40a]
2026-01-26 18:18:43.299 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150ca40a]
2026-01-26 18:18:43.299 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150ca40a]
2026-01-26 18:18:43.299 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150ca40a]
2026-01-26 18:18:43.580 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:18:43.581 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e781bd]
2026-01-26 18:18:43.582 [reactor-http-nio-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@621104555 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:18:43.583 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:18:43.584 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-609cb583(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T18:18:43.577546200(LocalDateTime), null
2026-01-26 18:18:43.587 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:18:43.592 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e781bd]
2026-01-26 18:18:43.594 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e781bd]
2026-01-26 18:18:43.596 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e781bd]
2026-01-26 18:18:43.596 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e781bd]
2026-01-26 18:18:43.598 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:18:43.599 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f46a121]
2026-01-26 18:18:43.599 [reactor-http-nio-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1190604292 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:18:43.600 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:18:43.601 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:18:43.598488100(LocalDateTime), room-609cb583(String)
2026-01-26 18:18:43.603 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:18:43.605 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f46a121]
2026-01-26 18:18:43.605 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f46a121]
2026-01-26 18:18:43.605 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f46a121]
2026-01-26 18:18:43.606 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f46a121]
2026-01-26 18:18:51.629 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:18:51.630 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12460d18]
2026-01-26 18:18:51.631 [clientInboundChannel-13] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@415131240 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:18:51.631 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:18:51.632 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-609cb583(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅁ(String), TALK(String), apt001(String), 2026-01-26T18:18:51.628183(LocalDateTime), null
2026-01-26 18:18:51.635 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:18:51.639 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12460d18]
2026-01-26 18:18:51.640 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12460d18]
2026-01-26 18:18:51.640 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12460d18]
2026-01-26 18:18:51.640 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12460d18]
2026-01-26 18:18:51.642 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:18:51.642 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71757f57]
2026-01-26 18:18:51.643 [clientInboundChannel-13] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@970808686 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:18:51.644 [clientInboundChannel-13] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:18:51.644 [clientInboundChannel-13] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:18:51.642146800(LocalDateTime), room-609cb583(String)
2026-01-26 18:18:51.646 [clientInboundChannel-13] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:18:51.648 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71757f57]
2026-01-26 18:18:51.649 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71757f57]
2026-01-26 18:18:51.649 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71757f57]
2026-01-26 18:18:51.650 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71757f57]
2026-01-26 18:18:51.670 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:18:51.671 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cff4495]
2026-01-26 18:18:51.672 [reactor-http-nio-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1956642808 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:18:51.672 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:18:51.673 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-609cb583(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T18:18:51.668622300(LocalDateTime), null
2026-01-26 18:18:51.676 [reactor-http-nio-4] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:18:51.684 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cff4495]
2026-01-26 18:18:51.687 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cff4495]
2026-01-26 18:18:51.687 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cff4495]
2026-01-26 18:18:51.688 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cff4495]
2026-01-26 18:18:51.689 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:18:51.689 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24333f1c]
2026-01-26 18:18:51.690 [reactor-http-nio-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@288225158 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:18:51.690 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:18:51.691 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:18:51.689565(LocalDateTime), room-609cb583(String)
2026-01-26 18:18:51.693 [reactor-http-nio-4] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:18:51.696 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24333f1c]
2026-01-26 18:18:51.696 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24333f1c]
2026-01-26 18:18:51.696 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24333f1c]
2026-01-26 18:18:51.697 [reactor-http-nio-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24333f1c]
2026-01-26 18:20:01.846 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:01.846 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ef855e9] was not registered for synchronization because synchronization is not active
2026-01-26 18:20:01.848 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@658893249 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will not be managed by Spring
2026-01-26 18:20:01.849 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 18:20:01.850 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 18:20:01.853 [http-nio-28070-exec-5] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 18:20:01.853 [http-nio-28070-exec-5] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 18:20:01.855 [http-nio-28070-exec-5] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 18:20:01.857 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ef855e9]
2026-01-26 18:20:06.778 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:06.779 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@625dd13a]
2026-01-26 18:20:06.780 [MessageBroker-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@593550081 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:20:06.781 [MessageBroker-4] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:20:06.781 [MessageBroker-4] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: CLOSED(String), room-609cb583(String)
2026-01-26 18:20:06.792 [MessageBroker-4] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:20:06.793 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@625dd13a]
2026-01-26 18:20:06.794 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@625dd13a]
2026-01-26 18:20:06.794 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@625dd13a]
2026-01-26 18:20:06.794 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@625dd13a]
2026-01-26 18:20:06.796 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:06.797 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ea0790]
2026-01-26 18:20:06.797 [MessageBroker-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1191254952 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:20:06.798 [MessageBroker-4] DEBUG a.c.m.C.updateEndedAt - ==>  Preparing: UPDATE chat_session SET ended_at = ?, status = 'CLOSED', updated_at = NOW() WHERE room_id = ?
2026-01-26 18:20:06.800 [MessageBroker-4] DEBUG a.c.m.C.updateEndedAt - ==> Parameters: 2026-01-26T18:20:06.796144700(LocalDateTime), room-609cb583(String)
2026-01-26 18:20:06.803 [MessageBroker-4] DEBUG a.c.m.C.updateEndedAt - <==    Updates: 1
2026-01-26 18:20:06.805 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ea0790]
2026-01-26 18:20:06.806 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ea0790]
2026-01-26 18:20:06.806 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ea0790]
2026-01-26 18:20:06.807 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ea0790]
2026-01-26 18:20:06.809 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:06.809 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ec1ccd]
2026-01-26 18:20:06.810 [MessageBroker-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@458717525 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:20:06.810 [MessageBroker-4] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:20:06.811 [MessageBroker-4] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-609cb583(String), system(String), System(String), SYSTEM(String), 장시간 대화가 없어 상담이 자동 종료되었습니다.(String), LEAVE(String), null, 2026-01-26T18:20:06.777195700(LocalDateTime), null
2026-01-26 18:20:06.813 [MessageBroker-4] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:20:06.816 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ec1ccd]
2026-01-26 18:20:06.817 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ec1ccd]
2026-01-26 18:20:06.817 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ec1ccd]
2026-01-26 18:20:06.817 [MessageBroker-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ec1ccd]
2026-01-26 18:20:37.625 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:37.625 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4480c3e7]
2026-01-26 18:20:37.626 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@60365062 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:20:37.627 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:20:37.629 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-98a037b9(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T18:20:37.624894900(LocalDateTime), null, 2026-01-26T18:20:37.624894900(LocalDateTime), null, null
2026-01-26 18:20:37.635 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 18:20:37.639 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4480c3e7]
2026-01-26 18:20:37.640 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4480c3e7]
2026-01-26 18:20:37.641 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4480c3e7]
2026-01-26 18:20:37.641 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4480c3e7]
2026-01-26 18:20:37.648 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:37.649 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37e9f06e]
2026-01-26 18:20:37.650 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@795831307 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:20:37.650 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:20:37.652 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-98a037b9(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T18:20:37.646838600(LocalDateTime), null
2026-01-26 18:20:37.653 [http-nio-28070-exec-4] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:20:37.662 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37e9f06e]
2026-01-26 18:20:37.663 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37e9f06e]
2026-01-26 18:20:37.664 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37e9f06e]
2026-01-26 18:20:37.664 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37e9f06e]
2026-01-26 18:20:37.784 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:37.785 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0c22e8]
2026-01-26 18:20:37.786 [clientInboundChannel-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@133450136 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:20:37.787 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:20:37.788 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-98a037b9(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T18:20:37.783438300(LocalDateTime), null
2026-01-26 18:20:37.791 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:20:37.794 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0c22e8]
2026-01-26 18:20:37.795 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0c22e8]
2026-01-26 18:20:37.795 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0c22e8]
2026-01-26 18:20:37.795 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0c22e8]
2026-01-26 18:20:37.796 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:37.797 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e81b6d6]
2026-01-26 18:20:37.797 [clientInboundChannel-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1457761108 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:20:37.797 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:20:37.798 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:20:37.796404800(LocalDateTime), room-98a037b9(String)
2026-01-26 18:20:37.800 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:20:37.802 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e81b6d6]
2026-01-26 18:20:37.802 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e81b6d6]
2026-01-26 18:20:37.802 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e81b6d6]
2026-01-26 18:20:37.803 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e81b6d6]
2026-01-26 18:20:40.808 [clientInboundChannel-21] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:40.809 [clientInboundChannel-21] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14583a80]
2026-01-26 18:20:40.809 [clientInboundChannel-21] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@513823216 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:20:40.810 [clientInboundChannel-21] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:20:40.810 [clientInboundChannel-21] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-98a037b9(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T18:20:40.807287400(LocalDateTime), null
2026-01-26 18:20:40.812 [clientInboundChannel-21] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:20:40.814 [clientInboundChannel-21] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14583a80]
2026-01-26 18:20:40.815 [clientInboundChannel-21] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14583a80]
2026-01-26 18:20:40.815 [clientInboundChannel-21] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14583a80]
2026-01-26 18:20:40.815 [clientInboundChannel-21] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14583a80]
2026-01-26 18:20:40.817 [clientInboundChannel-21] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:40.817 [clientInboundChannel-21] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@efb618e]
2026-01-26 18:20:40.818 [clientInboundChannel-21] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1988108627 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:20:40.819 [clientInboundChannel-21] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:20:40.820 [clientInboundChannel-21] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:20:40.817259700(LocalDateTime), room-98a037b9(String)
2026-01-26 18:20:40.822 [clientInboundChannel-21] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:20:40.824 [clientInboundChannel-21] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@efb618e]
2026-01-26 18:20:40.824 [clientInboundChannel-21] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@efb618e]
2026-01-26 18:20:40.824 [clientInboundChannel-21] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@efb618e]
2026-01-26 18:20:40.824 [clientInboundChannel-21] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@efb618e]
2026-01-26 18:20:46.466 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:46.466 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b494ea1] was not registered for synchronization because synchronization is not active
2026-01-26 18:20:46.467 [http-nio-28070-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@359433450 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will not be managed by Spring
2026-01-26 18:20:46.467 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 18:20:46.468 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 18:20:46.469 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 18:20:46.470 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 18:20:46.471 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 18:20:46.474 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b494ea1]
2026-01-26 18:20:55.895 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:55.895 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c676662]
2026-01-26 18:20:55.896 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1242656526 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:20:55.896 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:20:55.897 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-e5b857ec(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T18:20:55.895847700(LocalDateTime), null, 2026-01-26T18:20:55.895847700(LocalDateTime), null, null
2026-01-26 18:20:55.898 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 18:20:55.901 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c676662]
2026-01-26 18:20:55.902 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c676662]
2026-01-26 18:20:55.902 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c676662]
2026-01-26 18:20:55.903 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c676662]
2026-01-26 18:20:55.915 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:55.915 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de1dfc0]
2026-01-26 18:20:55.916 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@383598250 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:20:55.917 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:20:55.918 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-e5b857ec(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T18:20:55.910815700(LocalDateTime), null
2026-01-26 18:20:55.919 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:20:55.923 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de1dfc0]
2026-01-26 18:20:55.924 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de1dfc0]
2026-01-26 18:20:55.924 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de1dfc0]
2026-01-26 18:20:55.925 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de1dfc0]
2026-01-26 18:20:56.022 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:56.023 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d1dc6]
2026-01-26 18:20:56.024 [clientInboundChannel-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1307026588 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:20:56.024 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:20:56.026 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-e5b857ec(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T18:20:56.021726600(LocalDateTime), null
2026-01-26 18:20:56.028 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:20:56.031 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d1dc6]
2026-01-26 18:20:56.032 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d1dc6]
2026-01-26 18:20:56.032 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d1dc6]
2026-01-26 18:20:56.032 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d1dc6]
2026-01-26 18:20:56.034 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:20:56.034 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fddec14]
2026-01-26 18:20:56.034 [clientInboundChannel-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@291882258 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:20:56.035 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:20:56.035 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:20:56.034693300(LocalDateTime), room-e5b857ec(String)
2026-01-26 18:20:56.037 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:20:56.039 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fddec14]
2026-01-26 18:20:56.039 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fddec14]
2026-01-26 18:20:56.039 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fddec14]
2026-01-26 18:20:56.040 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fddec14]
2026-01-26 18:21:05.587 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:05.588 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3259f33f]
2026-01-26 18:21:05.588 [clientInboundChannel-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2020799 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:05.589 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:21:05.589 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-e5b857ec(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T18:21:05.586119400(LocalDateTime), null
2026-01-26 18:21:05.590 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:21:05.592 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3259f33f]
2026-01-26 18:21:05.593 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3259f33f]
2026-01-26 18:21:05.593 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3259f33f]
2026-01-26 18:21:05.593 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3259f33f]
2026-01-26 18:21:05.595 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:05.595 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c79a2b]
2026-01-26 18:21:05.596 [clientInboundChannel-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@959528157 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:05.596 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:21:05.597 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:21:05.595187700(LocalDateTime), room-e5b857ec(String)
2026-01-26 18:21:05.598 [clientInboundChannel-32] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:21:05.600 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c79a2b]
2026-01-26 18:21:05.600 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c79a2b]
2026-01-26 18:21:05.600 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c79a2b]
2026-01-26 18:21:05.600 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c79a2b]
2026-01-26 18:21:05.658 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:05.658 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0b3506]
2026-01-26 18:21:05.659 [clientInboundChannel-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2031265786 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:05.659 [clientInboundChannel-32] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:21:05.660 [clientInboundChannel-32] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: WAITING(String), room-e5b857ec(String)
2026-01-26 18:21:05.662 [clientInboundChannel-32] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:21:05.663 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0b3506]
2026-01-26 18:21:05.664 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0b3506]
2026-01-26 18:21:05.664 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0b3506]
2026-01-26 18:21:05.664 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0b3506]
2026-01-26 18:21:05.665 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:05.666 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78bf7e03]
2026-01-26 18:21:05.666 [clientInboundChannel-32] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@687065578 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:05.666 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:21:05.667 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-e5b857ec(String), SYSTEM(String), System(String), SYSTEM(String), 상담원 연결을 요청하였습니다. 상담원이 연결될 때까지 잠시만 기다려 주세요.(String), TALK(String), null, 2026-01-26T18:21:05.656564700(LocalDateTime), null
2026-01-26 18:21:05.668 [clientInboundChannel-32] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:21:05.671 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78bf7e03]
2026-01-26 18:21:05.672 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78bf7e03]
2026-01-26 18:21:05.672 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78bf7e03]
2026-01-26 18:21:05.672 [clientInboundChannel-32] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78bf7e03]
2026-01-26 18:21:23.845 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:23.846 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@642d4ad0]
2026-01-26 18:21:23.847 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1994307027 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:23.847 [http-nio-28070-exec-8] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:21:23.849 [http-nio-28070-exec-8] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: AGENT(String), room-e5b857ec(String)
2026-01-26 18:21:23.852 [http-nio-28070-exec-8] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:21:23.854 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@642d4ad0]
2026-01-26 18:21:23.855 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@642d4ad0]
2026-01-26 18:21:23.856 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@642d4ad0]
2026-01-26 18:21:23.856 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@642d4ad0]
2026-01-26 18:21:23.859 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:23.860 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f5df8ba]
2026-01-26 18:21:23.860 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1017570302 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:23.862 [http-nio-28070-exec-8] DEBUG a.c.m.C.updateAssignedAgent - ==>  Preparing: UPDATE chat_session SET assigned_agent = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:21:23.867 [http-nio-28070-exec-8] DEBUG a.c.m.C.updateAssignedAgent - ==> Parameters: 상담원-01(String), room-e5b857ec(String)
2026-01-26 18:21:23.878 [http-nio-28070-exec-8] DEBUG a.c.m.C.updateAssignedAgent - <==    Updates: 1
2026-01-26 18:21:23.882 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f5df8ba]
2026-01-26 18:21:23.882 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f5df8ba]
2026-01-26 18:21:23.883 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f5df8ba]
2026-01-26 18:21:23.884 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f5df8ba]
2026-01-26 18:21:23.890 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:23.891 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@253f68bd]
2026-01-26 18:21:23.892 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@74893547 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:23.893 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:21:23.894 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-e5b857ec(String), SYSTEM(String), System(String), SYSTEM(String), 상담원-01 상담원과 연결되었습니다.(String), TALK(String), null, 2026-01-26T18:21:23.684177700(LocalDateTime), null
2026-01-26 18:21:23.897 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:21:23.905 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@253f68bd]
2026-01-26 18:21:23.907 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@253f68bd]
2026-01-26 18:21:23.907 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@253f68bd]
2026-01-26 18:21:23.907 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@253f68bd]
2026-01-26 18:21:31.075 [clientInboundChannel-19] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:31.076 [clientInboundChannel-19] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e5464b]
2026-01-26 18:21:31.076 [clientInboundChannel-19] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1643806853 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:31.076 [clientInboundChannel-19] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:21:31.077 [clientInboundChannel-19] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-e5b857ec(String), agent01(String), 상담원-01(String), AGENT(String), aaa(String), TALK(String), apt001(String), 2026-01-26T18:21:31.074898300(LocalDateTime), null
2026-01-26 18:21:31.078 [clientInboundChannel-19] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:21:31.081 [clientInboundChannel-19] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e5464b]
2026-01-26 18:21:31.081 [clientInboundChannel-19] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e5464b]
2026-01-26 18:21:31.081 [clientInboundChannel-19] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e5464b]
2026-01-26 18:21:31.081 [clientInboundChannel-19] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e5464b]
2026-01-26 18:21:31.083 [clientInboundChannel-19] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:31.083 [clientInboundChannel-19] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7afeeaf3]
2026-01-26 18:21:31.083 [clientInboundChannel-19] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1864015202 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:31.084 [clientInboundChannel-19] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:21:31.084 [clientInboundChannel-19] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:21:31.083872200(LocalDateTime), room-e5b857ec(String)
2026-01-26 18:21:31.086 [clientInboundChannel-19] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:21:31.087 [clientInboundChannel-19] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7afeeaf3]
2026-01-26 18:21:31.089 [clientInboundChannel-19] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7afeeaf3]
2026-01-26 18:21:31.090 [clientInboundChannel-19] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7afeeaf3]
2026-01-26 18:21:31.091 [clientInboundChannel-19] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7afeeaf3]
2026-01-26 18:21:39.702 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:39.702 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53320f13]
2026-01-26 18:21:39.704 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2006685652 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:39.705 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:21:39.705 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: CLOSED(String), room-e5b857ec(String)
2026-01-26 18:21:39.708 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:21:39.710 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53320f13]
2026-01-26 18:21:39.711 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53320f13]
2026-01-26 18:21:39.711 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53320f13]
2026-01-26 18:21:39.711 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53320f13]
2026-01-26 18:21:39.723 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:39.725 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7330d863]
2026-01-26 18:21:39.728 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2121070148 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:39.731 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateEndedAt - ==>  Preparing: UPDATE chat_session SET ended_at = ?, status = 'CLOSED', updated_at = NOW() WHERE room_id = ?
2026-01-26 18:21:39.732 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateEndedAt - ==> Parameters: 2026-01-26T18:21:39.723723900(LocalDateTime), room-e5b857ec(String)
2026-01-26 18:21:39.734 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateEndedAt - <==    Updates: 1
2026-01-26 18:21:39.736 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7330d863]
2026-01-26 18:21:39.737 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7330d863]
2026-01-26 18:21:39.738 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7330d863]
2026-01-26 18:21:39.738 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7330d863]
2026-01-26 18:21:39.743 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:39.744 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12b7615e]
2026-01-26 18:21:39.745 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1226884539 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:39.745 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:21:39.747 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-e5b857ec(String), SYSTEM(String), System(String), SYSTEM(String), 상담원 상담원-01에 의해 상담이 종료되었습니다.(String), LEAVE(String), null, 2026-01-26T18:21:39.696921200(LocalDateTime), null
2026-01-26 18:21:39.754 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:21:39.760 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12b7615e]
2026-01-26 18:21:39.760 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12b7615e]
2026-01-26 18:21:39.761 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12b7615e]
2026-01-26 18:21:39.762 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12b7615e]
2026-01-26 18:21:45.282 [clientInboundChannel-37] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:45.282 [clientInboundChannel-37] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221b6fa1]
2026-01-26 18:21:45.283 [clientInboundChannel-37] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@685966545 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:45.283 [clientInboundChannel-37] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:21:45.284 [clientInboundChannel-37] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-e5b857ec(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅁㅁㅁㅁㅁㅁㅁㅁㅁ(String), TALK(String), apt001(String), 2026-01-26T18:21:45.281724500(LocalDateTime), null
2026-01-26 18:21:45.285 [clientInboundChannel-37] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:21:45.286 [clientInboundChannel-37] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221b6fa1]
2026-01-26 18:21:45.287 [clientInboundChannel-37] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221b6fa1]
2026-01-26 18:21:45.287 [clientInboundChannel-37] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221b6fa1]
2026-01-26 18:21:45.287 [clientInboundChannel-37] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221b6fa1]
2026-01-26 18:21:45.288 [clientInboundChannel-37] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:45.288 [clientInboundChannel-37] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14fe83d3]
2026-01-26 18:21:45.289 [clientInboundChannel-37] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1815295502 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:45.289 [clientInboundChannel-37] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:21:45.289 [clientInboundChannel-37] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:21:45.288705200(LocalDateTime), room-e5b857ec(String)
2026-01-26 18:21:45.290 [clientInboundChannel-37] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:21:45.291 [clientInboundChannel-37] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14fe83d3]
2026-01-26 18:21:45.292 [clientInboundChannel-37] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14fe83d3]
2026-01-26 18:21:45.292 [clientInboundChannel-37] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14fe83d3]
2026-01-26 18:21:45.292 [clientInboundChannel-37] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14fe83d3]
2026-01-26 18:21:45.305 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:45.306 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a389deb]
2026-01-26 18:21:45.306 [reactor-http-nio-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@302839510 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:45.307 [reactor-http-nio-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:21:45.307 [reactor-http-nio-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-e5b857ec(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T18:21:45.304672100(LocalDateTime), null
2026-01-26 18:21:45.309 [reactor-http-nio-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:21:45.312 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a389deb]
2026-01-26 18:21:45.313 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a389deb]
2026-01-26 18:21:45.313 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a389deb]
2026-01-26 18:21:45.313 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a389deb]
2026-01-26 18:21:45.314 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:21:45.315 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a08ab4d]
2026-01-26 18:21:45.316 [reactor-http-nio-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@151568174 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:21:45.316 [reactor-http-nio-5] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:21:45.316 [reactor-http-nio-5] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:21:45.314644500(LocalDateTime), room-e5b857ec(String)
2026-01-26 18:21:45.318 [reactor-http-nio-5] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:21:45.320 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a08ab4d]
2026-01-26 18:21:45.320 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a08ab4d]
2026-01-26 18:21:45.320 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a08ab4d]
2026-01-26 18:21:45.321 [reactor-http-nio-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a08ab4d]
2026-01-26 18:22:11.646 [clientInboundChannel-38] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:22:11.647 [clientInboundChannel-38] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4add716]
2026-01-26 18:22:11.647 [clientInboundChannel-38] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@240499814 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:22:11.648 [clientInboundChannel-38] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:22:11.648 [clientInboundChannel-38] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-e5b857ec(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 나갔습니다.(String), LEAVE(String), apt001(String), 2026-01-26T18:22:11.643945500(LocalDateTime), null
2026-01-26 18:22:11.649 [clientInboundChannel-38] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:22:11.652 [clientInboundChannel-38] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4add716]
2026-01-26 18:22:11.653 [clientInboundChannel-38] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4add716]
2026-01-26 18:22:11.653 [clientInboundChannel-38] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4add716]
2026-01-26 18:22:11.653 [clientInboundChannel-38] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4add716]
2026-01-26 18:22:11.655 [clientInboundChannel-38] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:22:11.656 [clientInboundChannel-38] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@212848d3]
2026-01-26 18:22:11.656 [clientInboundChannel-38] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1497627908 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:22:11.656 [clientInboundChannel-38] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:22:11.657 [clientInboundChannel-38] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:22:11.655968900(LocalDateTime), room-e5b857ec(String)
2026-01-26 18:22:11.658 [clientInboundChannel-38] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:22:11.659 [clientInboundChannel-38] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@212848d3]
2026-01-26 18:22:11.659 [clientInboundChannel-38] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@212848d3]
2026-01-26 18:22:11.659 [clientInboundChannel-38] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@212848d3]
2026-01-26 18:22:11.659 [clientInboundChannel-38] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@212848d3]
2026-01-26 18:22:38.711 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:22:38.711 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d9833dc]
2026-01-26 18:22:38.712 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@745185142 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:22:38.712 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:22:38.713 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-749865bf(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T18:22:38.710063400(LocalDateTime), null, 2026-01-26T18:22:38.710063400(LocalDateTime), null, null
2026-01-26 18:22:38.715 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 18:22:38.718 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d9833dc]
2026-01-26 18:22:38.718 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d9833dc]
2026-01-26 18:22:38.719 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d9833dc]
2026-01-26 18:22:38.719 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d9833dc]
2026-01-26 18:22:38.723 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:22:38.724 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b49962]
2026-01-26 18:22:38.724 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2068790727 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:22:38.725 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:22:38.726 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-749865bf(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T18:22:38.722037300(LocalDateTime), null
2026-01-26 18:22:38.727 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:22:38.730 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b49962]
2026-01-26 18:22:38.731 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b49962]
2026-01-26 18:22:38.732 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b49962]
2026-01-26 18:22:38.732 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b49962]
2026-01-26 18:22:38.821 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:22:38.821 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d39e104]
2026-01-26 18:22:38.821 [clientInboundChannel-41] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1203866228 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:22:38.822 [clientInboundChannel-41] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:22:38.822 [clientInboundChannel-41] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-749865bf(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T18:22:38.820252500(LocalDateTime), null
2026-01-26 18:22:38.823 [clientInboundChannel-41] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:22:38.826 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d39e104]
2026-01-26 18:22:38.826 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d39e104]
2026-01-26 18:22:38.827 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d39e104]
2026-01-26 18:22:38.827 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d39e104]
2026-01-26 18:22:38.828 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:22:38.828 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70fc75]
2026-01-26 18:22:38.829 [clientInboundChannel-41] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2018673689 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:22:38.829 [clientInboundChannel-41] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:22:38.829 [clientInboundChannel-41] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:22:38.828231800(LocalDateTime), room-749865bf(String)
2026-01-26 18:22:38.831 [clientInboundChannel-41] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:22:38.832 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70fc75]
2026-01-26 18:22:38.832 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70fc75]
2026-01-26 18:22:38.833 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70fc75]
2026-01-26 18:22:38.833 [clientInboundChannel-41] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70fc75]
2026-01-26 18:24:06.789 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:24:06.790 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5d0c6b]
2026-01-26 18:24:06.790 [MessageBroker-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1868564048 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:24:06.790 [MessageBroker-7] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:24:06.791 [MessageBroker-7] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: CLOSED(String), room-98a037b9(String)
2026-01-26 18:24:06.792 [MessageBroker-7] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:24:06.794 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5d0c6b]
2026-01-26 18:24:06.794 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5d0c6b]
2026-01-26 18:24:06.794 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5d0c6b]
2026-01-26 18:24:06.794 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5d0c6b]
2026-01-26 18:24:06.797 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:24:06.797 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f231d7]
2026-01-26 18:24:06.798 [MessageBroker-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2067720803 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:24:06.798 [MessageBroker-7] DEBUG a.c.m.C.updateEndedAt - ==>  Preparing: UPDATE chat_session SET ended_at = ?, status = 'CLOSED', updated_at = NOW() WHERE room_id = ?
2026-01-26 18:24:06.799 [MessageBroker-7] DEBUG a.c.m.C.updateEndedAt - ==> Parameters: 2026-01-26T18:24:06.797638100(LocalDateTime), room-98a037b9(String)
2026-01-26 18:24:06.800 [MessageBroker-7] DEBUG a.c.m.C.updateEndedAt - <==    Updates: 1
2026-01-26 18:24:06.801 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f231d7]
2026-01-26 18:24:06.801 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f231d7]
2026-01-26 18:24:06.801 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f231d7]
2026-01-26 18:24:06.801 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f231d7]
2026-01-26 18:24:06.802 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:24:06.803 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf61b91]
2026-01-26 18:24:06.803 [MessageBroker-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@123735040 wrapping org.postgresql.jdbc.PgConnection@d1ccde7] will be managed by Spring
2026-01-26 18:24:06.803 [MessageBroker-7] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:24:06.804 [MessageBroker-7] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-98a037b9(String), system(String), System(String), SYSTEM(String), 장시간 대화가 없어 상담이 자동 종료되었습니다.(String), LEAVE(String), null, 2026-01-26T18:24:06.788007300(LocalDateTime), null
2026-01-26 18:24:06.805 [MessageBroker-7] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:24:06.807 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf61b91]
2026-01-26 18:24:06.808 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf61b91]
2026-01-26 18:24:06.808 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf61b91]
2026-01-26 18:24:06.808 [MessageBroker-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf61b91]
2026-01-26 18:25:27.440 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatHistoryMapper.class]
2026-01-26 18:25:27.441 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatSessionMapper.class]
2026-01-26 18:25:27.442 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\UserAccountMapper.class]
2026-01-26 18:25:27.444 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'aicc.chat.mapper.ChatHistoryMapper' mapperInterface
2026-01-26 18:25:27.448 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatHistoryMapper'.
2026-01-26 18:25:27.448 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatSessionMapper' and 'aicc.chat.mapper.ChatSessionMapper' mapperInterface
2026-01-26 18:25:27.449 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatSessionMapper'.
2026-01-26 18:25:27.449 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userAccountMapper' and 'aicc.chat.mapper.UserAccountMapper' mapperInterface
2026-01-26 18:25:27.450 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'userAccountMapper'.
2026-01-26 18:25:29.950 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Registered plugin: 'aicc.chat.config.MyBatisSqlLogger@2d3bb944'
2026-01-26 18:25:30.124 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatHistoryMapper.xml]'
2026-01-26 18:25:30.156 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatSessionMapper.xml]'
2026-01-26 18:25:30.174 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\UserAccountMapper.xml]'
2026-01-26 18:25:32.992 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:25:33.009 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694e0475]
2026-01-26 18:25:33.028 [MessageBroker-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@942652619 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:25:33.039 [MessageBroker-1] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:25:33.076 [MessageBroker-1] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: CLOSED(String), room-e5b857ec(String)
2026-01-26 18:25:33.097 [MessageBroker-1] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:25:33.104 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694e0475]
2026-01-26 18:25:33.106 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694e0475]
2026-01-26 18:25:33.108 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694e0475]
2026-01-26 18:25:33.108 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694e0475]
2026-01-26 18:25:33.117 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:25:33.117 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11212fc3]
2026-01-26 18:25:33.118 [MessageBroker-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1065895626 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:25:33.119 [MessageBroker-1] DEBUG a.c.m.C.updateEndedAt - ==>  Preparing: UPDATE chat_session SET ended_at = ?, status = 'CLOSED', updated_at = NOW() WHERE room_id = ?
2026-01-26 18:25:33.121 [MessageBroker-1] DEBUG a.c.m.C.updateEndedAt - ==> Parameters: 2026-01-26T18:25:33.117013900(LocalDateTime), room-e5b857ec(String)
2026-01-26 18:25:33.124 [MessageBroker-1] DEBUG a.c.m.C.updateEndedAt - <==    Updates: 1
2026-01-26 18:25:33.127 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11212fc3]
2026-01-26 18:25:33.128 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11212fc3]
2026-01-26 18:25:33.129 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11212fc3]
2026-01-26 18:25:33.129 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11212fc3]
2026-01-26 18:25:33.131 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:25:33.132 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f8e8fa7]
2026-01-26 18:25:33.133 [MessageBroker-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1575632007 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:25:33.134 [MessageBroker-1] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:25:33.138 [MessageBroker-1] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-e5b857ec(String), system(String), System(String), SYSTEM(String), 장시간 대화가 없어 상담이 자동 종료되었습니다.(String), LEAVE(String), null, 2026-01-26T18:25:32.490471800(LocalDateTime), null
2026-01-26 18:25:33.142 [MessageBroker-1] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:25:33.157 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f8e8fa7]
2026-01-26 18:25:33.159 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f8e8fa7]
2026-01-26 18:25:33.160 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f8e8fa7]
2026-01-26 18:25:33.160 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f8e8fa7]
2026-01-26 18:26:07.420 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:26:07.421 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5705daff] was not registered for synchronization because synchronization is not active
2026-01-26 18:26:07.426 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1129379957 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will not be managed by Spring
2026-01-26 18:26:07.426 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 18:26:07.427 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 18:26:07.460 [http-nio-28070-exec-3] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 18:26:07.460 [http-nio-28070-exec-3] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 18:26:07.463 [http-nio-28070-exec-3] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 18:26:07.500 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5705daff]
2026-01-26 18:26:16.668 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:26:16.669 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf77382] was not registered for synchronization because synchronization is not active
2026-01-26 18:26:16.670 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1588493600 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will not be managed by Spring
2026-01-26 18:26:16.671 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 18:26:16.673 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 18:26:16.676 [http-nio-28070-exec-8] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 18:26:16.677 [http-nio-28070-exec-8] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 18:26:16.679 [http-nio-28070-exec-8] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 18:26:16.683 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf77382]
2026-01-26 18:26:31.824 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:26:31.825 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@211d2ed5]
2026-01-26 18:26:31.826 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2137177910 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:26:31.827 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:26:31.829 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-b59165fc(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T18:26:31.823426500(LocalDateTime), null, 2026-01-26T18:26:31.823426500(LocalDateTime), null, null
2026-01-26 18:26:31.833 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 18:26:31.840 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@211d2ed5]
2026-01-26 18:26:31.841 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@211d2ed5]
2026-01-26 18:26:31.842 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@211d2ed5]
2026-01-26 18:26:31.842 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@211d2ed5]
2026-01-26 18:26:31.847 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:26:31.847 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca07c6d]
2026-01-26 18:26:31.848 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@197508252 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:26:31.849 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:26:31.851 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b59165fc(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T18:26:31.845365900(LocalDateTime), null
2026-01-26 18:26:31.853 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:26:31.856 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca07c6d]
2026-01-26 18:26:31.856 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca07c6d]
2026-01-26 18:26:31.857 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca07c6d]
2026-01-26 18:26:31.857 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca07c6d]
2026-01-26 18:26:31.962 [clientInboundChannel-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:26:31.963 [clientInboundChannel-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@187e26d6]
2026-01-26 18:26:31.963 [clientInboundChannel-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1562455860 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:26:31.964 [clientInboundChannel-8] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:26:31.964 [clientInboundChannel-8] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b59165fc(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T18:26:31.961076200(LocalDateTime), null
2026-01-26 18:26:31.966 [clientInboundChannel-8] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:26:31.970 [clientInboundChannel-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@187e26d6]
2026-01-26 18:26:31.971 [clientInboundChannel-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@187e26d6]
2026-01-26 18:26:31.972 [clientInboundChannel-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@187e26d6]
2026-01-26 18:26:31.973 [clientInboundChannel-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@187e26d6]
2026-01-26 18:26:31.975 [clientInboundChannel-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:26:31.976 [clientInboundChannel-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576e344]
2026-01-26 18:26:31.976 [clientInboundChannel-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1621404604 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:26:31.977 [clientInboundChannel-8] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:26:31.978 [clientInboundChannel-8] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:26:31.975043900(LocalDateTime), room-b59165fc(String)
2026-01-26 18:26:31.979 [clientInboundChannel-8] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:26:31.981 [clientInboundChannel-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576e344]
2026-01-26 18:26:31.981 [clientInboundChannel-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576e344]
2026-01-26 18:26:31.981 [clientInboundChannel-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576e344]
2026-01-26 18:26:31.981 [clientInboundChannel-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576e344]
2026-01-26 18:26:32.397 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:26:32.398 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30608efd]
2026-01-26 18:26:32.399 [MessageBroker-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1901954246 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:26:32.400 [MessageBroker-6] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:26:32.401 [MessageBroker-6] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: CLOSED(String), room-749865bf(String)
2026-01-26 18:26:32.403 [MessageBroker-6] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:26:32.404 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30608efd]
2026-01-26 18:26:32.404 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30608efd]
2026-01-26 18:26:32.404 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30608efd]
2026-01-26 18:26:32.404 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30608efd]
2026-01-26 18:26:32.406 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:26:32.406 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4066d708]
2026-01-26 18:26:32.407 [MessageBroker-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@292715401 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:26:32.407 [MessageBroker-6] DEBUG a.c.m.C.updateEndedAt - ==>  Preparing: UPDATE chat_session SET ended_at = ?, status = 'CLOSED', updated_at = NOW() WHERE room_id = ?
2026-01-26 18:26:32.408 [MessageBroker-6] DEBUG a.c.m.C.updateEndedAt - ==> Parameters: 2026-01-26T18:26:32.406637800(LocalDateTime), room-749865bf(String)
2026-01-26 18:26:32.409 [MessageBroker-6] DEBUG a.c.m.C.updateEndedAt - <==    Updates: 1
2026-01-26 18:26:32.411 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4066d708]
2026-01-26 18:26:32.412 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4066d708]
2026-01-26 18:26:32.412 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4066d708]
2026-01-26 18:26:32.412 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4066d708]
2026-01-26 18:26:32.413 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:26:32.414 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e06cc46]
2026-01-26 18:26:32.415 [MessageBroker-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@356288090 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:26:32.416 [MessageBroker-6] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:26:32.416 [MessageBroker-6] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-749865bf(String), system(String), System(String), SYSTEM(String), 장시간 대화가 없어 상담이 자동 종료되었습니다.(String), LEAVE(String), null, 2026-01-26T18:26:32.397659300(LocalDateTime), null
2026-01-26 18:26:32.418 [MessageBroker-6] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:26:32.420 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e06cc46]
2026-01-26 18:26:32.421 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e06cc46]
2026-01-26 18:26:32.421 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e06cc46]
2026-01-26 18:26:32.422 [MessageBroker-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e06cc46]
2026-01-26 18:27:13.351 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:27:13.352 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262cd46f]
2026-01-26 18:27:13.353 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1587655111 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:27:13.354 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:27:13.355 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: AGENT(String), room-b59165fc(String)
2026-01-26 18:27:13.357 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:27:13.359 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262cd46f]
2026-01-26 18:27:13.359 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262cd46f]
2026-01-26 18:27:13.360 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262cd46f]
2026-01-26 18:27:13.361 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262cd46f]
2026-01-26 18:27:13.364 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:27:13.364 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e26596]
2026-01-26 18:27:13.365 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@622992710 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:27:13.366 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateAssignedAgent - ==>  Preparing: UPDATE chat_session SET assigned_agent = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:27:13.367 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateAssignedAgent - ==> Parameters: 상담원-01(String), room-b59165fc(String)
2026-01-26 18:27:13.372 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateAssignedAgent - <==    Updates: 1
2026-01-26 18:27:13.374 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e26596]
2026-01-26 18:27:13.375 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e26596]
2026-01-26 18:27:13.376 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e26596]
2026-01-26 18:27:13.377 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e26596]
2026-01-26 18:27:13.380 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:27:13.381 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1caeb6d1]
2026-01-26 18:27:13.382 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@706747962 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:27:13.383 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:27:13.385 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b59165fc(String), SYSTEM(String), System(String), SYSTEM(String), 상담원-01 상담원과 연결되었습니다.(String), TALK(String), null, 2026-01-26T18:27:13.218511700(LocalDateTime), null
2026-01-26 18:27:13.390 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:27:13.396 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1caeb6d1]
2026-01-26 18:27:13.399 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1caeb6d1]
2026-01-26 18:27:13.399 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1caeb6d1]
2026-01-26 18:27:13.400 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1caeb6d1]
2026-01-26 18:30:32.393 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:30:32.395 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d14d4d6]
2026-01-26 18:30:32.395 [MessageBroker-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1938040014 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:30:32.396 [MessageBroker-1] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:30:32.400 [MessageBroker-1] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: CLOSED(String), room-b59165fc(String)
2026-01-26 18:30:32.404 [MessageBroker-1] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:30:32.406 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d14d4d6]
2026-01-26 18:30:32.407 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d14d4d6]
2026-01-26 18:30:32.408 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d14d4d6]
2026-01-26 18:30:32.408 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d14d4d6]
2026-01-26 18:30:32.415 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:30:32.416 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9360e4]
2026-01-26 18:30:32.416 [MessageBroker-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1732043410 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:30:32.417 [MessageBroker-1] DEBUG a.c.m.C.updateEndedAt - ==>  Preparing: UPDATE chat_session SET ended_at = ?, status = 'CLOSED', updated_at = NOW() WHERE room_id = ?
2026-01-26 18:30:32.419 [MessageBroker-1] DEBUG a.c.m.C.updateEndedAt - ==> Parameters: 2026-01-26T18:30:32.415517100(LocalDateTime), room-b59165fc(String)
2026-01-26 18:30:32.421 [MessageBroker-1] DEBUG a.c.m.C.updateEndedAt - <==    Updates: 1
2026-01-26 18:30:32.423 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9360e4]
2026-01-26 18:30:32.424 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9360e4]
2026-01-26 18:30:32.424 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9360e4]
2026-01-26 18:30:32.424 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9360e4]
2026-01-26 18:30:32.431 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:30:32.432 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@687efdf]
2026-01-26 18:30:32.432 [MessageBroker-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1345691000 wrapping org.postgresql.jdbc.PgConnection@391a3cc6] will be managed by Spring
2026-01-26 18:30:32.433 [MessageBroker-1] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:30:32.523 [MessageBroker-1] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-b59165fc(String), system(String), System(String), SYSTEM(String), 장시간 대화가 없어 상담이 자동 종료되었습니다.(String), LEAVE(String), null, 2026-01-26T18:30:32.392578600(LocalDateTime), null
2026-01-26 18:30:32.527 [MessageBroker-1] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:30:32.535 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@687efdf]
2026-01-26 18:30:32.536 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@687efdf]
2026-01-26 18:30:32.536 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@687efdf]
2026-01-26 18:30:32.537 [MessageBroker-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@687efdf]
2026-01-26 18:34:20.384 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatHistoryMapper.class]
2026-01-26 18:34:20.385 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatSessionMapper.class]
2026-01-26 18:34:20.386 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\UserAccountMapper.class]
2026-01-26 18:34:20.389 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'aicc.chat.mapper.ChatHistoryMapper' mapperInterface
2026-01-26 18:34:20.394 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatHistoryMapper'.
2026-01-26 18:34:20.395 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatSessionMapper' and 'aicc.chat.mapper.ChatSessionMapper' mapperInterface
2026-01-26 18:34:20.396 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatSessionMapper'.
2026-01-26 18:34:20.397 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userAccountMapper' and 'aicc.chat.mapper.UserAccountMapper' mapperInterface
2026-01-26 18:34:20.399 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'userAccountMapper'.
2026-01-26 18:34:23.604 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Registered plugin: 'aicc.chat.config.MyBatisSqlLogger@749ee0e3'
2026-01-26 18:34:23.775 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatHistoryMapper.xml]'
2026-01-26 18:34:23.809 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatSessionMapper.xml]'
2026-01-26 18:34:23.828 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\UserAccountMapper.xml]'
2026-01-26 18:35:03.079 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:03.112 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ac0493] was not registered for synchronization because synchronization is not active
2026-01-26 18:35:03.521 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1877958939 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will not be managed by Spring
2026-01-26 18:35:03.530 [http-nio-28070-exec-4] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 18:35:03.560 [http-nio-28070-exec-4] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 18:35:03.602 [http-nio-28070-exec-4] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 18:35:03.603 [http-nio-28070-exec-4] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 18:35:03.609 [http-nio-28070-exec-4] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 18:35:03.634 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ac0493]
2026-01-26 18:35:05.876 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:05.877 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b80dda6] was not registered for synchronization because synchronization is not active
2026-01-26 18:35:05.878 [http-nio-28070-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@984127121 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will not be managed by Spring
2026-01-26 18:35:05.879 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 18:35:05.881 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 18:35:05.884 [http-nio-28070-exec-9] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 18:35:05.885 [http-nio-28070-exec-9] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 18:35:05.886 [http-nio-28070-exec-9] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 18:35:05.892 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b80dda6]
2026-01-26 18:35:12.917 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:12.918 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78daf8ff]
2026-01-26 18:35:12.921 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1878228447 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:12.922 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:35:12.924 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-28aa714d(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T18:35:12.901150100(LocalDateTime), null, 2026-01-26T18:35:12.901150100(LocalDateTime), null, null
2026-01-26 18:35:12.930 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 18:35:12.937 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78daf8ff]
2026-01-26 18:35:12.939 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78daf8ff]
2026-01-26 18:35:12.940 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78daf8ff]
2026-01-26 18:35:12.942 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78daf8ff]
2026-01-26 18:35:12.958 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:12.958 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@beec9a0]
2026-01-26 18:35:12.959 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1427533112 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:12.960 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:35:12.962 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-28aa714d(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T18:35:12.947948400(LocalDateTime), null
2026-01-26 18:35:12.966 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:35:12.970 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@beec9a0]
2026-01-26 18:35:12.971 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@beec9a0]
2026-01-26 18:35:12.972 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@beec9a0]
2026-01-26 18:35:12.972 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@beec9a0]
2026-01-26 18:35:13.286 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:13.287 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3328a8c9]
2026-01-26 18:35:13.287 [clientInboundChannel-13] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1068674053 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:13.288 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:35:13.289 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-28aa714d(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T18:35:13.284754700(LocalDateTime), null
2026-01-26 18:35:13.291 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:35:13.296 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3328a8c9]
2026-01-26 18:35:13.305 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3328a8c9]
2026-01-26 18:35:13.306 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3328a8c9]
2026-01-26 18:35:13.306 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3328a8c9]
2026-01-26 18:35:13.308 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:13.309 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de984a6]
2026-01-26 18:35:13.310 [clientInboundChannel-13] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1832669487 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:13.325 [clientInboundChannel-13] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:35:13.327 [clientInboundChannel-13] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:35:13.308690500(LocalDateTime), room-28aa714d(String)
2026-01-26 18:35:13.338 [clientInboundChannel-13] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:35:13.341 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de984a6]
2026-01-26 18:35:13.341 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de984a6]
2026-01-26 18:35:13.342 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de984a6]
2026-01-26 18:35:13.342 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de984a6]
2026-01-26 18:35:18.048 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:18.049 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1934d634]
2026-01-26 18:35:18.050 [clientInboundChannel-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@332184900 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:18.050 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:35:18.051 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-28aa714d(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T18:35:18.046204100(LocalDateTime), null
2026-01-26 18:35:18.053 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:35:18.056 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1934d634]
2026-01-26 18:35:18.057 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1934d634]
2026-01-26 18:35:18.058 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1934d634]
2026-01-26 18:35:18.058 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1934d634]
2026-01-26 18:35:18.060 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:18.060 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f4c8c2]
2026-01-26 18:35:18.061 [clientInboundChannel-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@293790102 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:18.061 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:35:18.062 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:35:18.060170800(LocalDateTime), room-28aa714d(String)
2026-01-26 18:35:18.063 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:35:18.066 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f4c8c2]
2026-01-26 18:35:18.066 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f4c8c2]
2026-01-26 18:35:18.066 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f4c8c2]
2026-01-26 18:35:18.067 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f4c8c2]
2026-01-26 18:35:18.098 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:18.098 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c8e3438]
2026-01-26 18:35:18.099 [clientInboundChannel-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@850363462 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:18.100 [clientInboundChannel-16] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:35:18.101 [clientInboundChannel-16] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: WAITING(String), room-28aa714d(String)
2026-01-26 18:35:18.103 [clientInboundChannel-16] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:35:18.106 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c8e3438]
2026-01-26 18:35:18.107 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c8e3438]
2026-01-26 18:35:18.107 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c8e3438]
2026-01-26 18:35:18.108 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c8e3438]
2026-01-26 18:35:18.112 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:18.113 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53eb64ea]
2026-01-26 18:35:18.114 [clientInboundChannel-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@549455169 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:18.114 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:35:18.116 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-28aa714d(String), SYSTEM(String), System(String), SYSTEM(String), 상담원 연결을 요청하였습니다. 상담원이 연결될 때까지 잠시만 기다려 주세요.(String), TALK(String), null, 2026-01-26T18:35:18.095601300(LocalDateTime), null
2026-01-26 18:35:18.118 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:35:18.123 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53eb64ea]
2026-01-26 18:35:18.124 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53eb64ea]
2026-01-26 18:35:18.124 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53eb64ea]
2026-01-26 18:35:18.125 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53eb64ea]
2026-01-26 18:35:24.721 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:24.722 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b669f57]
2026-01-26 18:35:24.722 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1446454348 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:24.725 [http-nio-28070-exec-7] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:35:24.727 [http-nio-28070-exec-7] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: AGENT(String), room-28aa714d(String)
2026-01-26 18:35:24.731 [http-nio-28070-exec-7] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:35:24.734 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b669f57]
2026-01-26 18:35:24.735 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b669f57]
2026-01-26 18:35:24.735 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b669f57]
2026-01-26 18:35:24.735 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b669f57]
2026-01-26 18:35:24.750 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:24.751 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c98400b]
2026-01-26 18:35:24.752 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@657129637 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:24.754 [http-nio-28070-exec-7] DEBUG a.c.m.C.updateAssignedAgent - ==>  Preparing: UPDATE chat_session SET assigned_agent = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:35:24.755 [http-nio-28070-exec-7] DEBUG a.c.m.C.updateAssignedAgent - ==> Parameters: 상담원-01(String), room-28aa714d(String)
2026-01-26 18:35:24.764 [http-nio-28070-exec-7] DEBUG a.c.m.C.updateAssignedAgent - <==    Updates: 1
2026-01-26 18:35:24.769 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c98400b]
2026-01-26 18:35:24.771 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c98400b]
2026-01-26 18:35:24.771 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c98400b]
2026-01-26 18:35:24.772 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c98400b]
2026-01-26 18:35:24.776 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:24.778 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25a2b38c]
2026-01-26 18:35:24.781 [http-nio-28070-exec-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@405133596 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:24.782 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:35:24.784 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-28aa714d(String), SYSTEM(String), System(String), SYSTEM(String), 상담원-01 상담원과 연결되었습니다.(String), TALK(String), null, 2026-01-26T18:35:24.688555800(LocalDateTime), null
2026-01-26 18:35:24.788 [http-nio-28070-exec-7] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:35:24.794 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25a2b38c]
2026-01-26 18:35:24.797 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25a2b38c]
2026-01-26 18:35:24.798 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25a2b38c]
2026-01-26 18:35:24.798 [http-nio-28070-exec-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25a2b38c]
2026-01-26 18:35:30.818 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:30.819 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ee6c888]
2026-01-26 18:35:30.819 [http-nio-28070-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@322016450 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:30.820 [http-nio-28070-exec-9] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:35:30.822 [http-nio-28070-exec-9] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: BOT(String), room-28aa714d(String)
2026-01-26 18:35:30.824 [http-nio-28070-exec-9] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:35:30.831 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ee6c888]
2026-01-26 18:35:30.834 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ee6c888]
2026-01-26 18:35:30.835 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ee6c888]
2026-01-26 18:35:30.836 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ee6c888]
2026-01-26 18:35:30.840 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:30.841 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7de9dc61]
2026-01-26 18:35:30.841 [http-nio-28070-exec-9] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1670176886 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:30.843 [http-nio-28070-exec-9] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:35:30.847 [http-nio-28070-exec-9] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-28aa714d(String), SYSTEM(String), System(String), SYSTEM(String), 상담원과의 상담이 종료되었습니다. 다시 챗봇과 대화하실 수 있습니다.(String), TALK(String), null, 2026-01-26T18:35:30.808300500(LocalDateTime), null
2026-01-26 18:35:30.852 [http-nio-28070-exec-9] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:35:30.862 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7de9dc61]
2026-01-26 18:35:30.876 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7de9dc61]
2026-01-26 18:35:30.879 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7de9dc61]
2026-01-26 18:35:30.880 [http-nio-28070-exec-9] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7de9dc61]
2026-01-26 18:35:37.423 [clientInboundChannel-14] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:37.424 [clientInboundChannel-14] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78545696]
2026-01-26 18:35:37.425 [clientInboundChannel-14] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@780574393 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:37.425 [clientInboundChannel-14] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:35:37.428 [clientInboundChannel-14] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-28aa714d(String), cust01(String), 홍길철(String), CUSTOMER(String), ㅁㅁㅁ(String), TALK(String), apt001(String), 2026-01-26T18:35:37.422282100(LocalDateTime), null
2026-01-26 18:35:37.431 [clientInboundChannel-14] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:35:37.434 [clientInboundChannel-14] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78545696]
2026-01-26 18:35:37.435 [clientInboundChannel-14] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78545696]
2026-01-26 18:35:37.436 [clientInboundChannel-14] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78545696]
2026-01-26 18:35:37.436 [clientInboundChannel-14] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78545696]
2026-01-26 18:35:37.438 [clientInboundChannel-14] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:37.439 [clientInboundChannel-14] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c94ac45]
2026-01-26 18:35:37.440 [clientInboundChannel-14] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1154737884 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:37.440 [clientInboundChannel-14] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:35:37.440 [clientInboundChannel-14] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:35:37.438245(LocalDateTime), room-28aa714d(String)
2026-01-26 18:35:37.442 [clientInboundChannel-14] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:35:37.443 [clientInboundChannel-14] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c94ac45]
2026-01-26 18:35:37.443 [clientInboundChannel-14] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c94ac45]
2026-01-26 18:35:37.444 [clientInboundChannel-14] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c94ac45]
2026-01-26 18:35:37.444 [clientInboundChannel-14] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c94ac45]
2026-01-26 18:35:37.717 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:37.718 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5215f8e3]
2026-01-26 18:35:37.719 [reactor-http-nio-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1412788082 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:37.720 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:35:37.721 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-28aa714d(String), BOT(String), Bot(String), BOT(String), 서비스 연결에 실패했습니다.(String), TALK(String), apt001(String), 2026-01-26T18:35:37.715563700(LocalDateTime), null
2026-01-26 18:35:37.726 [reactor-http-nio-3] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:35:37.734 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5215f8e3]
2026-01-26 18:35:37.735 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5215f8e3]
2026-01-26 18:35:37.735 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5215f8e3]
2026-01-26 18:35:37.736 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5215f8e3]
2026-01-26 18:35:37.737 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:35:37.738 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a48a8]
2026-01-26 18:35:37.738 [reactor-http-nio-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1720099050 wrapping org.postgresql.jdbc.PgConnection@38e1bd5d] will be managed by Spring
2026-01-26 18:35:37.739 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:35:37.740 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:35:37.737036600(LocalDateTime), room-28aa714d(String)
2026-01-26 18:35:37.741 [reactor-http-nio-3] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:35:37.743 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a48a8]
2026-01-26 18:35:37.743 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a48a8]
2026-01-26 18:35:37.744 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a48a8]
2026-01-26 18:35:37.744 [reactor-http-nio-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a48a8]
2026-01-26 18:40:34.254 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatHistoryMapper.class]
2026-01-26 18:40:34.255 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\ChatSessionMapper.class]
2026-01-26 18:40:34.256 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Identified candidate component class: file [E:\aicc-dev\aicc\aicc-chat\bin\main\aicc\chat\mapper\UserAccountMapper.class]
2026-01-26 18:40:34.259 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatHistoryMapper' and 'aicc.chat.mapper.ChatHistoryMapper' mapperInterface
2026-01-26 18:40:34.264 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatHistoryMapper'.
2026-01-26 18:40:34.264 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'chatSessionMapper' and 'aicc.chat.mapper.ChatSessionMapper' mapperInterface
2026-01-26 18:40:34.266 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'chatSessionMapper'.
2026-01-26 18:40:34.266 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Creating MapperFactoryBean with name 'userAccountMapper' and 'aicc.chat.mapper.UserAccountMapper' mapperInterface
2026-01-26 18:40:34.267 [main] DEBUG o.m.s.mapper.ClassPathMapperScanner - Enabling autowire by type for MapperFactoryBean with name 'userAccountMapper'.
2026-01-26 18:40:37.184 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Registered plugin: 'aicc.chat.config.MyBatisSqlLogger@7d47b021'
2026-01-26 18:40:37.415 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatHistoryMapper.xml]'
2026-01-26 18:40:37.461 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\ChatSessionMapper.xml]'
2026-01-26 18:40:37.485 [main] DEBUG o.m.spring.SqlSessionFactoryBean - Parsed mapper file: 'file [E:\aicc-dev\aicc\aicc-chat\bin\main\mybatis\mapper\UserAccountMapper.xml]'
2026-01-26 18:41:51.938 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:41:51.952 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33b53462] was not registered for synchronization because synchronization is not active
2026-01-26 18:41:52.246 [http-nio-28070-exec-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1293690788 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will not be managed by Spring
2026-01-26 18:41:52.253 [http-nio-28070-exec-4] DEBUG a.c.m.U.selectAgentByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'AGENT' AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 18:41:52.274 [http-nio-28070-exec-4] DEBUG a.c.m.U.selectAgentByLogin - ==> Parameters: agent01(String), 1234(String)
2026-01-26 18:41:52.313 [http-nio-28070-exec-4] TRACE a.c.m.U.selectAgentByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 18:41:52.314 [http-nio-28070-exec-4] TRACE a.c.m.U.selectAgentByLogin - <==        Row: 9, agent01, 상담원-01, 1234, AGENT, agent01@aicc.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 18:41:52.318 [http-nio-28070-exec-4] DEBUG a.c.m.U.selectAgentByLogin - <==      Total: 1
2026-01-26 18:41:52.336 [http-nio-28070-exec-4] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33b53462]
2026-01-26 18:41:56.498 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:41:56.498 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f855ae5] was not registered for synchronization because synchronization is not active
2026-01-26 18:41:56.499 [http-nio-28070-exec-2] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1167119631 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will not be managed by Spring
2026-01-26 18:41:56.500 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==>  Preparing: SELECT id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at FROM user_account WHERE user_id = ? AND role = 'CUSTOMER' AND company_id = ? AND active = TRUE AND ( password IS NULL OR password = '' OR password = ? ) LIMIT 1
2026-01-26 18:41:56.500 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - ==> Parameters: cust01(String), apt001(String), 1234(String)
2026-01-26 18:41:56.502 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==    Columns: id, user_id, user_name, password, role, email, company_id, active, created_at, updated_at
2026-01-26 18:41:56.502 [http-nio-28070-exec-2] TRACE a.c.m.U.selectCustomerByLogin - <==        Row: 12, cust01, 홍길철, 1234, CUSTOMER, cust01@example.com, apt001, t, 2026-01-26 09:35:12.879538, 2026-01-26 09:35:12.879538
2026-01-26 18:41:56.503 [http-nio-28070-exec-2] DEBUG a.c.m.U.selectCustomerByLogin - <==      Total: 1
2026-01-26 18:41:56.506 [http-nio-28070-exec-2] DEBUG org.mybatis.spring.SqlSessionUtils - Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f855ae5]
2026-01-26 18:41:58.000 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:41:58.010 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6115b0db]
2026-01-26 18:41:58.013 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@501719116 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:41:58.014 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - ==>  Preparing: INSERT INTO chat_session ( room_id, room_name, customer_id, customer_name, assigned_agent, status, company_id, started_at, ended_at, last_activity_at, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), ?, COALESCE(?, NOW()), COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:41:58.017 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - ==> Parameters: room-008fd19e(String), cust01(String), cust01(String), 홍길철(String), null, BOT(String), apt001(String), 2026-01-26T18:41:57.987632600(LocalDateTime), null, 2026-01-26T18:41:57.987632600(LocalDateTime), null, null
2026-01-26 18:41:58.023 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatSession - <==    Updates: 1
2026-01-26 18:41:58.032 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6115b0db]
2026-01-26 18:41:58.033 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6115b0db]
2026-01-26 18:41:58.034 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6115b0db]
2026-01-26 18:41:58.035 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6115b0db]
2026-01-26 18:41:58.051 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:41:58.052 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6af245c5]
2026-01-26 18:41:58.053 [http-nio-28070-exec-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@258488214 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:41:58.054 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:41:58.057 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), BOT(String), Bot(String), BOT(String), 안녕하세요! 무엇을 도와드릴까요? '상담원 연결'을 입력하시면 상담원과 연결해 드립니다.(String), TALK(String), null, 2026-01-26T18:41:58.041198200(LocalDateTime), null
2026-01-26 18:41:58.062 [http-nio-28070-exec-3] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:41:58.067 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6af245c5]
2026-01-26 18:41:58.068 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6af245c5]
2026-01-26 18:41:58.069 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6af245c5]
2026-01-26 18:41:58.069 [http-nio-28070-exec-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6af245c5]
2026-01-26 18:41:58.204 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:41:58.204 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e48e9d5]
2026-01-26 18:41:58.205 [clientInboundChannel-13] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@729508071 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:41:58.205 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:41:58.207 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), cust01(String), 홍길철(String), CUSTOMER(String), 홍길철님이 입장하셨습니다.(String), JOIN(String), apt001(String), 2026-01-26T18:41:58.202183800(LocalDateTime), null
2026-01-26 18:41:58.209 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:41:58.215 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e48e9d5]
2026-01-26 18:41:58.217 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e48e9d5]
2026-01-26 18:41:58.218 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e48e9d5]
2026-01-26 18:41:58.218 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e48e9d5]
2026-01-26 18:41:58.220 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:41:58.221 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9c09c5]
2026-01-26 18:41:58.221 [clientInboundChannel-13] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@357439204 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:41:58.222 [clientInboundChannel-13] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:41:58.223 [clientInboundChannel-13] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:41:58.220146600(LocalDateTime), room-008fd19e(String)
2026-01-26 18:41:58.231 [clientInboundChannel-13] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:41:58.234 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9c09c5]
2026-01-26 18:41:58.234 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9c09c5]
2026-01-26 18:41:58.235 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9c09c5]
2026-01-26 18:41:58.235 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9c09c5]
2026-01-26 18:42:07.037 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:07.038 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79d89b90]
2026-01-26 18:42:07.039 [clientInboundChannel-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1215022549 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:07.040 [clientInboundChannel-1] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:07.040 [clientInboundChannel-1] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T18:42:07.034315500(LocalDateTime), null
2026-01-26 18:42:07.056 [clientInboundChannel-1] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:07.060 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79d89b90]
2026-01-26 18:42:07.062 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79d89b90]
2026-01-26 18:42:07.062 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79d89b90]
2026-01-26 18:42:07.062 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79d89b90]
2026-01-26 18:42:07.066 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:07.066 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f764df]
2026-01-26 18:42:07.067 [clientInboundChannel-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1756199412 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:07.068 [clientInboundChannel-1] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:07.068 [clientInboundChannel-1] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:42:07.065129700(LocalDateTime), room-008fd19e(String)
2026-01-26 18:42:07.070 [clientInboundChannel-1] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:42:07.072 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f764df]
2026-01-26 18:42:07.072 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f764df]
2026-01-26 18:42:07.072 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f764df]
2026-01-26 18:42:07.073 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f764df]
2026-01-26 18:42:07.124 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:07.125 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113fc663]
2026-01-26 18:42:07.127 [clientInboundChannel-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2137040274 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:07.129 [clientInboundChannel-1] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:07.130 [clientInboundChannel-1] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: WAITING(String), room-008fd19e(String)
2026-01-26 18:42:07.134 [clientInboundChannel-1] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:42:07.136 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113fc663]
2026-01-26 18:42:07.137 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113fc663]
2026-01-26 18:42:07.137 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113fc663]
2026-01-26 18:42:07.138 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113fc663]
2026-01-26 18:42:07.139 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:07.140 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45a3191b]
2026-01-26 18:42:07.140 [clientInboundChannel-1] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1590816458 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:07.141 [clientInboundChannel-1] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:07.143 [clientInboundChannel-1] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), SYSTEM(String), System(String), SYSTEM(String), 상담원 연결을 요청하였습니다. 상담원이 연결될 때까지 잠시만 기다려 주세요.(String), TALK(String), null, 2026-01-26T18:42:07.121514600(LocalDateTime), null
2026-01-26 18:42:07.145 [clientInboundChannel-1] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:07.155 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45a3191b]
2026-01-26 18:42:07.156 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45a3191b]
2026-01-26 18:42:07.157 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45a3191b]
2026-01-26 18:42:07.157 [clientInboundChannel-1] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45a3191b]
2026-01-26 18:42:12.662 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:12.663 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@626005da]
2026-01-26 18:42:12.665 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@171508695 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:12.667 [http-nio-28070-exec-8] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:12.669 [http-nio-28070-exec-8] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: AGENT(String), room-008fd19e(String)
2026-01-26 18:42:12.672 [http-nio-28070-exec-8] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:42:12.675 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@626005da]
2026-01-26 18:42:12.677 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@626005da]
2026-01-26 18:42:12.677 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@626005da]
2026-01-26 18:42:12.678 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@626005da]
2026-01-26 18:42:12.692 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:12.693 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65b79be4]
2026-01-26 18:42:12.694 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1502742507 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:12.694 [http-nio-28070-exec-8] DEBUG a.c.m.C.updateAssignedAgent - ==>  Preparing: UPDATE chat_session SET assigned_agent = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:12.696 [http-nio-28070-exec-8] DEBUG a.c.m.C.updateAssignedAgent - ==> Parameters: 상담원-01(String), room-008fd19e(String)
2026-01-26 18:42:12.701 [http-nio-28070-exec-8] DEBUG a.c.m.C.updateAssignedAgent - <==    Updates: 1
2026-01-26 18:42:12.705 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65b79be4]
2026-01-26 18:42:12.708 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65b79be4]
2026-01-26 18:42:12.709 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65b79be4]
2026-01-26 18:42:12.709 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65b79be4]
2026-01-26 18:42:12.711 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:12.711 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe71494]
2026-01-26 18:42:12.713 [http-nio-28070-exec-8] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@823431931 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:12.714 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:12.715 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), SYSTEM(String), System(String), SYSTEM(String), 상담원-01 상담원과 연결되었습니다.(String), TALK(String), null, 2026-01-26T18:42:12.547904(LocalDateTime), null
2026-01-26 18:42:12.768 [http-nio-28070-exec-8] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:12.772 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe71494]
2026-01-26 18:42:12.774 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe71494]
2026-01-26 18:42:12.774 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe71494]
2026-01-26 18:42:12.774 [http-nio-28070-exec-8] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe71494]
2026-01-26 18:42:15.813 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:15.813 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@909bc3f]
2026-01-26 18:42:15.815 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1667651524 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:15.816 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:15.818 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: BOT(String), room-008fd19e(String)
2026-01-26 18:42:15.829 [http-nio-28070-exec-10] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:42:15.832 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@909bc3f]
2026-01-26 18:42:15.833 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@909bc3f]
2026-01-26 18:42:15.834 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@909bc3f]
2026-01-26 18:42:15.834 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@909bc3f]
2026-01-26 18:42:15.845 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:15.845 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7d4838]
2026-01-26 18:42:15.847 [http-nio-28070-exec-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@452227964 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:15.849 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:15.852 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), SYSTEM(String), System(String), SYSTEM(String), 상담원과의 상담이 종료되었습니다. 다시 챗봇과 대화하실 수 있습니다.(String), TALK(String), null, 2026-01-26T18:42:15.797229100(LocalDateTime), null
2026-01-26 18:42:15.871 [http-nio-28070-exec-10] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:15.882 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7d4838]
2026-01-26 18:42:15.886 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7d4838]
2026-01-26 18:42:15.887 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7d4838]
2026-01-26 18:42:15.888 [http-nio-28070-exec-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7d4838]
2026-01-26 18:42:21.413 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:21.414 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49bb0e8a]
2026-01-26 18:42:21.414 [clientInboundChannel-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1410158849 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:21.415 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:21.416 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T18:42:21.412005100(LocalDateTime), null
2026-01-26 18:42:21.418 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:21.421 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49bb0e8a]
2026-01-26 18:42:21.422 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49bb0e8a]
2026-01-26 18:42:21.423 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49bb0e8a]
2026-01-26 18:42:21.423 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49bb0e8a]
2026-01-26 18:42:21.426 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:21.426 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c42609c]
2026-01-26 18:42:21.427 [clientInboundChannel-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1831355627 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:21.427 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:21.429 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:42:21.426509700(LocalDateTime), room-008fd19e(String)
2026-01-26 18:42:21.430 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:42:21.432 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c42609c]
2026-01-26 18:42:21.432 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c42609c]
2026-01-26 18:42:21.432 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c42609c]
2026-01-26 18:42:21.433 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c42609c]
2026-01-26 18:42:21.462 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:21.463 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bce7f2c]
2026-01-26 18:42:21.464 [clientInboundChannel-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1434359704 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:21.465 [clientInboundChannel-16] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:21.465 [clientInboundChannel-16] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: WAITING(String), room-008fd19e(String)
2026-01-26 18:42:21.469 [clientInboundChannel-16] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:42:21.471 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bce7f2c]
2026-01-26 18:42:21.473 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bce7f2c]
2026-01-26 18:42:21.473 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bce7f2c]
2026-01-26 18:42:21.473 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bce7f2c]
2026-01-26 18:42:21.477 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:21.477 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a452a7b]
2026-01-26 18:42:21.478 [clientInboundChannel-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@186087581 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:21.478 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:21.479 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), SYSTEM(String), System(String), SYSTEM(String), 상담원 연결을 요청하였습니다. 상담원이 연결될 때까지 잠시만 기다려 주세요.(String), TALK(String), null, 2026-01-26T18:42:21.461939100(LocalDateTime), null
2026-01-26 18:42:21.482 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:21.498 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a452a7b]
2026-01-26 18:42:21.498 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a452a7b]
2026-01-26 18:42:21.499 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a452a7b]
2026-01-26 18:42:21.499 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a452a7b]
2026-01-26 18:42:25.478 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:25.479 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550c9b5c]
2026-01-26 18:42:25.480 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1376305780 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:25.480 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:25.481 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: AGENT(String), room-008fd19e(String)
2026-01-26 18:42:25.483 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:42:25.485 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550c9b5c]
2026-01-26 18:42:25.486 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550c9b5c]
2026-01-26 18:42:25.486 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550c9b5c]
2026-01-26 18:42:25.486 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550c9b5c]
2026-01-26 18:42:25.501 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:25.501 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ca9967]
2026-01-26 18:42:25.502 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1291372289 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:25.503 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateAssignedAgent - ==>  Preparing: UPDATE chat_session SET assigned_agent = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:25.503 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateAssignedAgent - ==> Parameters: 상담원-01(String), room-008fd19e(String)
2026-01-26 18:42:25.509 [http-nio-28070-exec-5] DEBUG a.c.m.C.updateAssignedAgent - <==    Updates: 1
2026-01-26 18:42:25.512 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ca9967]
2026-01-26 18:42:25.516 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ca9967]
2026-01-26 18:42:25.517 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ca9967]
2026-01-26 18:42:25.518 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ca9967]
2026-01-26 18:42:25.519 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:25.520 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c770ae9]
2026-01-26 18:42:25.521 [http-nio-28070-exec-5] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@222303390 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:25.522 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:25.524 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), SYSTEM(String), System(String), SYSTEM(String), 상담원-01 상담원과 연결되었습니다.(String), TALK(String), null, 2026-01-26T18:42:25.391925800(LocalDateTime), null
2026-01-26 18:42:25.526 [http-nio-28070-exec-5] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:25.531 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c770ae9]
2026-01-26 18:42:25.533 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c770ae9]
2026-01-26 18:42:25.534 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c770ae9]
2026-01-26 18:42:25.534 [http-nio-28070-exec-5] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c770ae9]
2026-01-26 18:42:34.166 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:34.167 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f85cb7]
2026-01-26 18:42:34.167 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@280048105 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:34.167 [http-nio-28070-exec-6] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:34.168 [http-nio-28070-exec-6] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: BOT(String), room-008fd19e(String)
2026-01-26 18:42:34.169 [http-nio-28070-exec-6] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:42:34.170 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f85cb7]
2026-01-26 18:42:34.171 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f85cb7]
2026-01-26 18:42:34.171 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f85cb7]
2026-01-26 18:42:34.172 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f85cb7]
2026-01-26 18:42:34.184 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:34.184 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67f6cb1d]
2026-01-26 18:42:34.185 [http-nio-28070-exec-6] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@425403727 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:34.185 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:34.186 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), SYSTEM(String), System(String), SYSTEM(String), 상담원과의 상담이 종료되었습니다. 다시 챗봇과 대화하실 수 있습니다.(String), TALK(String), null, 2026-01-26T18:42:34.159060400(LocalDateTime), null
2026-01-26 18:42:34.190 [http-nio-28070-exec-6] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:34.193 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67f6cb1d]
2026-01-26 18:42:34.193 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67f6cb1d]
2026-01-26 18:42:34.194 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67f6cb1d]
2026-01-26 18:42:34.195 [http-nio-28070-exec-6] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67f6cb1d]
2026-01-26 18:42:37.027 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:37.028 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e212517]
2026-01-26 18:42:37.029 [clientInboundChannel-13] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@871105439 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:37.029 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:37.031 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T18:42:37.026790600(LocalDateTime), null
2026-01-26 18:42:37.034 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:37.038 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e212517]
2026-01-26 18:42:37.038 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e212517]
2026-01-26 18:42:37.039 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e212517]
2026-01-26 18:42:37.039 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e212517]
2026-01-26 18:42:37.042 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:37.043 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be37f62]
2026-01-26 18:42:37.043 [clientInboundChannel-13] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@955587671 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:37.043 [clientInboundChannel-13] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:37.044 [clientInboundChannel-13] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:42:37.042748100(LocalDateTime), room-008fd19e(String)
2026-01-26 18:42:37.046 [clientInboundChannel-13] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:42:37.048 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be37f62]
2026-01-26 18:42:37.048 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be37f62]
2026-01-26 18:42:37.049 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be37f62]
2026-01-26 18:42:37.049 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be37f62]
2026-01-26 18:42:37.096 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:37.096 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739e57b7]
2026-01-26 18:42:37.097 [clientInboundChannel-13] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@845588564 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:37.098 [clientInboundChannel-13] DEBUG a.c.m.C.updateChatSessionStatus - ==>  Preparing: UPDATE chat_session SET status = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:37.099 [clientInboundChannel-13] DEBUG a.c.m.C.updateChatSessionStatus - ==> Parameters: WAITING(String), room-008fd19e(String)
2026-01-26 18:42:37.100 [clientInboundChannel-13] DEBUG a.c.m.C.updateChatSessionStatus - <==    Updates: 1
2026-01-26 18:42:37.103 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739e57b7]
2026-01-26 18:42:37.105 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739e57b7]
2026-01-26 18:42:37.105 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739e57b7]
2026-01-26 18:42:37.105 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739e57b7]
2026-01-26 18:42:37.107 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:37.108 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e6e2ec]
2026-01-26 18:42:37.109 [clientInboundChannel-13] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1282478666 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:37.109 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:37.110 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), SYSTEM(String), System(String), SYSTEM(String), 상담원 연결을 요청하였습니다. 상담원이 연결될 때까지 잠시만 기다려 주세요.(String), TALK(String), null, 2026-01-26T18:42:37.092258300(LocalDateTime), null
2026-01-26 18:42:37.113 [clientInboundChannel-13] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:37.117 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e6e2ec]
2026-01-26 18:42:37.122 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e6e2ec]
2026-01-26 18:42:37.123 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e6e2ec]
2026-01-26 18:42:37.123 [clientInboundChannel-13] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e6e2ec]
2026-01-26 18:42:39.099 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:39.099 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@188886c0]
2026-01-26 18:42:39.099 [clientInboundChannel-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1023585216 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:39.099 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:39.100 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결 요청을 취소합니다.(String), CANCEL_HANDOFF(String), apt001(String), 2026-01-26T18:42:39.098631900(LocalDateTime), null
2026-01-26 18:42:39.101 [clientInboundChannel-16] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:39.103 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@188886c0]
2026-01-26 18:42:39.104 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@188886c0]
2026-01-26 18:42:39.104 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@188886c0]
2026-01-26 18:42:39.104 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@188886c0]
2026-01-26 18:42:39.114 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:39.114 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb76745]
2026-01-26 18:42:39.114 [clientInboundChannel-16] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1029819840 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:39.115 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:39.116 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:42:39.114242500(LocalDateTime), room-008fd19e(String)
2026-01-26 18:42:39.117 [clientInboundChannel-16] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:42:39.119 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb76745]
2026-01-26 18:42:39.120 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb76745]
2026-01-26 18:42:39.120 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb76745]
2026-01-26 18:42:39.120 [clientInboundChannel-16] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb76745]
2026-01-26 18:42:40.030 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:40.030 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ff99a07]
2026-01-26 18:42:40.031 [clientInboundChannel-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@620884343 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:40.031 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:40.032 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T18:42:40.028494800(LocalDateTime), null
2026-01-26 18:42:40.032 [clientInboundChannel-7] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:40.035 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ff99a07]
2026-01-26 18:42:40.035 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ff99a07]
2026-01-26 18:42:40.035 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ff99a07]
2026-01-26 18:42:40.035 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ff99a07]
2026-01-26 18:42:40.036 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:40.037 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c9fc16]
2026-01-26 18:42:40.037 [clientInboundChannel-7] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@2072585933 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:40.037 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:40.038 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:42:40.036472800(LocalDateTime), room-008fd19e(String)
2026-01-26 18:42:40.039 [clientInboundChannel-7] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:42:40.040 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c9fc16]
2026-01-26 18:42:40.040 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c9fc16]
2026-01-26 18:42:40.040 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c9fc16]
2026-01-26 18:42:40.040 [clientInboundChannel-7] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c9fc16]
2026-01-26 18:42:40.882 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:40.882 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8ed14e]
2026-01-26 18:42:40.883 [clientInboundChannel-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1570075393 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:40.883 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:40.884 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결 요청을 취소합니다.(String), CANCEL_HANDOFF(String), apt001(String), 2026-01-26T18:42:40.881866500(LocalDateTime), null
2026-01-26 18:42:40.885 [clientInboundChannel-10] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:40.888 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8ed14e]
2026-01-26 18:42:40.888 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8ed14e]
2026-01-26 18:42:40.888 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8ed14e]
2026-01-26 18:42:40.888 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8ed14e]
2026-01-26 18:42:40.889 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:40.889 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d2dc17]
2026-01-26 18:42:40.890 [clientInboundChannel-10] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1258260912 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:40.890 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:40.890 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:42:40.889850200(LocalDateTime), room-008fd19e(String)
2026-01-26 18:42:40.891 [clientInboundChannel-10] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:42:40.892 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d2dc17]
2026-01-26 18:42:40.892 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d2dc17]
2026-01-26 18:42:40.892 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d2dc17]
2026-01-26 18:42:40.892 [clientInboundChannel-10] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d2dc17]
2026-01-26 18:42:43.159 [clientInboundChannel-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:43.159 [clientInboundChannel-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d45d83]
2026-01-26 18:42:43.160 [clientInboundChannel-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@784789018 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:43.160 [clientInboundChannel-3] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:43.161 [clientInboundChannel-3] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결을 요청합니다.(String), HANDOFF(String), apt001(String), 2026-01-26T18:42:43.157581200(LocalDateTime), null
2026-01-26 18:42:43.163 [clientInboundChannel-3] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:43.165 [clientInboundChannel-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d45d83]
2026-01-26 18:42:43.166 [clientInboundChannel-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d45d83]
2026-01-26 18:42:43.166 [clientInboundChannel-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d45d83]
2026-01-26 18:42:43.166 [clientInboundChannel-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d45d83]
2026-01-26 18:42:43.167 [clientInboundChannel-3] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:43.167 [clientInboundChannel-3] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd6b029]
2026-01-26 18:42:43.168 [clientInboundChannel-3] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1296555096 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:43.168 [clientInboundChannel-3] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:43.168 [clientInboundChannel-3] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:42:43.167553700(LocalDateTime), room-008fd19e(String)
2026-01-26 18:42:43.170 [clientInboundChannel-3] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:42:43.172 [clientInboundChannel-3] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd6b029]
2026-01-26 18:42:43.172 [clientInboundChannel-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd6b029]
2026-01-26 18:42:43.172 [clientInboundChannel-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd6b029]
2026-01-26 18:42:43.172 [clientInboundChannel-3] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd6b029]
2026-01-26 18:42:45.920 [clientInboundChannel-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:45.920 [clientInboundChannel-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41c078f]
2026-01-26 18:42:45.920 [clientInboundChannel-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@1159794100 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:45.921 [clientInboundChannel-4] DEBUG a.c.m.C.insertChatHistory - ==>  Preparing: INSERT INTO chat_history ( room_id, sender_id, sender_name, sender_role, message, message_type, company_id, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, COALESCE(?, NOW()), COALESCE(?, NOW()) )
2026-01-26 18:42:45.921 [clientInboundChannel-4] DEBUG a.c.m.C.insertChatHistory - ==> Parameters: room-008fd19e(String), cust01(String), 홍길철(String), CUSTOMER(String), 상담원 연결 요청을 취소합니다.(String), CANCEL_HANDOFF(String), apt001(String), 2026-01-26T18:42:45.919140200(LocalDateTime), null
2026-01-26 18:42:45.922 [clientInboundChannel-4] DEBUG a.c.m.C.insertChatHistory - <==    Updates: 1
2026-01-26 18:42:45.924 [clientInboundChannel-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41c078f]
2026-01-26 18:42:45.925 [clientInboundChannel-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41c078f]
2026-01-26 18:42:45.925 [clientInboundChannel-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41c078f]
2026-01-26 18:42:45.925 [clientInboundChannel-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41c078f]
2026-01-26 18:42:45.926 [clientInboundChannel-4] DEBUG org.mybatis.spring.SqlSessionUtils - Creating a new SqlSession
2026-01-26 18:42:45.927 [clientInboundChannel-4] DEBUG org.mybatis.spring.SqlSessionUtils - Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74ae8e81]
2026-01-26 18:42:45.927 [clientInboundChannel-4] DEBUG o.m.s.t.SpringManagedTransaction - JDBC Connection [HikariProxyConnection@621736699 wrapping org.postgresql.jdbc.PgConnection@f6302a9] will be managed by Spring
2026-01-26 18:42:45.927 [clientInboundChannel-4] DEBUG a.c.m.C.updateLastActivityAt - ==>  Preparing: UPDATE chat_session SET last_activity_at = ?, updated_at = NOW() WHERE room_id = ?
2026-01-26 18:42:45.928 [clientInboundChannel-4] DEBUG a.c.m.C.updateLastActivityAt - ==> Parameters: 2026-01-26T18:42:45.926119900(LocalDateTime), room-008fd19e(String)
2026-01-26 18:42:45.929 [clientInboundChannel-4] DEBUG a.c.m.C.updateLastActivityAt - <==    Updates: 1
2026-01-26 18:42:45.931 [clientInboundChannel-4] DEBUG org.mybatis.spring.SqlSessionUtils - Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74ae8e81]
2026-01-26 18:42:45.931 [clientInboundChannel-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74ae8e81]
2026-01-26 18:42:45.931 [clientInboundChannel-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74ae8e81]
2026-01-26 18:42:45.931 [clientInboundChannel-4] DEBUG org.mybatis.spring.SqlSessionUtils - Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74ae8e81]
